Hola, buenos dias, buenas tardes, bienvenidos a todos a esta nueva sesión. Muchísimas gracias por asistir aquellos que asistís a esta sesión en directo y también muchas gracias a aquellos que veáis después la grabación. Sé que me gustaría preguntaros un poco cómo vais, si habéis podido mirar un poco los documentos, las clases de ERR, si tenéis alguna duda de lo que hemos visto hasta ahora o si más o menos vamos bien. Os la dejo como pregunta para lo que vendría siendo toda la clase, ¿vale? Para ver en qué podemos mejorar o si algo que no está muy entendido poder reforzarlo lo máximo posible, ¿vale? Entonces el día de hoy, ¿qué vamos a ver? Por una parte veremos series temporales, lo que sería la teoría de series temporales, como siempre tenemos una parte de teoría y después intentaremos volver a entender un poquito las regresiones lineales con en este caso los logaritmos, que fue lo que no vimos la semana pasada, y luego cómo podemos empezar a hacer predicciones con series temporales, en este caso sería con RStudio. Entonces, os voy a compartir pantalla y de nuevo cualquier duda que tengáis, cualquier problema, este es el código que teníamos el otra vez, pero bueno, cualquier duda que tengáis, cualquier cosa que tengáis, por favor comentádmelo para que pueda ayudaros a entenderlo mejor todo. entonces que vamos a ver hoy lo que os he comentado sería el análisis de datos masivos para el negocio como siempre si miro hacia este lado es que tengo aquí el chat y es para comprobar que en efecto nadie tiene ninguna duda o poder resolverlas cuanto antes entonces que es una o a que llamamos o que es importante la serie temporal cuando hablamos de serie temporal medimos evolución y que es una evolución cambios a lo largo del tiempo vale en este caso puede ser para mejor o puede también evolucionar algo desfavorablemente entonces al final medimos cómo va cambiando algo cómo va variando una variable a lo largo del tiempo porque porque por ejemplo si nos ponemos desde el punto de vista de una empresa que tiene varios ingresos yo voy a querer ver cómo los ingresos se van comportando a lo largo del tiempo para poder detectar pues a lo mejor un momento en que no sea tan rentable o tan eficiente mi empresa de esta forma lo que vamos a tener o lo que también intentamos es realizar predicciones ¿predicciones en base a qué? predicciones en base al conocimiento del pasado aquí si alguno por ejemplo habéis estudiado finanzas sabéis por ejemplo que cuando hablamos un caso concreto por ejemplo del precio de las acciones a lo largo del tiempo sabemos que teóricamente decimos que nunca se puede envasar en el pasado Pues bien, cuando realizamos una predicción sí que es cierto que tenemos un poco de este conocimiento del pasado, ¿de acuerdo? A pesar de que teóricamente no sería lo más recomendable. ¿Y qué vamos a intentar hacer durante este tema? Pues primero, entender qué es una serie temporal, ser capaz de descomponerla y ser capaz de predecir y analizar estos posibles valores que tengamos, valores futuros. esto lo haremos, hay varias formas y la verdad, series temporales es un tema que se puede complicar muchísimo daría simplemente para una asignatura al respecto, pero vamos a ver los casos más sencillos que sería el autoarima que directamente el propio ordenador será el que nos recomiende el modelo a utilizar no os preocupéis que esto lo veremos vale, entonces ¿qué es una serie por tanto temporal? pues lo que os comentaba una serie de cambios de datos a lo largo del tiempo y generalmente siempre intentamos que entre observación y observación haya pasado el mismo tiempo si estamos hablando de días pues que todo sea días si estamos hablando de meses que todo sea meses esto es lo ideal ¿vale? que lo consigamos no siempre pero lo ideal o lo que tenemos que tender es que si entre una observación y otra pasa un día pues que siempre intentemos que pase un día ¿vale? De esta forma tenemos que donde existen sellas temporales, existen en un montón, hemos visto el caso de finanzas, por ejemplo si miramos el Producto Interior Bruto de un país, tenemos una gráfica en la que lo vamos analizando a lo largo del tiempo, por tanto también es una serie temporal. cuando hablamos de por ejemplo los incrementos de por ejemplo actividades delictivas también lo hacemos con respecto a un tiempo por lo tanto también lo podemos convertir una serie temporal en el caso de la medicina por ejemplo cuando cuando tuvimos la pandemia COVID recordad que se hacían muchísimos gráficos en los cuales veíamos los casos que había por cada mes y podríamos detectar ahí picos de enfermedad o lo que llamaban en ese momento al menos aquí en España se llamaban olas, ¿vale? Las olas de la pandemia. Entonces, este por ejemplo sería un caso de medicina, cómo se va desarrollando o se van expandiendo las enfermedades a lo largo del tiempo. ¿Vale? Cuando hablamos del tema de física, bueno, aquí tendríamos cualquier tipo, por ejemplo, de proceso físico. Al final se puede medir en una serie de acontecimientos a lo largo del tiempo, igual que procesos químicos, simplemente si lo pensamos en física, si pensamos en lo que es el movimiento de una persona, que esto siempre se puede especificar con unas ecuaciones físicas, que tenemos al final que es las posiciones de la persona a lo largo del tiempo, por lo tanto tendríamos este carácter también si quisiésemos representarlo de serie temporal. y por último tendríamos por ejemplo el caso de la astronomía también pues tema por ejemplo de cómo se puede mover o en qué punto está la tierra por ejemplo respecto al sol en cada instante o a lo largo de todo el año sería también por ejemplo un caso entonces, ¿para qué pueden ser utilizadas las series temporales? existen muchísimas formas, de hecho ya os digo que es uno de los campos más amplios y tendríamos desde predicción, ¿vale? De que tengo, por ejemplo, las compras que me hacen los clientes a lo largo del mes, pues las tengo recogidas. Las represento y yo quiero saber cuál es la predicción, si me van a seguir comprando o no me van a seguir comprando. Por ejemplo, este sería un caso. También tema de modelización. Muchas veces tenemos una serie de datos, ¿vale? Tenemos los tiempos, pero queremos aproximarlos a una función matemática. esto porque puede ser normalmente y generalmente está muy relacionado con el punto 1 lo que queremos es encontrar una fórmula que yo le dé los valores del tiempo y me saque el resultado para poder analizarlo mejor esto estaríamos hablando de la modelización si en algún punto tenéis dudas por favor comentádmelo también para que pueda ir resolviéndolas el tema de las simulaciones también vale porque al final podemos predecir O bueno, podemos con las predicciones establecer diferentes escenarios, analizar diferentes escenarios que pueden ocurrir e intentar paliar situaciones que no nos convengan, ¿vale? Y luego tendríamos el contraste de hipótesis, que este ya es otro mundo completamente diferente, pero básicamente es que queremos probar algo. Nosotros tenemos una teoría que queremos saber si es cierta o si es falsa. ¿Qué hacemos entonces? Ponemos dos teorías, que es la que nosotros queremos probar y la contraria, y mediante algoritmos estadísticos aplicándonos a estas series temporales podemos conseguir el contraste de hipótesis. Sí que es cierto que contraste de hipótesis con series temporales se da, pero no suele ser una de las prácticas más utilizadas. suelen estar más, de todo esto lo que más se da yo creo que es la 1 y la 2, ¿vale? Si a mí me lo preguntáis en mi experiencia personal, ¿vale? De acuerdo, ¿y cómo podemos tratar una serie temporal? Es un poco complicado porque necesitamos conocer realmente las características de la serie temporal y son varias, ¿vale? Entonces, primero, tenemos la existencia de componentes aleatorios o determinísticos. imaginaros el precio de una acción ¿vale? el precio de una acción si yo lo represento pues a lo mejor tenemos una acción que va así luego va así, luego de repente hace así, luego por ejemplo hace así no parece que haya una lógica sí que es cierto que parece que hay una tendencia ascendente ¿vale? pero por ejemplo aquí de repente sin motivo alguno aparente ¿vale? tiene una caída Entonces, cuando nosotros es determinísticos es que sabemos exactamente lo que va a pasar y cuando es aleatorio es que no sabemos. Entonces, generalmente cualquier serie temporal siempre tiene un matiz, un componente aleatorio que añade esa probabilidad, esa falta de certeza a lo que sería toda la serie temporal. después podemos tener que sean continuas o discretas, es decir, nosotros podemos tener series, cuando estamos hablando de las variables, es decir podemos tener números enteros o números discretos, por ejemplo si yo voy analizando cuántas personas se van poniendo enfermas por una cuántas personas están enfermas, ¿qué pensáis? que es una observación continua o discreta. Bueno, ¿entendéis lo que es continua y discreta? Empezamos por ahí mejor. ¿Continuo y discreto suena? Bueno, discreto es cuando tenemos los valores... Vale, gracias Irina. Valores enteros, ¿de acuerdo? Y continua cuando puede tomar decimales. Efectivamente. Muchas gracias Cristian y Irina. Vale, entonces, al final, por ejemplo, si estamos hablando de las personas Exacto, si estamos hablando de las personas que están enfermas pues evidentemente sería raro que fuese continuo porque no podemos tener persona y media no debería ser el caso y sería un poco turbio si tuviésemos persona y media sin embargo cuando estamos hablando a lo mejor, me lo invento de la cantidad de litros de gasolina que una empresa de transporte consume a lo largo del tiempo aquí sí que podemos tener decimales entonces va encaminado a esta parte de lo de continuas o discretas personas ingresadas por hora la variable ahí podría ser continua por el tema de la hora la variable de la hora la variable que es observada aunque tú tengas la hora que es tu referencia que sería lo que dibujaríamos en el eje X sí que es cierto que las personas siguen siendo una variable discreta Aquí no estamos tanto en el sentido del tiempo, sino de las otras variables que estás considerando. La variable de la hora, generalmente para representar una serie temporal, siempre sueles intentar que sea formato fecha. O sea que si tienes hora, pues hora y media la representes como 0,1, 2.30, por norma general. Sí que es cierto que a veces lo que sería el formato fecha que conocemos, por ejemplo, no sé por qué he dicho este número, pero bueno, no sirve. Por ejemplo, solemos intentar que estén en este ámbito o solo hasta la fecha o la hora, pero suele ser que estén en este punto. sí que es cierto que luego para otros algoritmos como puede ser por ejemplo regresiones o como pueden ser por ejemplo clasificaciones o clastrizaciones, lo que se hace es pasar a esto, a una cosa que se llama seconds to epoch ¿vale? y lo que se hace entonces es, lo quiero numérico perfecto, pues paso todo esto hay fórmulas en los propios exploradores que lo que hacen es pasárnoslo a completo numérico y lo que haces restar de la hora que tenemos aquí le resta una hora muy muy antigua y calcula el número de segundos vale tiempo sería continua efectivamente porque podemos tener todo esto de acuerdo pero sí que es cierto que no solemos poner el 2 con 5 horas vale cuando hacemos series temporales para otros algoritmos sí pero cuando hacemos series temporales solemos tender más a lo que sería 15 30-25 ¿por qué? por comodidad más que nada lo entiende mejor, de hecho bueno, tanto R como Python tienen un formato característico que es el formato fecha ¿vale? y cuando pones en formato fecha siempre lo vas a poner como una fecha y una hora o como una fecha solo, entonces por eso al final no suele ser el caso que cuando utilices algoritmos con fechas de series temporales tengas que pasarlo a numérico ¿vale? De acuerdo, en el caso de series temporales en otros casos sí que es normal encontrarnos 2,5 si estamos hablando de horas, sí, pero en series temporales es algo raro, ¿vale? Y después tenemos que las series pueden ser periódicas en cuyo caso diremos que tienen ciclos y pueden tener una dimensión temporal por ejemplo, el caso más claro, cuando estamos hablando de una economía mundial, siempre hablamos de los ciclos de la economía bueno pues los ciclos de la economía no son más que seis temporales en las que vamos analizando la capacidad del país a lo largo del tiempo entonces tendremos un momento en el que pues vayamos creciendo y estemos en una etapa digamos de bonanza luego habrá una época en la que nos estancaremos, luego llegará una época en la que iremos hacia abajo, luego hacia arriba por ejemplo un caso serían los ciclos económicos, un caso periódico, pueden ser más o menos grandes pero siempre digamos que se repite con un cierto tiempo de años. La dimensión temporal, lo que comentábamos, podemos medirlo en horas entre ellos, en segundos, en fechas. Podemos hacer un montón de cosas. El tipo de dato que está bastante relacionado con la pregunta número 2, es decir, ¿qué tenemos? Tenemos texto, tenemos números. Generalmente, la mayoría de las ocasiones, cuando hablamos de series temporales, solemos tener números. pero bueno siempre es importante tenerlo y ahora ya entrando más en profundidad en lo que se llama series temporales si alguien de verdad necesita más información por favor que lo diga porque lo estoy diciendo un poco rápido para también luego practicar pero de verdad que todas las dudas que tengáis por favor comentadmelas y profundizamos hasta lo que sea necesario entonces cuando hablamos de series temporales aparte de definir pues que es el tiempo y cuál es la variable que estoy analizando tenemos que definir cuatro componentes una serie temporal siempre tiene cuatro componentes y analizar cada componente por separado siempre nos va a reportar un beneficio o entender mejor la serie entonces os lo voy a poner todos de acuerdo que sería el ciclo que básicamente es un poco aquí estaría un poco reflejado lo que os comentaba de la periodicidad realmente es cada por ejemplo si estamos hablando de esto pues digamos que cada uno de estos sería un ciclo. Después tendríamos la parte de tendencia pues al final a pesar de que hagamos picos y no picos y tengamos por ejemplo sellas temporales muy completas así siempre tenemos una parte que nos dice pues si ha crecido, si va hacia arriba o hacia abajo en este caso va hacia arriba por tanto la tendencia sería ascendente. Después tenemos el componente estacional y luego tenemos el componente irregular. Esto está relacionado con lo que os comentaba de los datos aleatorios y los datos deterministas. Al final, aunque lo veáis aquí escrito muy complicado, que de hecho ahora los vamos a definir, pero aunque lo veáis aquí escrito muy complicado, lo que estamos haciendo es hacer una ecuación. Estamos diciendo, os lo voy a poner de un caso muy sencillo, pero estamos diciendo que nuestra variable que queremos encontrar a lo largo del tiempo de que depende de una parte que será cíclica con un determinado coeficiente más otra parte que tendrá que ver con la tendencia más otra parte que tendrá que ver con el componente estacional más otra parte que tendrá que ver con el componente irregular, ¿de acuerdo? No tiene que ser porque es el suma, pero lo que me refiero es que esto lo único que dice es que vamos a intentar construir una fórmula matemática de ahí la f de función o fórmula, que me relacione los valores de mi variable que quiero modelizar, la y, en función de estos cuatro componentes que son los componentes principales. Si alguien tiene dudas, por favor que me lo comente. Es una profunda consulta. Tal vez solo me puedes recordar cuál era el componente determinístico a que hacía referencia. cuando hablamos de componente determinístico es básicamente que no tienes una carácter aleatorio que tú sabes cómo va a evolucionar o puedes tenerlo con seguridad cuando hablamos de un componente sería lo contrario que fuese aleatorio por ejemplo si nos vamos a a todo el tema de las por ejemplo las acciones que se ve bastante bien ¿qué ocurre? que el comportamiento de las acciones hasta cierto punto es aleatorio tú puedes tener que de repente va a ir hacia arriba y de repente que vaya hacia abajo porque se ha destapado que, yo que sé, que falseaba las cuentas, ¿no? Entonces, tiene siempre un carácter aleatorio que va a ser complicado. Entonces, determinístico es lo contrario de aleatorio. Ya, perfecto. Gracias, profe. Disculpe, y en cuanto al componente estacional e irregular, ¿qué es lo que denotan esos dos? Vale, el componente estacional viene siendo como que se repite, ¿vale? Como que tienes algo que puedes ver a lo largo. Por ejemplo, imaginemos una tienda, ¿vale? una tienda que ahora lo veremos más en profundidad pero imaginas una o por ejemplo una empresa, estamos analizando la eficiencia que tiene la empresa a los trabajadores, que ocurre que cuando nosotros vayamos a verano, que va a ocurrir que disminuye, entonces cuando detectas ciertas características o ciertos patrones dentro de los datos que se repiten esto podríamos saber que está en estacional aunque ahora os lo comentaré con mucho más detalle y el componente irregular muchas veces también se llama ruido, es básicamente lo que os comento de lo aleatorio ahora cuando profundicemos os lo comentaré mucho mejor cuando hablamos de ciclo, ¿qué es? cómo se comporta a corto plazo, lo que os comentaba tú puedes tener una serie extemporal de muchísimo tiempo con muchísimos bucles esto lo veréis en ciclos económicos con muchísimos bucles y decir yo quiero saber en corto plazo cómo se comporta. A lo mejor te interesa hasta aquí. Esto sería lo que se llamaría un ciclo. Si han estudiado teoría de ondas, las ondas también en física se representan mediante estos dibujos y no dejan de ser también ciclos. Si alguien ha estudiado lo puede analizar desde ahí también. Después, la tendencia es a largo plazo. Es decir, no me interesa tanto lo que ocurre a corto plazo, sino que si yo tengo una tendencia, ¿Cuál creéis que es la tendencia de esta serie? Os pongo dos, esta serie y luego esta otra. esta primera sería la A y la B vale, la B está claro que es alcista porque ha empezado más abajo de lo que ha tenido entonces tiene una tendencia alcista aunque aquí ha pegado un vuelco eso podría pasar pero la A realmente no encontramos ninguna tendencia realmente no para de estar todo el rato más o menos más o menos igual, es decir, no es ni decreciente, ni bajista, ni alcista, ni ascendente. Aquí podemos decir que más o menos es una tendencia estable, o sea, se ha estabilizado, porque realmente no vemos ni que suba exactamente muy bien, David, lo que llamaríamos una tendencia lateral, si hablamos más técnicamente. Perfecto, pues aquí tendríamos la tendencia. Si vamos al componente estacional, es lo que os comentaba, los patrones y los comportamientos y sobre todo lo que más suele afectar es el efecto calendario. Por ejemplo, vosotros creéis que estamos ante una empresa que vende árboles de Navidad, por ejemplo. ¿Qué creéis? ¿Creéis que vamos a tener un componente estacional? ¿Sí o no? Efectivamente, sí. ¿Por qué? Porque cuando sea diciembre o noviembre tendremos aumentos muy grandes de tiendas, de uso de compras. si estamos hablando de hoteles por ejemplo, ¿consideráis que los hoteles tienen un componente estacional? también, ¿vale? efectivamente ¿por qué? porque siempre tenemos lo que comúnmente, para que os deis cuenta que realmente no estamos inventando nada cuando comúnmente se dice la temporada alta de los hoteles, ¿qué quiere decir? que hay meses en los cuales siempre te va a llegar más gente porque coincide con vacaciones ¿no? pues ahí tendremos también un efecto o un componente estacional ¿vale? Y el componente irregular es lo que os comentaba, el tema de lo aleatorio, ¿vale? Por ejemplo, de repente tenemos un hotel que siempre ha estado lleno en diciembre y de repente llega diciembre y este año no tenemos a nadie, ¿vale? Por ejemplo, ¿vale? Entonces, ¿esto es algo normal? No, es algo aleatorio. Nosotros tendríamos a pensar que tendríamos el hotel lleno. Bueno, pues este componente, ¿vale? Para poder modelizarlo es lo que se llama el componente aleatorio. también en las acciones ocurre muchísimo por eso entre otras cosas tenemos el riesgo y las volatilidades porque puede cambiar de una a otra lo digo por el tema de las acciones porque el gráfico que tenéis cuando pensáis en una acción es realmente una serie temporal y me sirve para que tengáis visible lo que sería un efecto aleatorio ¿de acuerdo? entonces, ¿cómo podemos extraer estos diferentes componentes de una serie? Existen muchísimos, aquí tendréis por ejemplo el Hodrick-Prescott, que serían filtros que nos extraen el componente cíclico y la tendencia, después tendríamos los otros filtros que aquí los tenéis representados que sería el componente estacional y una combinación de ambos. En realidad por esto no os preocupéis porque lo haremos en su debido momento en R, con lo cual tranquilidad al respecto. Pero también tenemos más opciones. Aquí el que más se utiliza es la media móvil. ¿Alguien ha escuchado hablar de la media móvil? ¿O es la primera vez que lo escucháis? Se utiliza muchísimo en el tema de las acciones propiamente dicho. pero bueno, ¿alguien sabe lo que es la media móvil? vale, Cristian sí, efectivamente, por segmentos ¿qué ocurre? nosotros tenemos por ejemplo el precio de una acción se utiliza muchísimo en acciones efectivamente, para suavizar las series entonces, ¿qué hacemos con la media móvil? nosotros detectamos o seleccionamos un periodo que es lo que se suele llamar, para que lo sepáis pero no porque lo vayamos a ver mucho, pero bueno. Tendríamos lo que se llama la rolling window, que esto es el número, el periodo de datos que tú quieres tener en cuenta para la media móvil. Digamos, por ejemplo, que queremos tener 24, por poner un caso, pero podría ser más. Entonces, ¿qué haces? Calculas las observaciones, pues esta es la observación 1, 2, 3, 4, 5, 6, hasta tu observación 24. y en esta observación 24 haces la media de todo lo anterior y eso te va a dar un punto, por ejemplo más o menos estaría por aquí en el siguiente ¿qué haces? pues coges el que los 24 desde el siguiente punto es decir, uno antes del anterior y así vas dibujando otro gráfico que al tomar las medias ya no tendremos estos picos y la media móvil se suele utilizar también pues con las bandas de Bollinger si alguien ha visto todo el tema de finanzas pues para decidir cuando es más seguro o cuando es más arriesgado entrar por ejemplo a comprar o vender una acción ¿vale? esto es lo que se llama análisis, bueno existen los análisis que es el análisis fundamental y el análisis técnico pues se basa muchísimo en todo este tema de la media móvil y de las series temporales ¿vale? ¿de acuerdo? si hay dudas de verdad sin problema comentadmelo todo lo que necesitéis por favor os lo pido de verdad la representación en este caso anual vale pues aquí tendríamos una representación que realizaremos algo parecido con lo que sería el estudio vale tenemos los años en este caso en el eje horizontal y la escala en este caso que pone turno es muy no es muy representativo pero bueno sería en la escala vertical de acuerdo dentro de estos años sí que es cierto que por ejemplo esta representación me falta mucha información pero tenemos los datos de todo porque si no no tendríamos la posibilidad de saber estos ciclos ¿qué es un ciclo? el comportamiento a corto plazo en este caso la tendencia alcista bajista o lateral ¿qué opináis? en este caso tendríamos alcista, bajista o lateral a largo plazo, ha aumentado o ha bajado efectivamente Juan Carlos, efectivamente sería lateral ¿por qué? porque sí que es cierto que si nos ponemos muy técnicos decimos hombre pero aquí partió de aquí y aquí está para arriba pero en realidad si analizáis todo el comportamiento no vemos ni grandes subidas ni grandes bajadas y de hecho vemos un ciclo que parece que aquí sube después baja después sube, como que sigue manteniendo lo que serían los valores, entonces estaríamos hablando de lateral a largo plazo en rango lateral efectivamente, vale más cosas, más cosas bueno, en este caso ¿podéis identificarme algún componente irregular? os pregunto ¿vale? como vemos estacional sí que es porque parece que de año en año más o menos se va cumpliendo el ciclo aquí tenemos que como a principios, bueno aquí tendríamos 2005, más o menos por aquí sería 2001 2002 parece que se va cumpliendo, cada vez que empieza un año pues empieza abajo y continúa arriba y luego baja pero aparte fijaros aquí tenemos estos piquitos cuando en una serie veáis piquitos suelen ser indicativos de componentes raros vale de lo que sería pues esos caracteres irregulares sí porque no son todas perfectas sino que tenemos estos piquitos que vendría siendo el componente irregular hasta aquí se ha entendido lo que veis representado en rojo vale sería la media sería la media lo diré la media móvil para que os hagáis una idea y esto lo que nos permite si por ejemplo analiza jce lo que sería las las bandas de bollinger lo que se hace luego lo que sea la compra de acciones hay luego una cosa que que es la banda de Bollinger, que se calcula, esto es por si os interesa algún día, pero os lo digo por entender también para qué sirve la media móvil. Esto es la media móvil, más lo que tendríamos unas, generalmente se toman dos o tres desviaciones típicas. Dos o tres desviaciones típicas. Igual que lo haces por arriba, lo haces por abajo. o será la media móvil esto es a quien le interese estas cosas el análisis fundamental es bastante interesante y esto sería la banda de Bollinger ¿qué podéis hacer con un ordenador? pero no vamos a hacerlo porque sí, exacto, Christian de momento así en formato en formato sencillo pero sí, efectivamente luego hay muchísimas más cosas aparte que nos complica pero al final es una forma de que luego si el precio de la acción toca la banda de arriba o la toca la banda de abajo tú sabes más o menos si deberías vender o deberías comprar una acción desde el punto de vista matemático pero efectivamente luego también se utiliza la media móvil de los precios máximos realmente luego hay aparte de las bandas de bowling se utilizan también muchos otros indicadores pero bueno la más sencilla digamos que sería a tomar la media móvil con más menos una serie de desviaciones típicas. Si a alguien le interesa esto, todo el tema del análisis fundamental, la verdad es que está bastante bien y es bastante interesante. En este caso, pues aquí tendríamos la descomposición. Nosotros partimos de las series temporales y acabamos en esta descomposición. Aquí, si os dais cuenta, tenemos los ciclos abajo. Tendríamos la tendencia, que vemos que en este caso sería más o menos alcista, Y tendríamos también lo que estaríamos hablando del componente estacional y el componente irregular, que si os dais cuenta son los piquitos que tenemos por ahí. Por lo tanto, una vez que tenemos los componentes y que entendemos que son los componentes, lo que tenemos que mirar es si la serie es estacionaria o no estacionaria. ¿por qué? que sea estacionaria, que matemáticamente tiene que ver con tener raíces unidad o no tener raíces unidad, pero no vamos a entrar en lo que viene siendo matemáticamente esto, pero saber si una serie es estacionaria o no estacionaria implica qué tipo de algoritmo podemos utilizar, existen varios tipos de algoritmos por ejemplo tendríamos los arimas los arimas, y saber si aplicar uno o aplicar otro depende de si esta serie es estacionaria o es no estacionaria. Para diferenciarlas, esto es lo que os comentaba, os enseñaremos cómo hacerlo pero no entraremos en demasiado detalle porque sería la parte de contrastes estadísticos-matemáticos que ya se estudia con bastante profundidad porque tiene su que y su intríngulis. Entonces, ¿qué hacemos? Intentamos mirar si una serie tiene raíz unitaria o no tiene raíz unitaria. esto es un concepto matemático realmente nosotros lo que haremos será aplicar un test una fórmula en RStudio y analizar el resultado si tenemos que el resultado nos sale que tiene una raíz unitaria también se puede llamar paseo aleatorio pero sobre todo aprenderemos a utilizar el método más que a entender que es una raíz unitaria porque necesitaríamos bastantes clases de matemáticas para ello Por lo tanto, las consecuencias también de que sea estacionaria o no estacionaria y de utilizar un buen algoritmo, pues al final es muy importante, sobre todo para obtener el mejor de los resultados y poder interpretarlo. Un ejemplo, tendríamos lo que serían los modelos AR. ¿Qué son los modelos AR? Fijo que estáis mirando la pantalla y estáis viendo un montón de letras o quizá que no conocéis o que os despistan. La letra esta que sería la letra Fi, os voy a señalar cuál es la letra Fi en griego. En matemáticas se utilizan muchísimas letras griegas. pues tendríamos esta letra fi y luego teníamos esto que se llama epsilon t. Cuando solemos definir epsilon t solemos estar definiéndonos normalmente el ruido, el componente irregular. Y en este caso lo que estamos diciendo es mi variable, por ejemplo, imaginemos que yo quiero predecir los precios. Lo que estoy diciendo es que los precios en t, es decir, en el tiempo actual, los precios en el tiempo actual, ¿de qué dependen? Dependen de un número que multiplica al precio en el tiempo anterior más un cierto valor aleatorio, ¿vale? Que sería epsilon t que también depende del tiempo. Esto es lo que se llama AR y AR1, ¿vale? Porque solo depende del t menos 1, ¿vale? Entonces, claro, cuando yo tengo yt, ¿qué es? Es mi valor en el tiempo t corresponderá a phi multiplicando el valor que yo tenía en t-1 más un épsilon de t. Si yo además tengo que el t-1 no lo conozco, ¿qué tendré que hacer? Pues el t-1 será lo mismo, pero en lugar de añadir aquí t-1, pues el tiempo anterior a t-1, ¿cuál será? Pues t-2. y luego tendremos el it-2 que luego lo sustituiremos por esto que el tiempo anterior al t-2 cuál será el t-3. Entonces vamos a hacerlo poco por poco. Nosotros partimos de que it es fi y t-1 más epsilon t pero este it-1 yo no lo conozco, yo conozco el valor t-3. Entonces voy a ir haciendo pasos anteriores hasta que pueda decir el t-3 que es el que yo conozco. Entonces aquí tendríamos que será phi por, y tendríamos phi por lo que vale yt-1 que lo tenemos aquí. Sería otra vez phi por yt-2 más epsilon t-1 más epsilon t-2. Pero yo sigo sin querer la afectación del t-2, quiero la del t-3. Entonces, ¿qué voy a hacer? Voy a sustituir t menos 2 por el y de t menos 3, como mediante la fórmula. Aquí tendríamos que esto será phi por phi por phi y t menos 3 más epsilon t menos 2 más epsilon t menos 1 más epsilon de t. iríamos así y al final acabamos con una ecuación en este caso cuadrática donde yo tendría que calcular cuánto vale phi matemáticamente es un poco complejo vosotros cuando lo utilicéis evidentemente no vamos a necesitar esto de phi sino que vamos directamente a aplicarlo y nos saldrá el resultado pero para que lo veáis y cuando phi es 1 pues muchísimo mejor porque si yo reemplazo aquí este valor por 1 que tendré que yt es 1 al cubo que es 1, por tanto y en el tiempo t menos 3 más el componente del ruido en el menos 2 más el componente del ruido en el menos 1 más el componente del ruido en el día actual. Entonces esto al final es una modelización, estoy modelizando unos valores y podemos entender cómo afecta los valores de la serie temporal. ¿Qué es la raíz unitaria? La raíz unitaria, a muy a grosso modo, repito, no vamos a entrar a mirar exactamente qué es, pero básicamente es si fi nos da igual a 1 o si fi es menor que 1. ¿De acuerdo? Si nosotros sabemos este valor de phi, lo que podremos saber es si la serie está estacionaria o no y por tanto qué método tenemos que aplicar. Cuando phi es igual a 1 lo llamamos permanentes y cuando phi es menor que 1 lo llamamos transitorios. ¿De acuerdo? De acuerdo, entonces cuando hablamos de regresión, por ejemplo, cuando intentamos hacer predicciones con regresiones temporales, pues solo podemos hacer si son estacionarias. esto es teoría que nos viene bien pero realmente si es igual a 1 ahí sí es estacionaria efectivamente ahora lo veremos, de acuerdo entonces si son estacionarias si no pues no tendríamos esa posibilidad y lo que siempre os comenté que creo que os lo comenté si no me acuerdo mal la clase anterior es cuidado con la correlación, la cointegración muchas veces nos explica lo que vendría siendo que correlación no implica causalidad. Aunque al final yo creo que la explicación es clara. Es decir, ¿qué me mide la correlación? Que cuando una variable me aumenta, la otra también me aumenta. Pero eso no tiene que ser que el hecho de que uno me aumente haga que la otra. Es decir, no hay una relación causal siempre. Nosotros podemos tener que hace sol, por ejemplo, y que la gente va a la piscina. Aumenta esa demanda. esto sí parece que tiene una causalidad que cuando haga sol la gente vaya a la piscina pues parece que sí que la correlación en este caso implicaría causalidad pero yo puedo tener por ejemplo que haga sol y que una persona pues haya hecho más trabajos en una oficina y no necesariamente que haga sol o que esté nublado debería hacer que una persona trabaje más o trabaje menos entonces en este sentido cuidado con el tema de la correlación De acuerdo y lo que vamos a utilizar generalmente sería el tema de Arima. Arima normalmente es la metodología que vamos a utilizar. Dentro de Arima a su vez existen muchos modelos pero nosotros utilizaremos en el estudio una cosa que se llama auto.arima que nos va a encontrar directamente cuál es el mejor modelo. Y esto lo digo porque es complicado lo que sería la predicción de series temporales con Arima, muchas veces se hace bastante complicado entender qué modelo es el correcto a usar. Entonces sí que os aconsejo que siempre intentéis utilizar el automático, ¿vale? De acuerdo, entonces esta sería la parte teórica, vamos a empezar con la parte práctica, ¿vale? Que veremos muchísimas menos cosas de las que hemos puesto aquí, pero sí que es importante que tuvieseis un poco esta parte más teórica al inicio. Y son menos 20, así que perfecto para poder explicaros un poquito, ¿de acuerdo? Entonces abrimos RStudio. ¿Vale? Vale, nosotros no vamos a trabajar Python como tal, ¿vale? cuando hablamos de Machine Learning, por ejemplo las regresiones lineales que habéis hecho aquí bueno, esas os las voy a explicar ahora, pero las regresiones lineales que hacíamos aquí, esto ya entra dentro del Machine Learning, Freddy y luego, no sé si quieres que te llame Freddy Weisrael pero bueno, y luego todo el tema de clasificaciones Machine Learning todo este tema de hacer la parte de predicción de series temporales también entra dentro del Machine Learning muchas veces, con lo cual estamos todos los días, aunque viendo cosas diferentes o áreas diferentes no dejamos de ver Machine Learning ¿vale? Machine Learning al final es aprendizaje automático es hacer que la máquina aprenda de los datos y te dé un resultado para ti una predicción, una clasificación una segmentación, entonces al final todo lo que estamos viendo es Machine Learning ahora bien, nosotros no trabajamos en Python en esta asignatura el siguiente cuatrimestre por ejemplo sí que doy la clase de Python también a mí personalmente me gusta más Python que R pero está bien el planteamiento de la universidad de que sepáis los dos idiomas o sea los dos lenguajes de programación tanto R como Python personalmente a mí me gusta más Python pero por un tema de comodidad y de simpleza creo que se ve mejor creo que la interfaz es mejor lo entendéis todo bastante mejor y R sí que es cierto que a veces cuesta entender si estoy mirando arriba, estoy mirando abajo estoy mirando a un lado y luego desde el punto de vista de representaciones gráficas considero que Python es más con menos programación tiene resultados más bonitos pero sí, ahora mismo en RStudio estamos viendo todo el tema de Machine Learning y el próximo cuatrimestre continuaréis viendo estas cosas probablemente conmigo pero las continuaremos viendo probablemente en otro lenguaje de programación no sé si te he resuelto no sé si quieres que te llame Freddy pero no sé si te he resuelto la pregunta perfecto por mi parte si alguien quiere aprenderlo en Python o alguien está trabajando en Python me puede hacer las preguntas por el foro igual, de acuerdo, lo que pasa que sí que es cierto que en esta asignatura procuraremos que sea el estudio dicho esto ¿qué habíamos visto? bueno pues ¿quieres hacer tu TFE por este tema de Machine Learning? por eso la pregunta ¿el siguiente cuatrimestre? de seguro que lo tienes en Python, ¿vale? Pero al final partimos de la base de lo que estamos dando aquí y repiteremos un poco todo, aprenderemos a Python desde prácticamente el inicio y acabaremos haciendo los principales algoritmos de Machine Learning, ¿vale? Si nos da tiempo, pues incluso a lo mejor hacemos algún tipo de análisis de sentimientos o de interpretación de textos, pero esto ya depende del tiempo que nos salga, ¿vale? Piensa que el TFE lo haces en el segundo cuatrimestre, ¿vale? y ya verás que se hace más o menos bien. ¿Sí? ¿Más o menos? Bueno, igualmente cualquier duda que necesites al respecto me lo vas comentando y no habría problema. Entonces, en la anterior vez habíamos utilizado este dataset que yo ya lo he precargado. Este es el archivo que subí que se añadió además toda la explicación de acuerdo de qué es cada una de las cosas y lo que no habíamos visto o no habíamos llegado a ver era el tema de los logaritmos. Habíamos llegado a ver esta parte, ¿qué hacíamos? Decíamos, bueno, a mí me interesa cuál es la relación o cuál es la recta que me uniría a lo que cuestan las casas en el distrito de Brent en función del precio. O sea, cuántas casas se han vendido en función del precio. Y esto lo podíamos hacer con una regresión que nos daba unos valores parecidos a estos. Ahora bien, nosotros podemos querer decir, oye, ¿qué pasa si el precio aumenta un 10%? Entonces ya no estamos diciendo que el precio aumente en una unidad, en dos unidades, en tres unidades, en cinco unidades, sino que estamos diciendo que queremos que el precio no se aumente en varias unidades, en un porcentaje. Cuando hablamos de esos porcentajes, lo que hacemos sería esta parte del log, que básicamente si lo que veis es la columna que antes tenía suelta, la voy a meter dentro de esto que se llama log y la otra columna, la que teníamos aquí detrás, también la añadimos dentro del log. Esto lo que estamos diciendo es, por ejemplo, si yo aumento un 10%, ¿cuánto me va a aumentar en este caso el valor de las casas vendidas? Pues me aumentará, aquí lo veis, en un 3,71%, que es esto multiplicado por 10. bueno de hecho disminuyen porque tenemos aquí un menos pero es lo último que nos quedaba ver que puedo hablar de cuánto me varía el precio si nosotros aumentamos en una unidad o no las variables pero también podemos hablar de porcentajes en este caso con los logaritmos vamos a continuar con dos sentencias de este tema y luego ya empezamos con lo que serían las series temporales pero sí que quiero que lo miremos Entonces, para que os hagáis una idea, si nosotros no queremos porcentajes y lo que queremos es tener la recta tal cual, lo hacemos sin los logs, ¿vale? Que esto lo tenemos hecho antes. Ah, bueno, y también os añadí lo que os comenté, cómo poder hacerlo con varias variables. Pues nada, simplemente aquí le sumáis, ¿de acuerdo? detrás de este acentito de la ñ que lo que nos decía eran las variables que queríamos utilizar para predecir le añadís aquí un más y añadís las que necesitéis entonces esto lo que nos daba era una recta y os decía aquí tenéis un término que es el intercept que es el término que va a suel le das aquí a esta palabra de run que tenéis aquí arriba y comprueba porque yo lo tengo frijado a mi archivo te va a dar error si no mira de poner aquí la ruta a tu archivo vale perfecto pues entonces le das a este paquetito de aquí que pone RAM de aquí arriba y te ejecutará todo el código Jonathan o Richard me pasa un poco lo mismo que no sé si queréis que os llame con uno o con otro pero bueno si alguien no quiere que le llame con el primer nombre pues me lo pone y ya está, ¿vale? Perfecto de acuerdo, entonces ¿vale? esto lo que nos decía que era que recordemos, esto era como por 10 elevado al cuadrado, es decir por 100, lo que estoy diciendo aquí es que mi recta era 3, 5 7, 6 porque multiplico por esos 100, menos y cuando hacíamos el menos elevado a la 0,4 lo que hacíamos era mover esta comita 4 posiciones Entonces sería menos 0.000241 por el precio. Cuando nosotros lo hacemos con el logaritmo, claro que nos va a cambiar. Y aquí lo que estamos diciendo es, me aumenta una unidad, o sea, yo tengo un precio de 50. Pues voy a mirar, sustituyo aquí los 50 y si yo tengo un precio de 50, el precio medio sería 50, pues el valor de las casas vendidas serán 357,58. ¿Qué ocurre? Que podríamos hacer lo de los logaritmos que básicamente es lo que os comento de porcentajes. Cuando no queremos saber exactamente si mi precio es 50 sino si mi precio por ejemplo ha subido un 10%. Entonces en este sentido tendríamos aquí la otra recta, pero al final es lo mismo, lo que pasa es que aquí nos salen otros valores, en este caso 9,72 y menos 0,3375. En este sentido también tened en cuenta que estamos tratando de logaritmos, es decir, estamos diciendo el logaritmo de las houses sold, es decir, de las casas, sería el logaritmo de 9,72. ¿Logaritmos habéis visto alguna vez? ¿O es la primera vez que os las comentan? Menos 0,3375 por logaritmo del precio medio. ¿alguna vez habéis trabajado con logaritmos? puede ser que no o sea, si es que no, no os sintáis mal por no haber trabajado con logaritmos pero es por saber ¿en R no? vale, ¿y en vuestro día a día habitual? ah, solo teóricamente vale me imaginaba que iba a pasar esto, por el tema de que los logaritmos se suelen ver mucho cuando vas a en instituto efectivamente por ejemplo en temas de física en temas de matemáticas sí se utilizan muchísimo pero sí que es cierto que yo creo que por la complejidad quizá que parece que no estamos acostumbrados a hacerlo, parece que es algo más de lo que realmente es un logaritmo si yo os pongo por ejemplo 10 elevado a 4 todo el mundo me diréis que sabes lo que es 10 elevado a 4 ¿sí? que esto es una potencia vale, el logaritmo es lo contrario imaginemos, esto es 1000 y esta es la potencia, 10 elevado a 4 yo sé que es 1000 ahora bien, ¿qué es un logaritmo? el logaritmo el logaritmo de 10.000 en base 10, porque si no tendemos a pensar que es otro número, pero bueno, en base 10 el logaritmo de 10.000, ¿cuánto es? 4 ¿Por qué? Porque 10, que es mi base de logaritmo, elevado a 4 es 10.000. Es la operación contraria a las potencias. ¿Por qué utilizamos aquí logaritmos? Porque al final nos permite encontrar estos cambios cuando hablamos de aumentan en tanto y disminuyen en tanto. lo solemos representar como logaritmos en base 10 simplemente por eso ¿sí? ¿se entiende? es esto yo por mi parte os daría una clase entera de logaritmos porque me encantan pero no es el motivo de la clase pero no penséis que es algo raro pensad que es una forma de escribir que es la operación contraria a la potencia de hecho existen dos tipos existe el logaritmo por ejemplo en base 10 pero podemos tener también logaritmo en base 2 Si yo os digo el logaritmo en base 2 de, por ejemplo, 4, para que sea algo sencillo, ¿cuál creéis que es el logaritmo en base 2 de 4? Vale, efectivamente, Juan Carlos, sería 2. Sí, sí, es perfecto, 2. ¿Por qué? Porque 2 elevado a 2 es 4. Entonces el logaritmo es el valor que ponemos aquí, ¿vale? ¿Cómo se resuelven? No es esto el tema, pero bueno, ya es lo último. ¿Cómo resolvemos estas ecuaciones, vale? ¿Cómo sabemos que es 2? Porque lo que se hace es lo siguiente, imaginemos que tenemos, bueno, esto es por curiosidad, más que nada, pero imaginemos que tenemos el logaritmo en base 5, ¿vale? De, bueno, 5 no estamos tan acostumbrados, 2 de 32, ¿vale? Por ejemplo. Y quiero saber qué valores. ¿Qué se hace? Lo que se hace es elevar 2 aquí y 2 aquí. Esto y esto se van. Y tienes que encontrar un número que sea 2 elevado a ese número sea 32. En este caso el número es 5, si no recuerdo mal. Porque 2 por 2 es 4. Sería 2 al cuadrado, 2 al cubo es 8, 2 a la cuarta es 16 y 2 a la quinta es 32. pero bueno, estas cosas para que sepáis y que no suene raro que cuando hablo de logaritmos pensad que es como si fuese el contrario de una potencia ¿vale? más o menos existen otras cosas también porque luego el contrario de una potencia realmente son las raíces cuadradas ¿vale? pero bueno están íntimamente relacionados, bueno las raíces en general, pero están íntimamente relacionados con todo ello ¿vale? de acuerdo, entonces dicho esto, que no es el tema vamos con cómo podemos saber si ha salido correcto o no ha salido correcto nuestra estimación lo que se hace es guardar el resultado de esta estimación en una variable entonces yo lo puedo llamar por ejemplo modelo en esta variable y esta variable modelo voy a hacer una frase que es summary de modelo esto que me va a dar me va a dar unas métricas respecto a este modelo me da los residuos que me han salido los valores de los residuos por ejemplo y sobre todo tenemos que ver aquí estos valores de aquí aquí tendríamos de nuevo los coeficientes el coeficiente que tú tienes es 9,72 y el otro coeficiente que multiplica esto sería menos 0,337 aquí nos da una cosa que es la significancia, esto no vamos a entrar, pero esto lo que nos dice es que si es mayor o menor que normalmente 0,05 que es el grado de confianza que nosotros queremos dar podemos decir que es descartable o sea que es despreciable pero en esta parte no vamos a entrar, porque normalmente no se entra, de hecho aquí tenéis los códigos de significancia que te dicen con qué valor tienes que comparar los valores de aquí para saber si son variables importantes o variables que las puedes despreciar vale y después tenemos aquí lo que sería el r square el r square el r cuadrado es una métrica que va de 0 a 1 cuanto más cerca de 1 mejor es la aproximación vale en este caso si hay una aproximación bastante bastante flojilla por el tema de que es 0 con 18 vale si Si nosotros probamos hacerlo en este caso de aquí, pues lo podemos hacer y veremos que es un poco. Simplemente hacemos esto, reenfocamos la variable suma y vemos que los resultados son distintos. En este caso es incluso peor porque nos sale un 0,00008, prácticamente 8, con lo cual sería incluso peor. Pero bueno, para que tengáis en cuenta que sería una forma de poder analizar cómo de bien o cómo de mal os ha salido la reducción lineal. Dicho esto, pasaremos ahora a lo que serían las series temporales. Entonces, ¿cómo podemos hacer unas series temporales? ¿Cómo podemos dibujarlo? Pues por ejemplo, si yo quiero hacer un dibujo muy muy sencillo de una variable, por ejemplo del precio, sin tener en cuenta simplemente dibujar los valores, sin tener en cuenta otras variables. Por ejemplo, vamos a presentar lo que sería el precio. Aquí tenemos que fijaros, el precio, bueno, pregunta, tendencia alcista o bajista, primero. ¿Qué ocurre? Que el dibujo sí que se toque, es un poco raro porque no entendemos la parte del índice. ¿Esto por qué es? Porque no estamos teniendo en cuenta o no le estamos diciendo que los valores del índice realmente estamos hablando de la evolución del precio en un tiempo. No estamos diciéndole que sea una serie temporal. Entonces lo que vamos a hacer ahora es decirle que estos datos los tenemos entre 1995, sería el año que empezaríamos, enero del 95, y vamos a decirle que vamos a tener una cierta frecuencia de ellos. Entonces, ¿cómo podemos hacer eso? Pues de la siguiente forma. Vamos a crear una serie temporal, que la voy a llamar precio Brent, y para crear una serie temporal pensar serie temporal en inglés time series, por tanto ts, t de tiempo en inglés, de time y s de series, de acuerdo, en inglés, que es la forma o el formato de dato que estamos haciendo, ¿vale? Vamos a ponerle primero el average price, ¿vale? que sería el precio medio, el valor que yo quiero y ahora tengo que decirle de dónde van estos datos y cuál es la frecuencia. en este caso el start, el primero pues por ejemplo vamos a decir que empiezan desde enero del 95 y la frecuencia es cada cuantos meses, en este caso vamos a hacer una frecuencia mensual que tenemos que sería frequency igual a 12 de acuerdo, aquí me está indicando este error porque me falta poner aquí la C de hazme una columna con datos de 1995 De hecho, para que veáis exactamente lo que hace, podemos mirar primero que sería esto de aquí, que estamos hablando que es 1995.1 y es básicamente el inicio. Entonces nosotros hacemos así y cuando veo precio Brent, fijaros que tenemos una serie de valores, pero agrupados por cada uno de los años, hasta 2020, hasta el último dato que tenemos. Y en este caso partimos de enero, febrero, marzo, abril. ¿Por qué lo tenemos por meses? Porque nosotros hemos indicado una frecuencia 12. entonces ahora esta time series lo que he calculado aquí que ya es una serie temporal sí que cuando la dibuje me dará un resultado mucho mejor o más fácil de interpretar fijaros que ya no tenemos cada uno de esos puntitos que teníamos antes sino que ahora tenemos una línea recta y esta línea recta va desde 1995 hasta 2020 ¿por qué hemos puesto enero del 95? Bueno, porque sabemos o tenemos conocimiento de los datos previos. Aquí generalmente, o la mayoría de las ocasiones, no necesitaréis vosotros crear esta variable, sino que ya tendréis una columna que os indique el tiempo. Pero en nuestro caso, como no la teníamos, pues simplemente la hemos creado. Veamos el tema de los ciclos. Lo que habíamos dicho que era bastante complicado, que teníamos tendencia, teníamos ciclos, teníamos una descomposición, en R se basa en que utilicemos la palabra decompose. ¿Decompose de qué? De mi serie temporal, de mi precio Brent. Cuando yo hago esto, me lo va a descomponer. Ahora, ¿qué quiero hacer? Evidentemente así no me sirve, porque analizar todo esto sería bastante complicado. Lo que necesitamos es dibujarlo, por lo tanto vamos a guardarlo. por ejemplo, primero lo vamos a guardar y luego ¿qué vamos a hacer? Vamos a dibujarlo, ¿vale? Entonces hacemos plot de descomposición, precio, brenda, ¿de acuerdo? Cuando hacemos este plot, fijaros, ya aparecen las cuatro series temporales y aquí tendremos el carácter irregular, el carácter random, el carácter estacional, el seasonal, que vemos aquí que se repite con cierta regularidad, con un montón de regularidad. El carácter de trend, aquí tendríamos esa tendencia alcista y el observe que son nuestros datos originales. Fijaros que parece que siempre hay un componente, al final el consumo de petróleo más o menos por año parece que es bastante similar, pero en 2019 aquí tuvimos un comportamiento bastante irregular, si os dais cuenta. ¿Por qué puede deberse? Pues a lo mejor, si no recuerdo mal, aquí estaba lo de la OPEP que estaba disminuyendo la oferta para aumentar el precio, pero no os lo puedo decir con seguridad. Entonces, fijaros que todo lo que habíamos dicho que era tan complicado en el caso de Restudios con el de Compose. Eso, si van a vencer unos futuros de petróleo, me sonaba algo así. Entonces fijaros que el hecho de ver el componente irregular nos permite ver pues algunas casuísticas. 2016 también fue un año raro para lo que sería el petróleo y de hecho veis que en 2016 hay como una especie de caída o por ejemplo aquí tendríamos, sí que sería la caída tan grande que hubo, que se rogó a 2017. pero todo lo que habíamos visto tan difícil con un montón de descomposiciones, un montón de variables, un montón, no deja de ser una línea de código en R, ¿vale? Sobre todo eso que os quede claro, ¿vale? Lo último que veremos, ¿vale? Sería que lo veremos ya el próximo día, aunque yo os pasaré el código con esto para realizar la ecuación de la tendencia a tren, como obtener los índices estacionales. Cuando realizamos la predicción vamos a utilizar el arima y esto lo que hace es ya ponernos la fórmula, no vamos a tener que descomponerlo. Actualmente la descomposición es para entender la serie temporal, para entender el comportamiento que ha tenido. Por ejemplo, pues veo que siempre más o menos se consume de la misma forma en este caso el petróleo o se comporta de la misma forma en este caso los precios, perdón, no estamos hablando de petróleo, perdón, perdón, perdón, es que Brent creo que es petróleo en inglés, estamos hablando de las casas, perdón. no estamos hablando del petróleo es que me he confundido porque se parece mucho a Brent y generalmente esto lo hago con el tema del petróleo, estábamos hablando de o sea no es el barril de Brent, es el tema de de las casas vendidas perdonad, ¿vale? perdonad que me he confundido porque normalmente lo hago con temas de petróleo porque se ven bastante bien y pues se me ha ido entre que he visto Brent y todo esto ya se me ha ido estamos hablando de las casas entonces pues aquí todavía lo veremos mejor tendríamos que 2008 fue la crisis fijaros 2008 más o menos esto sería 2006 aquí tendríamos 2007 aquí estaría 2008-2009 fijaros el pico de la caída, esto me lo permite y el comportamiento casi siempre es lo mismo al final más o menos las casas que se van comprando se van vendiendo suele tener un carácter estacional bastante fuerte pero el tema es que analizando yo sobre todo me fijo cuando vayáis a analizar este tipo de series en el componente aleatorio porque nos dice cosas bastante curiosas de lo que ha pasado y respecto a lo que me comentabas Irina y perdonad por eso que es que en inglés el barril bueno en fin tenemos que el tema de la predicción cuando dices ¿cómo obtener la ecuación de la tendencia a tren? ¿cómo obtener los índices estacionales? la predicción como tal lo vamos a hacer con lo que os comentaba de yt es igual a tal tal tal tal ¿vale? realmente no lo vamos a, no llegamos ¿vale? a predecir digamos la tendencia, al final la tendencia siempre la analizas mirando el gráfico ¿vale? si, lo podrías hacer, lo que pasa que en este caso los datos ¿vale? que utilizamos, si que son de, o sea, son datos mensuales y llegan hasta 2020, entonces claro lo que haces es restar para saber hasta qué punto, ¿vale? cuál debería ser tu inicio, ¿vale? por eso hemos empezado desde el 95, pero esta columna normalmente ya te viene ¿vale? puedes crear una variable, realmente cuando haces la serie temporal ella te está creando, ¿vale? digamos que esas columnas concretas ¿de acuerdo? que es lo que ves aquí o sea, la serie temporal, él ya te lo crea automáticamente, tú le dices el inicio y le dices qué tipo tiene que ser mensual y empieza en 1995 primer dato, enero del 95 segundo dato, febrero del 95 tercer dato marzo del 95 y llega hasta que llegas al último dato que tengas, que en este caso pues ha coincidido que es 2020 si no recuerdo mal bueno, 2018 pero esto generalmente os lo dan solís tener una columna que ya son las fechas, en esta variable como tal no, pero sí que la solís tener entonces para el próximo día veremos lo que sería la aplicación de un Arima empezaremos la clase con la programación en el ReStudio, veremos lo que es la programación de Arima aunque en el fichero que os suba en la parte de documentación tendréis todo, tendréis todos los documentarios por si queréis empezar a mirar lo que se llama modelo Arima, pero lo veremos el próximo día y comenzaremos ya con el siguiente tema, pero empezaremos con la parte del modelo Arima ¿Alguna duda más respecto a esto? Sobre todo importante Lo que yo creo que más debéis fijaros Cuando estamos hablando de un máster de inteligencia de negocio Saber interpretar estos gráficos Para mí es clave Y cuando hacéis el trabajo final de máster Si os toca que sea vuestra profesora correctora Y me tenéis gráficos Siempre, siempre, siempre, siempre Os pediré que me los analicéis Porque es lo que os hace diferentes Y lo que es más difícil de hacer O sea, al final la programación la puede hacer todo el mundo con mayor o menor esfuerzo, ¿vale? Pero el saber interpretar los gráficos no lo puede hacer todo el mundo. Exige que tengas conocimiento del mercado y conocimiento del contexto y creo que es la parte en la que vosotros debéis sobresalir aún más, ¿vale? Entonces cuando hagáis vuestros trabajos final de máster, en el caso de que os toque, siempre os pediré que hagáis mucho hincapié en el análisis de los gráficos. Queda bastante bien y es lo que tenéis que hacer. ¿Se ha entendido un poco lo que hemos hecho hasta el día de hoy? Tema de covarianza, tema de correlaciones, tema de sus coeficientes de variación que os comentaba que tuvierais en cuenta el 0,3. más de 0,3 varía mucho menos de 0,3 variación moderada ¿vale? ¿cómo hacer una serie temporal? que es, tienes un conjunto de datos y luego le añades como el start ¿no? que sería el inicio ¿se entiende esto? aunque os lo pasaré todo de nuevo, todo explicado vale, por ejemplo, análisis de observación ¿yo qué veo? de hecho aquí podemos hacer zoom si no recuerdo mal ¿vale? ¿yo qué veo? veo, primero veo una inflación tremenda, ¿por qué? porque veo que las casas en 1995 costaban en torno a 50 bueno, sí, en cuanto a 50.000 bueno, me faltaría ver un poquito el tema de cuánto es la métrica pero sería en torno a unos 50.000 o así y a día de hoy se ha disparado, entonces eso es lo primero que veo que hay una revalorización del terreno y perdón estamos hablando de las casas vendidas perdón, eso, de qué estamos hablando de que antes se compraban muy poquitas casas y ahora se compran muchísimas. ¿Esto qué indicaría? Indicaría un aumento de población. ¿Estamos hablando? No, estábamos hablando del precio. Eso, lo que os he comentado antes. Un aumento de la inflación. Si estuviésemos hablando, por ejemplo, del número de casas que se compran, ¿qué nos indicaría esta recta? Nos indicaría que hay más gente que compra, por lo tanto, probablemente mayor población. En este caso, lo que nos indica es que aquí se compraban muy baratas y aquí se compraban muy caras. Por lo tanto, al final lo que tenemos es o un aumento de que las viviendas son mejores o un aumento del costo de vida, un aumento de la inflación. Además, podemos ver que aquí tenemos pequeños momentos en los cuales baja el precio, que si nos damos cuenta, perdona por mi reta, pero coincide más o menos con las etapas en las que ha habido una mayor caída en cuanto al componente irregular. aproximadamente, es decir aquí nos puede indicar estas bajaditas pequeñas probablemente pequeñas crisis o pequeños momentos en los cuales a lo mejor el estado ha intervenido y de repente nos ha bajado el precio o ha puesto un tope sería por ejemplo, aunque normalmente si el precio de las casas baja suelen denotar pues normalmente crisis o una bajada de la demanda ¿qué más cosas podemos ver? a mí por ejemplo el tema del precio de las casas me da muchísima información también respecto a si yo comparo Brent con por ejemplo a lo mejor otro distrito en el cual vea que vaya así pues evidentemente parece que Brent será mucho más popular que otro distrito entonces me permite tener una comparación pero sobre todo en este caso para mí lo que tendríais que analizar es evidentemente el precio sube con pequeños puntos de caída debidas a las crisis aquí nos iríamos al aleatorio y veríamos las diferentes crisis que coinciden con 2009-2012, o sea que sí que más o menos coincide con los años en los cuales hubo una cierta inestabilidad. Y luego además comentaría simplemente el tema de que al final es un incremento o una representación de la inflación. ¿Sí? ¿Se entiende? podrías incluso decir si fuiste una persona que compraste aquí ahora a lo mejor te interesa vender la casa porque puedes llegar aquí ¿vale? entonces también lo puedes analizar en ese punto ¿vale? sí, la siguiente clase haremos una predicción de cómo va a evolucionar ¿vale? pero sí que me interesaba que entendieses bien o explicar bien, bien, bien no solamente daros el código porque daroslo sino analizar ¿vale? ¿qué pasaría si el comportamiento ¿Y la estacionalidad? ¿Cómo lo puedo interpretar, por favor? ¿Vale? ¿El de la estacionalidad? ¿Vale? Perfecto. Pues vamos aquí. A ver, el de la estacionalidad que al final me está diciendo. Me está diciendo, por ejemplo, que al final el pico, ¿vale? Si os dais cuenta, está como a mitad. Vamos a ver. Este es 2000. ¿Vale? Aquí tendríamos 2004, perdón, aquí tendríamos 2000, perdón, si hago bien los números estaría perfecto, ¿vale? Esto sería 1999, este aquí tendríamos 1998, aquí tendríamos el 96 aproximadamente, me falta uno. bueno, digamos que estos picos, voy a intentar ponerlo mejor aquí tendríamos, este sería 1995 y aquí tendríamos el 2000 que vendría a ser este aquí tendríamos el 99, el 98 y el 96 es decir, al final lo único que nos está diciendo o es una forma de representar de que básicamente el comportamiento más o menos durante todos los años sigue o tiene o el precio sigue más o menos la misma temática si el exísono no saliese tan tan clavado a esto significaría que habría a lo mejor algún año lo cual no sería el comportamiento igual, pero al final si pensáis en el precio de una casa generalmente a lo largo del año no suele variar mucho suele variar más a la larga pero no suele variar muchísimo, y respecto a tu pregunta Francis, de si el comportamiento de los datos no muestra estacionalidad, que mostraría el gráfico exísono os hago un ejemplo el próximo día de algo que no muestra estacionalidad porque tengo que buscarlo y así lo veis os lo puedo explicar pero creo que se ve mucho mejor si os lo muestro pero generalmente muchas veces lo que muestra es algo así de acuerdo pero bueno ya lo iremos viendo Amparo aquí en el set de las gráficas falta tendencia cíclica lo podéis ver aquí no, es estacionalidad sí, esta es estacionalidad pero al final lo que veis aquí también es su comportamiento ¿y cíclico se puede obtener aparte? disculpe, que le interrumpa no, no, tranquila tranquila, sí, de todas formas la parte de seasonal va diciendo un poco los ciclos que puede haber pero como tal, cíclico como tal aparte tendríamos que hacer una serie o sea, un gráfico diferente ¿vale? sí que implicaría un poquito más de trabajo que simplemente una descomposición tal que así o sea de compose existen otras cosas, si queréis lo podemos ver, que sería el FB Profit tengo que ver si se puede hacer en RStudio, que creo que sí que este es uno que ha desarrollado Meta y que te da un comportamiento muchísimo mejor en la descomposición y bastante más aproximado a lo que creo que quieres Irina, si queréis lo podemos ver, no es lo que íbamos a ver pero bueno, lo podemos analizar también este paquete Tengo dos preguntas. La primera es, no me quedó claro cuál es la diferencia entre utilización de series de tiempo para la predicción y para el modelamiento, porque predicción se hace a base del modelo. Exacto, es lo que comentaba que el punto 2 está muy relacionado con el punto 1 Al final, lo único que cuando hablamos de predicción Generalmente muchas personas no miran el modelo matemático que hay detrás Pero al final es lo que dices Realmente, aunque tengamos una predicción Lo que está haciendo el ordenador por detrás es un modelo matemático Sí, exacto Y otra, en el primer modelo que fue creado antes del logarítmico el coeficiente L salió bastante bajo, pero P valor salió aceptable. ¿Qué se hace en este caso? Vale, en este caso, el tema del P valor y el tema de lo eficiente. Una cosa es el P valor y otra cosa es lo que sería el error de la métrica, en este caso de reducción lineal. Lo que estaríamos hablando es que si el P valor te sale aceptable, aceptable, que es algo que no he entrado porque digamos que no nos da el tiempo a verlo, pero si el p-valor te sale por encima o bueno, aceptable, lo que estaríamos diciendo es básicamente que los coeficientes son correctos y se pueden utilizar, los que multiplican, ¿vale? Pero esto es diferente a que ese coeficiente que has calculado en base a esos datos y que te dice que la recta se puede hacer así y por tanto las variables tienen sentido, es diferente a que tú recta con esos coeficientes sea buena o no sea buena. El único que te está diciendo el p-valor es, vale, sí puedes tener este coeficiente o este coeficiente tiene sentido para esta columna. Pero no te está diciendo que el resultado, cuando tú apliques ese modelo, el resultado que obtengas sea un buen modelo o un mal modelo. Eso te lo mediría el r cuadrado, el adjusted r square. Con el p-valor menos 3, creo que, Tal vez podríamos desplazarnos en la fila, creo que... Sí, por supuesto. Por aquí, por aquí, por aquí, por aquí. Te lo muestro. Aquí, ¿vale? El valor del estadístico... Aquí clarísimo está que no sirve, pero anterior. Este, este, este. Este, el primer valor te está saliendo cero. Es 0,000000... O sea, aquí 14 ceros, ¿vale? Por aquí tienes 1 menos 15 y 627. Es prácticamente nulo. y aquí lo analizarías generalmente con el 0.05 que normalmente es el que se suele poner por defecto aunque sí que es cierto que permite más pero sí que es cierto que una cosa diferente es lo que es cómo de bueno o cómo de malo es tu modelo en cuanto a predicción y otra cosa es el p-valor que generalmente lo que nos indica es la significancia es decir, cómo de importante es pero no cómo de bueno o cómo de bien predice son dos cosas diferentes no sé si me explico no sé si entendí bien, este p valor que dice 6, 27 menos 15 corresponde a qué al f se relaciona con el f estadístico cuando hacemos un control de hipótesis que no sé hasta qué punto habéis visto control de hipótesis en otras asignaturas que haces un control de hipótesis digamos que comparas tu muestra con otra muestra que pones por defecto Entonces haces esta muestra y de aquí calculas lo que se llamaría el F estadístico, que es un valor numérico que sale de una fórmula, ¿vale? Matemática más o menos compleja de unas distribuciones, que aquí tenéis la Wilkinson de Humanly, tenéis también la T de Student, que generalmente es la que más utiliza, la F de Snedecor, que en principio es la que está utilizando aquí, y de ese estadístico, ¿vale? El P valor te dice cómo de representativo es. entonces aquí si queréis podemos dar una clase de control de hipótesis súper densa pero por eso no me he metido a analizaros como tal el p-valor y los valores del estadístico porque aunque sí que son importantes y de hecho son muy importantes es cierto que es un concepto que normalmente se suele dar más en carreras como matemáticas a partir de un cierto año lo que vendría siendo es más o menos como, o sea si os gustaría la clase de contraste de hipótesis os hago una una clase de contrastes y hipótesis, para mí no hay ningún tipo de problema, ah, en tu caso es por la investigación, vale, sí se suele utilizar muchísimo, vale, y no solo para el tema de series temporales realmente se utilizan también pues para saber si se pueden aplicar unos algoritmos o no, si dos poblaciones tienen la misma media o no tienen la misma media, pero esta parte del p-valor y del f-estadístico es más en cuanto a la significancia del modelo, vale, la importancia del modelo, no en tanto cuánto al modelo responda bien el nivel que estáis y el nivel de momento que se os va a exigir en la UNIR realmente fijaros sobre todo en esta línea de aquí ¿vale? porque como mucho esto que entre comillas es otro p-valor de la t-distribución que me mide la importancia de los coeficientes ¿vale? como mucho, esta línea prácticamente para el nivel que se os va a exigir aquí la podéis ignorar, pero si queréis una asignatura, o sea una clase en la cual os explique en condiciones qué son todos estos datos, por mi parte no hay problema. Pero realmente en el día a día el que sueles tener más en cuenta es el R cuadrado. No sé si te ha ayudado Irina. No sé, gracias. El conocimiento es infinito. Por eso. Yo particularmente como matemática sí que es cierto que me gustan bastante los p-valores y los estadísticos. Sí que es cierto que control hipótesis no es una parte sencilla entre comillas de entender de las matemáticas no porque no podéis entenderlo, pero porque lleva bastante tiempo entonces por eso dentro de lo que hay no solemos entrar en ello pero sí que es bastante importante lo que pasa es que normalmente se ve más os digo lo que generalmente se ve en el día a día lo primero que miras es esto si esto ya te sale cercano a cero, ya mal, o sea ya no miras nada más, y lo segundo que miras es cuando ya tienes un cierto nivel estos valores de aquí porque esto aquí tenéis un estadístico que es el F estadístico que esto viene de la F de Snedecor que es una distribución estadística pero se suele analizar más este, ¿por qué? porque este valor que viene de una T esta es la distribución T de Student os la voy a escribir por si acaso alguien quiere investigar sobre esto entonces la T de Student es otra distribución y aquí sí que es cierto que lo comparas con los valores que te dan aquí y te dice cómo de importante, entre comillas, es esta variable. De forma que hay momentos en los que puedes despreciarlo porque dices, es que no es importante esta variable para la regresión que estoy haciendo. Y puedes despreciarlo, ¿vale? Lo que pasa es que esto, ya os digo, ni en el segundo cuatrimestre se suele ver, ¿vale? No se suele analizar porque implica un conocimiento. Os lo puedo decir, os puedo decir, Mira, si esto es menor que 0,01, esta variable es despreciable. Pero si queréis de verdad entenderlo, entenderlo bien, sí que ya conlleva un conocimiento bastante denso, ¿vale? Yo si queréis una clase, por mi parte no hay problema. Como matemática me encanta explicar muchísimo más de lo que os estoy explicando a vosotros ahora mismo, ¿vale? Pero bueno, también entiendo que a lo mejor no todo el mundo quiera saberlo. Entonces, bueno. El próximo día me comentáis, ¿vale? si queréis una clase de esto que entremos en más profundidad en cada uno de estos análisis o queréis que entremos en menos profundidad, ¿vale? Yo al final me adapto a lo que queráis. Todo este tema de los de matemáticas a mí me priva y es lo que he estudiado bastantes años, así que por mi parte no habría problema. Pero decidme si os interesa, ¿vale? Al respecto y entramos en toda la profundidad que queráis al hacer esto. si no es el caso sobre todo todo el mundo se fija en esto de recuadrado vale, os gustaría una clase, también tenemos vale, perfecto, pues bueno tendréis esa clase que no tendrán los otros grupos porque al final vais dando como más o menos la misma temario, pero intentaré daros una clase de control de hipótesis para ayudaros a la interpretación sin problema, por mi parte no hay problema vale, hoy ya no tenemos más tiempo, pero la próxima clase igual que vamos a hacer ese tipo de predicción con el resultado de la predicción de la rima que en principio también salen estas cosas ¿vale? lo analizamos sin ningún tipo de problema y le damos más hincapié, vosotros esto sí que os digo, si en algún momento queréis más profundidad de algo, haced esto, preguntádmelo porque vamos con una serie de temario que tiene que hacerse más o menos cada semana para que ningún grupo vayáis descolgados a la hora luego de hacer las actividades y el examen pero eso no quiere decir que si en un punto os gusta más información al respecto, no hay ningún tipo de problema, ¿vale? Al menos conmigo, no sé con el resto pero conmigo podéis preguntar todo lo que queráis ¿sí? Espero que sí Vale, pues por hoy esto es todo ¿de acuerdo? Podemos analizar todo lo que queráis, así que si también os interesa otra cosa de lo que hemos visto, aunque la habíamos visto antes pues de tema de covarianzas, de correlaciones queréis que os comente alguna cosita más lo podemos comentar, si queréis también que reduzcamos un poco, vayamos un poco más rápido en la teoría y nos centremos más en la práctica también comentádmelo ¿vale? al final vosotros hacéis la clase, o sea quiero decir yo me adapto a lo que queráis, si queréis más práctica tendréis más práctica, si queréis más teoría tendréis más teoría, ¿de acuerdo? así que esto no os apuréis en comentármelo más práctica, ¿vale? reduzco un poco la cantidad de teoría, igualmente os subiré esto que es más de teoría para que quizá lo leáis y vamos más a la parte práctica sin problema ¿todo el mundo quiere eso? ¿más o menos? sí, vale yo también lo prefiero pero por el punto de vista de que como os digo todos estáis teniendo la parte teórica entonces partimos todos de las mismas diapositivas y hay que explicarlas más o menos igual pero pero bueno, si podemos reducir un poco la parte teórica para andar un poquito más, aunque suba igualmente el powerpoint con toda la parte teórica para tener más tiempo para la práctica, sin problema vale, pues esto sería todo, a partir de la siguiente semana tendremos más tiempo dedicado a ver si, claro, si en teoría no se puede interpretar no digo de quitar toda la teoría, pero dedicar menos tiempo a teoría y ver la teoría aplicada a la práctica que al final creo que es lo que quieres Irina me refiero exacto, un 60-40 intentad hacer, ¿vale? o un 70-30 sobre todo 60-40 pero aplicando la teoría en la parte práctica es decir, que aprendáis la teoría basándonos en la práctica eso os gustaría más, más que ver un powerpoint en el cual simplemente os explico las cosas y no lo veis ¿sí? bueno, pensadlo y el próximo día hacemos una prueba, si nos gusta como ha salido el próximo día, continuamos así y si no nos gusta como ha salido el próximo día continuamos a la vertiente que tiene todo el mundo vale, pues por hoy esto sería todo, al final nos hemos alargado un poquito pero bueno, no pasa nada nos vemos el próximo día, ¿de acuerdo? muchísimas gracias, adiós

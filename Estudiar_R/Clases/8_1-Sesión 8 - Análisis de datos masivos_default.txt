Hola, buenos dias, buenas tardes a todos. Bienvenidos y muchísimas gracias por estar en esta clase en directo. También muchas gracias a aquellos que veis esta clase luego en la grabación. En el día de hoy, ¿qué vamos a ver? Bueno, la clase de hoy en principio durará en torno a una hora y media. Veremos lo que sería la resolución de la actividad número uno y luego continuaremos viendo alguna cosita más de la regresión logística, ¿vale? la idea es que la verdad de la investigación logística ya hemos avanzado bastante ya lo hemos hecho en numerosas ocasiones pero quiero que quede bastante claro de cara a pues un posible en los exámenes os puede caer este tipo de cosas dicho esto os voy a compartir pantalla y comenzaremos con la parte de la actividad número 1 me gustaría saber un poco qué os habéis sentido con la entrega si más menos bien si hay alguna duda, alguna cuestión si no bueno pues Me lo podéis escribir por chat o igualmente lo iremos corrigiendo a día ahora mismo. Entonces, os voy a compartir pantalla. Deberíais ver mi pantalla ya. Entonces, lo primero. Hay que recordar que siempre... Bueno, y perdón porque esta clase sea el viernes. Por motivos personales me es completamente imposible hacerla los jueves, que es cuando vosotros teníais la planificación. por tanto exclusivamente estas semanas la clase es el miércoles, de normal siempre vamos a tener los jueves y eso va a ser así en el resto de días también pero el próximo jueves por motivos personales es mes completamente imposible, este jueves por eso la clase se ha movido al día de hoy. Entonces tendríamos aquí, primero necesitamos las librerías, vamos a jugar con el tema de filtros, vamos a jugar con el tema de los groupies que en una clase os los comenté Entonces siempre os aconsejo que utilicéis esta librería de Plir. La librería de Plir, como ya os he comentado más veces, nos permite ser capaces de hacer filtros o ser capaces de hacer agrupaciones de una manera mucho más cercana al lenguaje que nosotros conocemos. Entonces yo os lo aconsejo que siempre tengáis la librería hecha. Os recuerdo también que si os da algún tipo de problema a la hora de cargar un paquete, si no lo tenéis y esto os da un error y hacéis el install.packages de la librería de Flickr y veis que os da algún problema, como os comenté la anterior vez, tenéis una opción que es descargarlo de Posit. En el caso tanto de R como de RStudios, a la hora de instalar el paquete tenéis algún tipo de problema, en esta página que de nuevo os la voy a compartir ahora, dame cinco segunditos, porque si alguien le da problemas en la sesión anterior, dime. Tengo una duda las librerías de Deployer o Forecast ¿uno las puede activar todas antes y después los códigos escribirlos en cualquier punto o siempre los códigos estar escritos por debajo de la librería? Siempre tuve esa duda No, realmente como se programa bien, lo mejor sería como los tienes aquí, todas las librerías las cargamos antes y luego hacemos todo el código. Esto sería una persona que ya estudia informática o estudia matemáticas en la parte de programación o estudia una carrera más de ciencias en la parte de programación, siempre les van a exigir la parte de librerías arriba, ¿de acuerdo? Y luego el resto del código abajo. Ahora mismo que estáis empezando, sí que es cierto que en este punto creo que es algo que va gradual. Conforme vayáis aprendiendo más, os acabarás sintiendo más cómodo poner las librerías arriba para saber exactamente qué es lo que vais a utilizar, ¿vale? entonces no es algo que le dé tanta importancia porque si empiezo a darle importancia a este tipo de cosas, es empezar probablemente a quitar puntuación y mi objetivo no es ese, mi objetivo es que sepáis programar y sepáis hacer las cosas más que que la programación sea exactamente como lo haría un profesional, porque creo que hay diversas etapas y hay cosas en las que incidiré más y hay cosas en las que no incidiré pero respecto a tu pregunta en el fondo da igual, pero sí que es cierto que se suelen utilizar o se suelen poner por convención o lo que todo el mundo hace es poner las librerías arriba y después comenzar a programar. Lo que pasa es que en esta clase ya es suficiente que estéis aprendiendo a programar como si encima os pensáis decir todo tiene que estar arriba y ahora estás abajo y vuelves arriba, sería mucho más lío. ¿He resuelto tu pregunta? Espero que sí. Sí, gracias. Vale, pero bueno, que estas son cosas que si las aprendéis pues muchísimo mejor porque vais a tener una programación mucho más nítida y mucho más profesional, pero, por ejemplo, en esta asignatura no son cosas que os vaya a penalizar, ¿vale? Y si el año, en el siguiente cuatrimestre creo que también os doy una asignatura de programación, pero probablemente ya en Python, tampoco os lo penalizaría, ¿de acuerdo? Porque básicamente no me parece algo tan grave, ¿vale? Como, por ejemplo, que las variables categóricas no me las compartáis con el asfactor. Eso sí me parecería más grave, ¿de acuerdo? entonces si alguien a la hora de hacer las instalaciones de los paquetes tiene algún problema y desea ver el estudio de la página oficial recomiendo que instales no la página oficial como tal pero la que le recubrió que en el seco la de esta de acuerdo y tienen todos los paquetes se pueden instalar porque la versión actual que hay del estudio en algunos paquetes suele dar algún tipo de problemas Entonces, cuando estáis aquí, es una compañía que lo que hace es todo software, tiene también una parte de resto de pago que en verdad yo no tengo, nunca la he utilizado, pero la verdad que está bastante... ¿Se está cortando, Laura? Se le escucha un poco entrecortado. Está cortando. ¿mejor? ¿ahora mejor o peor? ahora un poquito mejor bueno, tengo 200 200 micrófonos o sea que si, micrófonos no funciona de mi casa creo que hay de todo pero micrófonos hay un montón con lo cual no os preocupéis por este tema Lo que os comento, aquí en el RStudio tenéis esta opción de Open Source Edition, que es la gratuita. Aquí lo que tenéis que hacer es descargaros el desktop y el R. Si os descargáis el desktop y el R de aquí, os va a funcionar bien. De hecho, lo tenéis aquí. instaláis primero R, luego instaláis RStudio esto para las personas que los paquetes que utilicemos le den error al instalar porque sí que es cierto que el antiguo RStudio funcionaba muy bien el nuevo RStudio versión original en algunos momentos da algún problema entonces os lo voy a poner por aquí eso lo comenté también en la clase anterior pero si alguno veis que utilizamos un paquete hacéis la instalación y veis que no funciona que os da un error de instalación mirad a ver si descargando esta versión os funciona mejor, porque está más depurada y da bastantes menos problemas que el RStudio original lo cual es un poco irónico pero es la realidad haremos gráficas, no se pedía explícitamente que hubiesen gráficas en el ejercicio, si no recuerdo mal ahora veremos el ejercicio, pero bueno, os voy a completar un poco con tema de gráficas, para que también sepamos hacer más cosas y luego el forecast para poder hacer algún tipo de predicción. Entonces, vamos a leer un poco el ejercicio que teníais que hacer. ¿Qué nos decía? Nos daba un conjunto de datos, ¿de acuerdo? Que teníamos en Kaggle. Aquí podéis entrar y podéis descargar el fichero. Bueno, si alguien tiene alguna duda de algún punto que diga, por favor que me lo comente y voy más despacio, si es necesario. En este caso, sobre distintos tipos de aguacate. lo de hoy se va a partir en la resolución de la actividad y después en principio debemos la actividad y luego sí que es cierto que tendríamos que hacer la división en conjunto de entrenamiento y conjunto de testeo que ya la tenemos hecha porque ya lo hemos practicado entonces sí me gustaría haceros una regresión logística o al menos explicados algún tipo de resultado más de la regresión logística para ya la siguiente semana comenzar por árboles pero que quede todo muy muy claro de la regresión logística. Entonces veamos cuánto tiempo nos da hacer todo y espero que demos a todo. Pero bueno, también me interesa aprovechar para enseñaros a hacer gráficos, a enseñaros a hacer otras cosas, no simplemente resolver la actividad, sino aprovechar la actividad para enseñaros a hacer alguna otra cosita más, que no sea dentro del temario establecido por la UNIR. Perfecto, Rosara, muchas gracias. Nada. Vale, entonces, aquí tenéis que descargar el fichero de Kaggle, que era un archivo que podéis luego cargar y después tendríamos que la información sobre este dataset venía siendo sobre los aguacates en Estados Unidos y tenía pues este tipo de variables que eran las variables que lo caracterizaban, pues la fecha, el precio que era por unidad, el total del volumen de ventas, el código de los productos que vendría siendo el identificador que ponemos, el formato de ventas, ser orgánico convencional, el año y el lugar de ventas. Entonces, lo primero que nos pregunta es, ¿qué tipo de variables se compone en mi base de datos? Y realizo un análisis exploratorio de las variables numéricas. ¿Qué conclusiones se pueden extraer de la muestra de datos? Esto es lo primero que queríamos hacer. Entonces, ¿cómo lo hacemos? Lo que vamos a utilizar es, primero leemos el fichero, ¿de acuerdo? Leemos el fichero, es un archivo CSV, por lo tanto ponemos un read.csv. Una pregunta. el as punto factor vale por defecto hay veces que las cadenas de caracteres o lo que sea todas las frases no se convierte directamente a factores y no siempre nos interesan porque no siempre vamos a hacer o vamos a trabajar con factores entonces en este sentido pongo el string factor pero si lo elimináis igual de bien ya no habría ningún tipo de problema yo sí que tengo costumbre porque me Me gusta que todo cargue como texto y luego el texto, las columnas que yo quiera, me gusta que carguen como factores, ¿vale? Pero ya lo haré yo posteriormente ese paso. Es más que nada, pues, es lo habitual. Pero que todo cargue como texto se refiere a los strings, a las columnas de strings, ¿verdad? Más no a las columnas numéricas. Exactamente. Solo las columnas de strings, las columnas de tipo texto, ¿vale? Por eso dices, oye, aquí lo que estás diciendo es, quiero que me considere todas las columnas de strings como un factor. Yo le digo que no, ¿vale? Por si acaso, porque luego quiero, en caso de que yo vaya a hacer algún tipo de proyecto, lo quiero hacer yo después pasarlo a las factors, pero no quiero que me lo pase. Pero si lo quitáis, nos funciona igual, ¿eh? Esto es simplemente que a mí, por mi experiencia, prefiero utilizar el string as factors, pero no es necesario hasta, o sea, perdón, pero no es estrictamente necesario utilizarlo, ¿vale? entonces cargáis los el fichero y yo siempre recomiendo hacer un view abocado para ver un poquito el tipo de datos que tenemos vale tenemos aquí lo que sería la fecha tendríamos el precio medio tendríamos el total volumen total de ventas el tema de los identificativos de los tipos de tipo vale que lo teníamos aquí que era el coto producto y recordemos que aquí lo teníamos lo pongo al final lo que son cada una de las de las columnas nos lo ha comentado es un código de producto que lo tenemos que serían estas estas cantidades vale luego tendríamos el total bucks de acuerdo pues si son bolsas grandes bolsas pequeñas cuántas cuántos paquetes realmente se han hecho vale el tipo de aguacate el año y la geografía o el lugar vale entonces en este punto queremos saber además qué tipo de columnas existen. Es cierto que lo podemos saber simplemente mirando esta tabla y diciendo, bueno, pues esto es de tipo numérico con decimales, esto es numérico con decimales, numérico con decimales, numérico con decimales, numérico con decimales, hasta el tipo que digamos que sería ya la que podemos considerar como texto. Entonces, en este caso, lo podéis hacer así o podéis haber hecho un string y un str de nuestro dataset abocado. Entonces, si buscábamos un str de nuestro dataset abocado, ya nos habría dado esto, que la fecha es de tipo texto, aunque nosotros veamos que es una fecha internamente, él lo está considerando como un texto, que el precio es de tipo numérico con decimal, vemos que todo es numérico con decimales. luego el tipo vuelve a ser texto, el año vuelve a ser entero y la geografía vuelve a ser un tipo texto. ¿Entero por qué? Porque son números sin decimales. Entonces, lo que tenéis que haber hecho en la primera pregunta, la primera parte que tenéis que haber hecho es ser capaz de identificar qué tipos de columnas tenéis. Más cosas que podemos hacer. Podríamos haber dicho que queremos saber cuántos filas y cuántas columnas tiene, Aunque en realidad ya el propio STR abocado ya nos lo está diciendo, que hay 33.045 observaciones de 13 variables, pero no está mal que lo miremos. Si hacemos la dimensión, tenemos las 33.045 filas y las 13 variables. Incluido, si queréis, lo podéis haber visto en este otro apartado de aquí, las 33.045 observaciones de las 13 variables. ¿Qué más cosas tenemos que hacer cuando vemos un dataset? Cuando vemos un dataset, aparte de todo esto, lo que nos comentaba era no quiero la media, quiero también el mínimo, quiero el valor máximo, es decir, un análisis estadístico de las variables que eran numéricas. Para eso habíamos visto una función, no pongo la flechita, luego solo escribo, que la función era el summary. Summary, en este caso de abocado. Si hacíamos el summary abocado, ¿qué obteníamos? Obteníamos para cada una de las variables, ¿de acuerdo? Ya sea, sobre todo para las variables numéricas, pues el valor mínimo, el primer cuantil, la mediana, la media, el tercer cuantil, el valor máximo. Solo para las numéricas, porque de hecho aquellas que son de tipo texto, como era el caso del tipo, vemos que no me da absolutamente más información que la longitud. Pregunta, ¿el primer cuantil y el tercer cuantil? ¿Cómo de bien lo entendéis? Pregunta. El primer cuantil es el 25% de las observaciones El tercer cuantil es el 75% Lo que equivaldría al cuarto cuantil es del 75 al 100 El tercer cuantil es del 50 al 75 Exacto, ¿vale? Entonces, ¿qué quiere decir que el primer cuantil es 1 con 10? Que el 25% de los datos ha tomado el valor 1 con 10 o menos Muy importante ese de o menos Y el tercer cuantil, como bien has comentado es que el 75% de los datos toma el valor 1,62 o menos. Lo que nos está diciendo es el valor máximo que ha alcanzado ese tercer cuantil, o sea, el 75% de los datos, pero puede tomar valores inferiores. Efectivamente, como bien ha comentado Irina, el 50% de los datos además se encuentra entre el cuantil 1 y el cuantil 3. Y pregunta, ¿escogeríais la mediana o escogeríais la media? Bueno, en este caso no se ve muy bien, Pero si nos vamos a este caso, total volume, ¿escogeríais la mediana o escogeríais la media? Pregunta. La mediana porque tiene outliers, tiene un outlier de 63 millones. Exactamente, ¿vale? Cuando la media es tan diferente de la mediana, es una forma nosotros de entender que existen valores anómalos o valores que se consideran outliers. Por lo tanto, si nosotros vemos que hay una diferencia tan tan grande, para muchísimas cosas yo no voy a utilizar de referencia la media, sino que utilizo la mediana porque la media distorsiona. Si ponemos, por ejemplo, me lo aumento, pero tenemos un grupo de alumnos que todos sacan 6, todos los alumnos sacan 6 y tenemos un alumno que saca un 10, ¿vale? ¿Cuál? Puede ser perfectamente, pero digamos que si todos sacan 6 y si alguien saca un 10 tiene un comportamiento algo más atípico, ¿no? La media, ¿cuánto nos va a ser? Pues nos va a ser más de 6, porque el 10 cuenta. Si nosotros tomamos la mediana, ese 10 no va a contar porque vamos retirando los valores de los extremos, ¿vale? Vamos haciendo subconjuntos. Con esto quiero decir que ante la presencia de outliers, la media se distorsiona, la mediana no. Por lo tanto, como bien habéis comentado, se utiliza la mediana, ¿vale? Vale, pues con esto a priori, a priori, ya tendréis el primer apartado, ¿vale? Porque os preguntaba el tema de las estadísticas, de las métricas y todo el tema de, bueno, si tenemos de una forma, tenemos de otra forma, ¿de acuerdo? Todo el tema de las columnas, ¿vale? Hasta aquí, ¿alguna duda de este primer ejercicio? ¿Alguna cuestión? O de momento todo más o menos bien. Yo, profesora, una consulta. cuando pide el análisis así en general de los datos, es presentar la información y también interpretarla, entiendo, con algún pequeño... Exacto, ¿vale? Sí, sí, sí, aquí no lo estoy haciendo, pero por ejemplo si nos vamos al precio medio, pues ¿qué significa que el precio medio sea 1,35 euros? Pues sí, tendríais un poco que interpretarlo. Hasta aquí es cierto que la mayoría de las cosas no se pueden interpretar muchísimo, ¿vale? A menos que tengas un gran conocimiento del proceso, ¿vale? Entonces, creo recordar que en vuestro caso, en otras asignaturas sí que lo exigimos, que hagan este tipo de análisis posterior, pero creo recordar, bueno, sí que conclusiones se pueden extraer de la muestra de los datos. Pues en este caso, ¿qué conclusión? Es que el precio medio aproximadamente es de 1,35, que en el caso del volumen tenemos valores outliers porque es cierto que la media no coincide con la mediana, pero que de normal estamos vendiendo en torno a un promedio de 129.117 unidades. en el caso de los productos, pues aquí podéis ver el tema de las cantidades que se venden. Te gustaría un poco ir redactando todo esto, ¿vale? Pero tampoco muchísimo. O sea, al final vosotros tenéis esto, está casi todo el ejercicio, por no decir que todo el ejercicio correcto, ¿vale? Pero sí que os aconsejo ir intentando analizar un poquito los datos, ¿vale? Y una consulta más. En el caso de los cuartiles, que entiendo que el primero representa el 25% y el tercero entiendo que es del 50 al 75 me parece 75 es el 75 porque el 50% es la mediana o sea el cuantil 2 que correspondería al 50% es la mediana lo que pasa es que como ya tiene un nombre propio que es mediana no se le llama cuantil 2 pero es la mediana por eso quizá te falta el del medio dime, dime, respecto a eso ¿me querías comentar algo? no Ah, no, no, lo decía, ¿cómo sería en sí la explicación de eso? ¿O todavía no se puede hacer mucho detalle? No, aquí sí que lo podríais decir. ¿Qué querría decir, por ejemplo, la columna, me la invento, la columna es Total Vax, ¿vale? ¿Qué querría decir que el primer cuantil es 9.122? Que del 25% de los datos, ¿de acuerdo? Ordenados, ojo, por la columna, el 25% tiene 9.122 bolsas en total o menos, ¿vale? Siempre el o menos. Es como si vosotros ponéis, para que os hagáis una idea, que a lo mejor visualmente se ve muchísimo mejor. Digamos que esta sería la parte del cero, esta sería la parte del total, que a veces lo representamos como 1, bueno, como 100, si estamos hablando de 75, 25 y 50. Aquí tendríamos el cuantil 1, aquí tendríamos el cuantil 2, que es la mediana, y aquí tendríamos el cuantil 3. Cuando yo digo, vamos a ponerlo con el caso de los números porque casi que creo que se entiende mejor con el tema de los exámenes, creo que se entiende bastante mejor. Entonces, si yo digo que el cuantil 1 de los exámenes es un 5, ¿yo qué estoy diciendo? Que el 25% de mis alumnos ordenados por la puntuación de menor a mayor, el 25% de mis alumnos toman o tienen como nota un 5 o menos. Estoy representando todos estos posibles valores entre el 0 y el 5 y estoy diciendo que mi 25% de los datos, es decir, 25% de los alumnos ordenados de menor a mayor han sacado un 5 o muy importante o menos. si nosotros vamos a la mediana o al 50% lo que estamos diciendo es un poco lo mismo que el punto promedio, imaginemos que esto sea un 7, pues que el punto promedio lo que está justo en el centro sería que han sacado un 7, por lo tanto ¿qué sería el cuantil 2 o la mediana? que el 50% de los alumnos han sacado un 7 o menos Y aquí tendríamos que el cuantil 3 vendría siendo que el 75% de los alumnos han sacado un 8 o menos. Pues lo mismo es aquí, lo que pasa que en vez de con notas pues los tenemos con el tema del precio medio. El 25% de los productos tienen un precio de 1,10 euros o menos. El 50% de los productos cuestan 1,35 euros o menos. Y el tercer cuantía sería que el 75% de los productos cuestan 1,62 euros o menos. ¿Se entiende? Sí, profesora, perfecto. Ya me quedó más claro el cuantía más de las notas. Gracias. Sí, es que al final con el ejemplo de las notas se ve bastante bien todo, así que me alegro, muchísimas gracias a ti. De hecho, profesora, se ve más claro y bueno en el apartado. Si uno hace un boxplot de average price, se ve bien reflejado. Sí, efectivamente. Lo podéis hacer boxplot y podéis hacer diagramas de caja y todo iría también bien, lo podéis mirar. segundo apartado tendríamos filtrar precios de los aguacates nos pedía en este caso para que lo veáis bien que no me lo estoy inventando aquí tengamos extrae de la base de datos el precio de venta es decir el precio de los aguacates orgánicos vendidos en Albany y en Boston es decir vamos a querer hacer filtros vamos a querer quedarnos con los aguacates solo aquellos que el tipo es orgánico y vamos a quedarnos con aquellos en los que la geografía es o bien en Albany o bien en Boston. Y de ahí vamos a querer obtener la variable precio. Aquí se puede hacer de varias formas, se puede hacer en diversos pasos, que probablemente es como lo hayáis hecho. Para que también aprendáis un poco más de esta solución, yo os lo voy a hacer todo en un mismo paso, pero vosotros es normal que lo tengáis hecho en diversos pasos, no hay ningún tipo de problema. Entonces, vamos a poner, por ejemplo, la variable organic prices, donde vamos a guardar el resultado de hacer toda esta base de datos y hacer estos distintos filtros. Y aquí vamos a decirle, yo quiero filtrar el qué, pues lo que se llama abocado, los datos que tengo en abocado. quiero filtrarlos, entonces para eso os he dicho de instalar el depleat, que por cierto Irina quería preguntarte si te ha funcionado si has podido probar el posit, si te había funcionado los paquetes con el posit, si me lo puedes escribir para yo más o menos verlo le agradecería, entonces tendríamos el abocado y queremos hacer el filtro, recordemos que con depleat hacer un filtro es tan sencillo como hacer la palabra filter bastante parecido a nuestro lenguaje habitual y tenemos que pedir por qué columna la vamos a filtrar. La columna que tiene si es orgánico o no es orgánico era la columna de tipo, ¿vale? Esta columna que tenemos aquí. Yo siempre os aconsejo que copiéis y peguéis el caso que queráis porque a veces hay algunos espacios, hay algunas cosas y puede ser un poco más dificultoso. Entonces, la columna tipo y en este caso dos iguales porque el igual en R es con dos iguales y ponemos la palabra orgánico, ¿vale? Esto lo que nos haría es distinguirnos todos los precios, como veis, que son únicamente orgánicos. Ya hemos quitado cualquier tipo de aguacate que no fuese orgánico. Como lo prometido es deudas, voy a enseñar a hacerlo en un único paso, aunque entiendo que vosotros lo habéis hecho en varios pasos, que en realidad es como deberíais hacerlo a menos que ya tuvieses conocimiento. Entonces, puedo hacer filtros de dos o más filtros incluso dentro del mismo filtro, porque también podría haber hecho así y haber hecho otro filtro aquí. Esto también se puede hacer perfectamente o lo podéis hacer de la siguiente forma, que probablemente es la que lo hayáis hecho, organic prices, mayor porcentaje y filtro y filtrar aquí. En este caso os voy a enseñar cómo hacerlo en una única línea para que así también de esta clase vayamos profundizando y complicando un poquito más las cosas. Entonces en este caso aparte yo quiero la geografía porque nos comentaba que tenían que ser única y exclusivamente de dos dedos o bien era de Albany o bien era de Boston. Entonces en nuestro caso que vamos a hacer vamos a decirle que quiero que la geografía sea o Albany o Boston. Podéis hacerlo con el or or y decir que geografía sea igual igual Albany or que geografía sea igual igual a Boston. Yo os voy a dar otra forma, que a mí la verdad es que es la que más me gusta, pero es un poquito más compleja. ¿En qué se basa esta fórmula? Nosotros al final estamos diciendo que queremos comprobar si es una de dos cosas, es decir, tenemos una lista de valores, un conjunto de valores. ¿Qué conjunto tengo? Albany y Boston. Voy a definir un conjunto y voy a decir, oye, esta columna, esta fila, está en Albany o está en Boston. ¿Cómo puedo hacer eso? Pongo el nombre de la columna, porcentaje, in, porcentaje. Ya os digo que no tenéis por qué hacerlo así en la entrega, que probablemente lo hicieseis paso por paso, que es como deberíais haberlo hecho. Yo ahora os estoy poniendo esto para que también aprendamos otra forma de hacerlo un poco más complicada. Pero bueno, que aprendáis algo más de esto, aparte de ver cómo se resuelve la actividad, aprovechemos para profundizar algunos aspectos más. vale entonces y lo que va a hacer es mirar si algo está dentro de algo que se me interesa que la columna geografía de mi fila correspondiente me interesa saber si está entre los valores albani o boston con lo cual voy a hacer una lista y dentro de esta lista voy a poner la palabra albani y la palabra boston nosotros generamos esto de Organic Prices, ¿vale? Y fijaros, aquí ya tenemos solo la columna, bueno, la última columna, fijaros que son todos los orgánicos, esto no ha cambiado, y hemos filtrado por aquellos casos que son Albany y Boston, ¿vale? Bueno, pues desde aquí en principio, perfecto, vamos a continuar. ¿Qué es lo que vamos a hacer ahora? Queremos seleccionar la ciudad, la geografía y calcular las medias en base a esto. Las medias de los precios porque lo que nos pedían al final eran básicamente que calculásemos el precio que tenían en Albany. Pues lo que vamos a hacer es decirle de todas las columnas quiero seleccionar las columnas correspondientes. Aquí de nuevo, vosotros podéis haber hecho otra forma de código, aquí simplemente os estoy enseñando una forma como más rápida de hacerlo, pero se corregirá en base al código que estáis poniendo. Entonces, aquí haríamos el porcentaje, mayor porcentaje, también me interesa que veáis que podéis hacer tantos filtros y tantas cosas como realmente queráis encadenado y seleccionaríamos una serie de columnas. En mi caso probablemente me interese seleccionar por ejemplo lo que sería la geografía, lo que sería el precio y por ejemplo podemos querer seleccionar otra variable como sería la fecha o podemos no querer seleccionarlo como queráis. Entonces, aquí tendríamos en este caso, exactamente, siempre que utilicéis esto, porcentaje, mayor porcentaje, porcentaje, imporcentaje, siempre que utilicéis el porcentaje, mayor porcentaje o porcentaje algo, siempre es por la librería de Blitz. De hecho, aunque no lo veáis, aquí tiene un colorcito, no sé si se distingue muy bien, pero esto está completamente en negro y esto está en un gris que podemos llamarlo un gris marengo o un gris claro. Entonces, estos simbolitos son únicos y exclusivamente porque aquí tenemos la librería de Plit, que por cierto no he acabado de escribirlo aquí. En caso de que lo necesitéis tendréis que instalarla. ¿vale? profesora, un amigo que es programador me dijo que esos símbolos lo interpreta como den o luego de, es como si dijese exactamente selecciona el cúmulo de los abocados luego filtra por el tipo de orgánicos coma de la geografía luego selecciona así y luego selecciona y así exactamente, ¿vale? o sea yo lo digo, o sea, básicamente se lee como leemos completamente normal y básicamente estás dando los pasos que tienes que ir haciendo para llegar al resultado. Entonces, esto vendría siendo de split, efectivamente. Lo puedes explicar en plan de luego tienes que hacer el filtro, luego tienes que hacer la selección. Pero al final es los pasos que tienes que estás haciendo hasta el momento que sea necesario. Sí, también se puede. Yo sí que es cierto que prefiero hacerlo todo en una línea porque a veces depende de qué lenguaje es de programación. Por ejemplo, en Python, si yo creo una línea y continúa aquí, por defecto es una línea completamente nueva que no tiene nada que ver con lo de arriba. Si vosotros trabajáis en Visual Basic, en cambio, si yo, por ejemplo, giro, también es una línea completamente diferente, a menos que yo aquí le ponga una barra baja y luego continúe abajo. Entonces, a mí particularmente, que trabajo con Visual Basic, Python, R, Matemática, Matlab y algún idioma de programación más, estoy acostumbrada a ponerlo todo en otra línea porque hay veces que digo, estoy trabajando en Python y digo, vale, tengo que poner la siguiente línea, no la puedo poner hacia abajo. Luego otras veces digo, no, es que estoy en R y sí que la puedo poner. Luego otras veces estoy en Visual Basic y digo, oye, espera, que se me ha olvidado la barra baja para pasarlo abajo. Entonces, al final depende del lenguaje de programación que utilices, ¿vale? Yo sí que siento que prefiero todo en una línea para... Hay como hacer salto de línea, ¿verdad? Si lo ponen en corchetes. Exacto Entonces, básicamente es dependiendo de las personas de hecho, si por ejemplo tenéis texto perdón, que se me va ahora la grafía con Python, pero en Python si tenéis por ejemplo tres comillas y tres comillas tres comillas esto ya es Python, vosotros podéis escribir aquí, podéis escribir abajo, y en el resto funciona igual, y veis que siempre está en verde siempre me lo está considerando como texto a pesar de que yo haga líneas aparte. En el caso, por ejemplo, de que tenga una única comilla, que probablemente funcione exactamente igual, si yo continúo aquí, perdón, y no la cierro, y continúo aquí, por ejemplo, RStudio sí me lo detecta bien. Pero, por ejemplo, en el caso de Python, esto sería un error, porque dice, no, es que tienes un texto que no me lo has cerrado. Entonces, te suele dar un tipo de error. Entonces, por eso yo procuro, como trabajo con tantos lenguajes, no intentar modificar o intentar que más o menos todos me sigan siendo la misma lógica pero por un tema de comodidad mía más que nada o sea que a vosotros si lo podéis hacer y aquí podéis seleccionar también si queréis pues todo el tema por ejemplo de las columnas que queráis pues en este caso podéis decir pues quiero la columna geógrafa y también quiero por ejemplo la columna average lo tenéis así y si veis aquí tendréis las dos columnas que habéis seleccionado. Únicamente esas dos columnas porque ya le hemos dicho que quiero esas dos columnas. Esta sería una forma. Luego haciendo aquí evidentemente el sumarize de la media. ¿Cómo probablemente lo hayáis hecho vosotros? Probablemente no lo hayáis hecho tal que así. Una cosa que por cierto tampoco hemos visto y que sí que creo que puede ser interesante es la función hit. Cuando nosotros utilizamos la función head, si alguien ha estudiado Python, sabrá que la función head se utiliza también muchísimo y lo que hace es mostrarnos las 5 primeras líneas. Si nosotros vamos aquí, veis que son las 5 primeras líneas por defecto. Es una función que es bastante útil para ver cómo vais en cuanto al proyecto. De acuerdo. Ahora bien, vamos a ver qué más nos pedía. Tendríamos que, bueno, este es el precio de venta, la variable de los aguacates orgánicos vendidos en Albany y Boston. Pues no nos piden hacer todavía ninguna media, nos lo pedirá después, pero aquí tendrías la variable, tanto para Albany como para Boston. Sí, dime. es que estuve leyendo después lo que usted hizo y dije, oh, creo que lo hice mal porque yo lo saqué por separado, así como los precios de Albany y Organicus y los precios de Boston no pasa nada no pasa nada porque luego lo separo yo está bien ¿vale? sí, sí, sí porque es lo que os comentaba, yo ahora mismo os lo he sacado todo junto porque quiero que aparte en esta solución vosotros aprendáis a cositas más y no habíamos visto filtros con el IN, no habíamos visto el tema del GED, entonces que no sea simplemente resolver la actividad, sino que aparte podáis tener alguna cosa más o podamos indagar un poquito más en las cosas que ya hemos visto, ¿vale? Pero es completamente normal que vosotros hayáis hecho las cosas por separado, ¿vale? O sea que no hay ningún tipo de problema. ¿Me importa si le comparto mi código por chat? Claro, sin problema. Ahí está. Perfecto. Vale. Habéis hecho un subconjunto perfecto, donde tenemos el tipo es orgánico y la geografía es Albany perfecto, y luego utilizabas el Average Price vale, lo seleccionabas, vale, lo hacías como una lista de datos y luego otra lista de datos en lugar de como una tabla bueno, igualmente la sacas aquí luego sí que sé de cuando se hagan las notas espero poder corregirlas, de acuerdo, o sea, poder echarles yo también un vistazo para ver un poquito y tal, porque al final tenéis un profesor corrector diferente, pero a priori para mi gusto estaría bien. Te apunto el nombre para ver efectivamente que te lo hayan corregido como bien. Porque al final el ejercicio no pedía el cómo hacerlo. Dime. Si le va a filtrar los aguacates directo por Albany Boston, una sola línea, solo pidiéndole eso, ¿iría abocado porcentaje y porcentaje directo? Porque le veo que ahí cuando le filtra antes de eso tiene entre los paréntesis afuera tiene el porcentaje mayor porcentaje. ¿Dónde exactamente? ¿Aquí? Si el porcentaje y porcentaje en Albany Boston. Si le va a hacer solo ese filtro, solo ese filtro, ¿quedaría exactamente igual acá o tiene que ir dentro de este comando de porcentaje mayor porcentaje? Vale, a ver, lo que podrías hacer es replicar esto. Ah, vale, en principio debería ir porque estás dentro del filtro. Lo que sí que podrías hacer es no querer tenerlo dentro de este filtro y sacarlo fuera como otro filtro diferente. Pero a priori sí que debería ir. ¿Cómo quedaría? Si va fuera, tendrías que hacerlo de la siguiente forma lo que haría sería utilizar primero estás dentro del conjunto abocado pues luego tendríamos que poner los corchetes aquí estarías poniendo otra vez la columna que quieres en este caso es la columna de geografía y tendrías que hacer aquí la condición vale pero es bastante más difícil de que te funcione porque porcentaje porcentaje Y un porcentaje probablemente ya no te funcione y tendrías que intentar mirarlo. Otra opción es que sea geografía igual, igual a, en este caso, Albany, ¿vale? Y luego lo unieses, como ha hecho el compañero, la geografía igual, igual a Boston, ¿vale? Y luego los unieses los dos, ¿de acuerdo? Pero sí que es cierto que la palabra filter te permite hacer los filtros de una manera bastante sencilla, como si estuvieses hablando de forma habitual. Y si luego utilizáis Python, sí que es cierto que Python también tiene un filtro que es GeographyIn, ya sin los porcentajes, y pondréis en este caso es con corchetes Albany y Boston. Con lo cual, si lo aprendéis de esta manera y luego trabajáis en Python o trabajáis en R, es mucho más sencillo, ¿de acuerdo? Si lo aprendéis de esta manera, esta manera os va a ser más cómodo para el tema del IN y para luego el tema de Python, que lo veréis probablemente el próximo cuatrimestre. ¿Sí? No sé si me he explicado. O sea, sí que te aconsejo, ¿de acuerdo? Que sea de esta forma, ¿vale? Más que nada por comodidad de que luego vamos a aprender otros idiomas y cuando aprendéis muchos lenguajes de programación, al final es un poco jaleo porque los aprendéis en muy poquito tiempo y con muy poca práctica, o sea, no podemos practicar todo lo que, por ejemplo, a mí me gustaría, ¿vale? Entonces, en este sentido, os aconsejo ir a lo más sencillo de todo o a lo que os vaya a funcionar o lo que sea más o menos parejo para todos los lenguajes de programación. Porque si no, de verdad que se hace bastante complejo el sentido de poder ser capaz de aprender lenguajes de programación en muy poquito tiempo. Porque son muy parecidas las formas, pero a la vez muy distintas. Entonces, tenemos un cierto problema en ese punto. ¿Sí? por ejemplo en Python también se puede hacer esto pero la forma en la que haces el and, el or difiere de si lo haces aquí dentro como un filtro difiere de si luego por ejemplo lo haces en una condición, difiere de un montón de cosas entonces prefiero enseñaros la parte como más o lo más distintivo del lenguaje o lo más fácil para que luego no tengáis que estar pensando, vale, RStudio es así, resulta que es casi clavado como es en Python pero tiene esta cosa completamente diferente ¿vale? vale profesora, una consulta, el select es para seleccionar qué columna necesitamos mostrar ¿no? exactamente y de hecho, si lo que queréis es mostrar por ejemplo, en lugar, el caso contrario queréis eliminar, pondréis un menos delante ¿vale? y eso te permitiría también eliminar columnas, no hemos visto el caso todavía, pero el select en principio solo te selecciona columnas y luego si quieres eliminar alguna columna pondrías un menos delante de la columna que quisieses eliminar y te seleccionaría todo el dataset menos la columna que tú has puesto en menos delante se lee en principio en principio él debería leer en este sentido de hecho es como nosotros más menos estamos haciendo la selección vale entonces normalmente haces el abocado, haces el filtro y luego harías esta otra cosa, pero lo podemos comprobar, ¿vale? ¿Por qué? Porque sé que lo lee primero esto, después esto y después esto, porque si tú haces el select y aquí solo te estás quedando con la columna geografía y la columna precio, luego no te podría hacer el filtro por la columna de tipo Jonathan, porque te diría la columna de tipo no existe, por eso se lee siempre de aquí, empezamos partiendo del dataset, como bien ha dicho el compañero, luego haces el filtro es decir, seguimos haciendo el paso, hacemos el filtro, una vez que hacemos los filtros, hacemos la selección de quedarnos con las columnas. ¿Sí? ¿Claro? Vale, pues entonces continuamos. Ah, vale, todo claro, perfecto. Vale, el siguiente apartado era de que hicieses las matrices de correlaciones y las matrices de covarianza. De hecho, lo tengo por aquí. El siguiente apartado era matriz de correlación, matriz de covariante. Del precio de los aguacates orgánicos, de los aguacates convencionales y del volumen de ventas. entonces vamos a hacer esto ¿qué tendríamos que hacer primero? lo podemos hacer de diversas formas ¿de acuerdo? yo actualmente voy a hacerlo cambiando porque al final estamos pidiendo aquí realmente estamos diciendo los aguacates orgánicos por un lado los aguacates convencionales por otro y el volumen de ventas que se repiten en los dos entonces nosotros lo que voy a hacer ahora es básicamente el apartado 3 que es hacer matrices de covarianza y matrices de correlación. Haríamos las variables que son orgánicas. Dentro de estas variables orgánicas, las variables que son orgánicas que vendrían siendo los aguacates, que son orgánicos. Entonces haríamos nuestro dataset abocado, es decir, nuestro dataset global, porque no me están diciendo que quiera nada filtrado al BANI o con los filtros anteriores. Entonces voy a tomar todo el dataset porque no me dicen lo contrario. y tenemos que aplicar un filtro, en este caso sencillo porque solo va a ser un único filtro que es orgánicos. Pero aparte yo no quiero quedarme con todas las columnas porque no quiero hacer la correlación de todas las columnas que si la habéis hecho no pasa nada, porque al final ya podéis hacer la correlación de todas las columnas y luego vosotros dedicaros a argumentar las de las columnas que nos han preguntado. Pero aquí para que aprendáis un poquito más y aprovechemos la clase también para ser capaces de ver algunas cositas más, podemos hacer un select. ¿Un select de qué? De las columnas que me interesan. En este caso, generalmente, casi siempre, por norma general, si hay una columna de precio, la mayoría de las veces nos interesa, y del volumen total de ventas. Del total volumen. Lo mismo podemos hacerlo para los convencionales. Entonces, copio y pego. En lugar de orgánico, aquí vamos a poner convencional. y aquí pondremos la palabra convencional que como siempre os digo intentad copiarlo, sobre todo cuando hagáis temas de texto muchísimo mejor, pero muchísimo mejor si lo copiáis y pegáis de la propia tabla porque a veces hay caracteres raros hay espacios, hay cosas que os van a dificultar el hacer el filtro ejecutamos esto y para que lo veáis esto, de hecho vamos a hacerlo con el head para que también nos acostumbremos vale, entonces, ¿qué nos dice el head? Sería el precio, fijaros que solo tenemos dos columnas. ¿Por qué solo tenemos dos columnas? Porque hemos hecho el select por las dos columnas. El tipo, ¿por qué no lo estoy seleccionando como variable? Porque básicamente ya estoy prefiltrando que sea todo convencional. Entonces, no voy a mantener una columna que ya es todo lo mismo, ¿vale? Que es todo convencional. Así que aquí vamos a tener el average price y el total volume tanto de la variable de aguacates orgánicos como de la variable de aguacates convencionales y aquí ya podríamos hacer nuestra matriz de corre de nuestro matriz de correlación si vale lo que sea las covarianzas y las correlaciones si alguno de vosotros ha entendido otra cosa del ejercicio como digo en principio se mirará que habéis entendido y se intentará comprobar vale o adaptaros a lo que vosotros hayáis entendido, siempre y cuando esté justificado. Es decir, si alguno me dice, no, es que yo no he hecho esto, sino que he pasado la variable tipo como un factor y he hecho una matriz de correlación de esa variable como factor con la variable de total volume. No hay problema, pero tendría que estar justificado, tendría que estar claro y en principio se analiza conforme ves el ejercicio. ¿vale? Entonces por eso quiero decir que si alguien no lo tiene exactamente igual que yo, que no se preocupe dicho esto, tenemos las variables orgánicas y las variables convencionales vale, hiciste exactamente igual, perfecto no pasa nada, vale pues perfecto, si habéis hecho igual pues increíble, ¿vale? si alguno de vosotros lo ha entendido de otra manera mientras esté justificado intentamos siempre entender las cosas que hacéis, ¿vale? Que es suficiente, que ya estéis aprendiendo a programar, que no es para nada sencillo, ¿de acuerdo? Entonces, matrices de covarianza. ¿Qué haríamos? Pues la matriz de covarianza o el valor de covarianza, si lo queréis poner, por dicho, covarianza. Vamos a poner covarianza 1, ¿vale? O covarianza orgánica, si queréis, y luego hacemos la covarianza de los convencionales, ¿vale? ¿Qué sería la covarianza orgánica? Nosotros tenemos que hacer la palabra COF. En este caso, como ya tengo mis variables aquí asociadas, pues puedo poner COF de mis variables. ¿Que os habéis olvidado hacer los select y habéis sacado de absolutamente todo el valor? Pues poco pasa mucho, con tal de que luego hayáis sabido identificar cuál es el que corresponde a la covarianza respectiva. Entonces aquí tenemos nuestra matriz de covarianza, en este caso muy pequeñita porque la hemos restringido a estas dos columnas, pero si alguien de verdad que se le ha olvidado hacer este select, en principio no debería pasar nada porque con tal de que luego hubiese sabido identificar cuál es exactamente la covarianza que representaría el precio con el volumen, en este caso de los convencionales. convencionales, ¿vale? Perdón, de los orgánicos. He puesto orgánico convencional, ya decía yo que no me sonaba este resultado. Aquí, ¿vale? Cuidado con las variables. ¿De acuerdo? ¿Qué vemos? ¿Vale? Vemos en este caso el total volume, ¿de acuerdo? Que tenemos una correlación negativa, de hecho hay algo que no me acaba de convencer. Hacemos un select para que lo veáis Si hago ese select Y hago el bars.org Como abocado tiene todas las columnas Aquí se mostrarían todas las columnas ¿Vale? Y entonces la matriz de correlación Irían con todas las columnas ¿Sí? Más o menos vale, entonces de la covarianza que por el momento la he confundido con correlación que es lo que solo puede ir entre 0 y 1 vale, covarianza aquí que tendríamos dentro de la covarianza pues podremos ver que existe una covarianza negativa entre el precio y el volumen total ¿qué me está diciendo esta covarianza negativa? lo que me está diciendo es básicamente que cuando aumento el precio disminuye el volumen de compras Es lo que tendríamos que haber dicho, existe una relación negativa entre ambas y si lo mismo hacemos con los convencionales, tenemos lo mismo y simplemente cambiamos aquí, bars.conf y aquí ponemos covarianza.conf. Pues en este caso veremos el siguiente proceso Un poco lo mismo, sobre todo la covarianza Lo que más os tenéis que fijar es en el símbolo, en el signo que viene En este caso de nuevo el precio se relaciona de manera inversa con lo que sería el volumen total ¿Qué es lo que nos tocaría hacer ahora? Os lo pongo así para que podáis ver desde el inicio Luego esto os lo voy haciendo más grande conforme vayamos generando el resultado ¿Qué es lo siguiente que nos preguntaban? Nos preguntaban no solo la covarianza, sino que también nos preguntaban la correlación. Hagamos la correlación. En este caso es básicamente lo mismo. En lugar de cov vamos a utilizar cor. Hacemos aquí cor. Vamos a llamarlo correlación, en este caso de las orgánicas. y lo haréis con cor, ¿vale? Un momento que creo, efectivamente, X debe ser, ¿vale? Porque lo he ejecutado sin el select, ¿vale? Si no, lo que tenéis que hacer es pasar las variables, aunque sea factor para que eso funcione, ¿vale? Si nosotros hacemos la correlación, aquí tendremos un valor. Fijaros, en el caso de la correlación, ¿vale? El tema del average price en este caso sería 1, ¿de acuerdo? ¿Por qué? Porque una columna consigo mismo en la correlación, no necesariamente en la covarianza, pero en la correlación, una columna consigo mismo siempre tiene valor de 1. Entonces, ¿cuál es la relación entre el Average Price y el Average Price? Necesariamente 1. Cuando aumento Average Price, evidentemente estoy aumentando la misma cantidad Average Price porque es la misma columna. Sin embargo, el Average Price con el Total Volume tiene una relación negativa. negativa porque tiene esta relación negativa por lo que comentábamos cuando aumenta el precio disminuir el volumen de ventas o lo que es lo mismo cuando disminuye el volumen perdón cuando aumenta el volumen de ventas disminuirá el precio vale es una relación que es en los dos sentidos que además podemos ver es una correlación fuerte o débil es una correlación en este caso débil porque es muy cercana al cero habíamos comentado que desde el aspecto de la teoría vale desde el respecto de los exámenes, si os salía mayor que 0,5 era una correlación fuerte, positiva, si os salía menor que menos 0,5 estábamos hablando de una correlación fuerte, negativa. Y todo lo que estuviese entre menos 0,5 y 0,5 se consideraba una correlación débil. En este caso, de hecho, es muy muy débil porque la correlación es prácticamente cero. ¿Qué quiere decir que la correlación sea prácticamente cero? Y a lo mejor alguno de vosotros me ha puesto que la correlación son casi independientes. ¿Qué quiere decir que la correlación sea cero? Que realmente no hay ningún tipo de relación o no debería haber ningún tipo de causalidad entre, en este caso, el precio medio y el volumen de ventas. una consulta se puede hacer también no sé qué es lo que efectivamente piden se puede hacer si no tenés el dataset seleccionado con las dos columnas ponele que lo tengas con todas se puede hacer la confianza en la correlación con las columnas simplemente se podría hacer lo que pasa es que tendrás que pasar las variables categóricas a numéricas o a factores, porque si no te va a dar un error. Generalmente, si yo lo hago así, si yo lo hago así y la dejo tal cual así, y luego hago la correlación, te da un error y te dice, ojo, que X debe ser numérico. Entonces tendrías que hacer el cambio, ¿vale? Dime. Yo te decía, si por ejemplo pones ahí que vos le pusiste vars org, pones la columna... Sí, sí, sí serviría exactamente igual Sí, sí, sí, por supuesto pongas aquí, por ejemplo, con el dólar que habíamos visto, ¿no? nombre de dataset, dólar así como abocado dólar, o en este caso sería bus ox, dólar dólar, perdón, ¿dónde está mi dólar? abocado, dólar y pones la columna, ¿no? Sí, sí, sí, se puede se puede hacer perfectamente, siempre y cuando pongas las dos columnas que sean necesarias, evidentemente Pero sí, sí, sí, sería lo mismo. Lo que pasa es que aquí con el select, como ya estamos diciendo que son solo dos columnas, pues ya lo pones. Son dos formas iguales de trabajar. Puedes seleccionar las columnas con el dólar y las vas seleccionando de uno en uno o puedes hacer un select, que también es seleccionarlo de uno en uno, que al final tienes como el dataset ya con las dos columnas prefiltradas y no tienes que hacer el dólar, pero al final son dos caminos que son iguales, o sea, llegan al mismo puerto y son exactamente iguales. Ok, perfecto. un dólar y la columna en este caso del total volume vale y esto en principio debería funcionar porque son dos columnas médicas y tendríais aquí el valor en lugar de salirlo como matriz o sale simplemente el valor pero al final es lo mismo porque la matriz lo que hace es repetir el valor aquí y aquí y acertar el valor de las otras como uno porque son la repetición pero es exactamente lo mismo es si os dais cuenta el valor es calcado el mismo que se ha salido aquí que es con el que hemos analizado. Así que podríais hacerlo así exactamente igual. ¿Alguna duda más a este respecto? De hecho, en clase si me recuerdo mal, lo hicimos de esta forma. El día de hoy también os he enseñado con el SELECT y ya que os he enseñado el SELECT os he dicho, bueno, pues continuamos con el SELECT para que tengáis también más información. Pero las dos cosas son iguales. Yo tengo una duda, profesora. ¿Vale como punto completo? Sí. La duda era por la parte final. Sí. La correlación cuando era menor de 0.05, ¿no? Era débil. Sí, os hago el gráfico. Y respecto a la pregunta de Jonathan, vale como punto completo, tanto si lo dejas en forma de matriz como si lo dejas como un número individual, siempre y cuando lo hayas justificado y hayas dicho si es débil o si es fuerte. Entonces, aquí tenemos nuestra correlación. La relación sí que es cierto que siempre va entre menos 1 y 1. Entonces vamos a poner aquí el menos 1, aquí vamos a poner el 1 y aquí vamos a poner el 0. El 0 es que son independientes. Es decir, no hay ningún tipo de correlación, no hay ningún tipo de relación. Una puede subir, la otra puede bajar, una puede bajar, la otra puede subir o puede bajar de nuevo. Es decir, no hay ningún tipo de relación entre ambas. Cuando estamos en la parte positiva, aquí en la teoría se pone otro valor que es el 0,5. En la teoría, yo digo que en la práctica normalmente es un poquito menos de 0,5. Si la correlación o el coeficiente de correlación está entre 0,5 y 1, estaríamos hablando de una correlación positiva fuerte. ¿Por qué positiva? Porque tenemos que estar en este lado, están los números positivos ¿Y por qué fuerte? Porque es un número bastante grande En este sentido, ¿qué me está diciendo? Que cuando una variable aumenta, o sea, cuando yo aumento por aquí Mi variable también aumenta hacia arriba, ¿vale? La otra variable Con lo cual, al final estamos haciendo una tendencia creciente, ¿vale? Cuando vosotros tenéis entre 0 y 0,5 aquí estaríamos hablando de una correlación positiva, pero en este caso sería una correlación positiva débil. ¿Por qué? Porque tendríamos que, si ponemos a poner el eje, esto generalmente se representa con que tú ves una serie de puntos que no se aproximan a una recta, pero que sí que parece que tienen una cierta tendencia ascendente. Lo que pasa es que es mucho más difusa, mucho más difuminado. y luego tendríamos la otra parte cuando hablamos de los negativos que ocurre que nosotros vamos a definir en lugar del 0.5 estamos en los negativos el menos 0.5 entonces de nuevo lo que está cercano a 0 es bastante débil es independiente así que esta parte sería débil y aquí como tenemos el signo negativo lo único que nos indica este signo negativo es que vamos hacia abajo, vamos decreciendo es decir, si yo aumento una de las variables aumento por ejemplo esta variable en este caso la otra variable va bajando, por lo tanto tenemos una especie de recta, bueno en este caso es la débil, así que sea en puntos que tienen un carácter descendiente eso sería como una representación, sería descendiente, y si nosotros estamos entre menos 0,5 y menos 1, que sería esta parte de aquí tendríamos que sería negativa estamos en los valores negativos y sería fuerte en este caso tendríamos que cuando aumentó una variable la otra disminuiría vale y sería de una forma muy semejante a una línea recta para que lo tengáis también en cuanto a los dibujos que os pueden caer y bueno el débil que el cero que no es completamente independiente el dibujo suele ser que no hay ningún tipo de ningún tipo de relación ni que sube, ni que baja, ni nada de esto. Se queda, no sabríamos decir. ¿Sí? Mejor la parte de... Más entendido ahora el tema de las correlaciones, el menos 0.5, el 0.5. Sí, perfecto, profesora. Justo una duda más del tema. Entonces, cuando es de 0.5 hacia el 1, positivo es fuerte, el inverso sería del menos 1 al 0.5, y cuando nos piden por ejemplo explicar a menos 0.5 hasta el 0 sería que la relación es inversa pero débil, entiendo ¿no? débil exactamente, es débil ¿vale? de hecho aquí está el caso que en este caso que es menos 0.04 no estamos hablando de un menos 0.4 ni un menos 0.3 es menos 0.04, estamos hablando prácticamente de un 0, incluso si alguno de vosotros hubiese puesto que fuese un 0 ¿vale? no estaría del todo mal, porque es un valor que sí que es cierto que es prácticamente independiente, no estamos hablando de simplemente un 0,1, un 0,2, un 0,3, sino que estamos hablando de un 0,0, ¿vale? Entonces aquí sería muy muy débil, ¿vale? Porque estaríamos aquí, aquí casi tocando con el 0 y esta zona es prácticamente, si no independiente, una correlación muy muy, muy débil. ¿Sí? ¿Se entiende? Cuanto más cercano a cero, más débil. Y cuanto más alejado de cero y más cercano a uno o a menos uno, más fuerte. ¿Se entiende? En el caso de positivo o negativo, simplemente sería si está en el cero y cero punto. Positivo y débil. Negativo y débil. Exactamente. Para el positivo y negativo, solo miráis el signo. Si tenéis ese signo puesto, es negativo. Ya está. Y el negativo lo que te indica es que cuando aumenta una variable disminuye la otra. El positivo que te indica es que cuando aumenta una variable aumenta la otra. ¿Sí? Entonces, por más, tranquilidad con la primera entrega. O sea, ya veréis las notas y tranquilidad en este sentido. ¿De acuerdo? Que estáis empezando, así que tranquilidad por esto. Pero sí, buenas preguntas todas. ¿De acuerdo? Entonces, correlación, evidentemente para las convencionales, pues más de lo mismo para que os quede también de las convencionales como lo habíamos hecho con el select lo voy a hacer aquí con las convencionales para que si os quede una de cada una vale y así cuando suba este documento tengáis las dos opciones vale la correlación en este caso con las convencionales es en forma de matriz y de nuevo vuelve a ser negativo así que excepto que si os fijáis aquí me salen menos 0,09 aquí me salen menos 0,04 estamos hablando de que ésta sería quizá un peli más fuerte que esta, pero realmente las dos son prácticamente cero. Básicamente lo que nos viene a decir es que es una correlación muy, muy débil y que es prácticamente nula, ¿vale? O sea, que realmente parecen más independientes que otra cosa. Sí. Vale, entonces, siguiente. Lo siguiente que nos preguntaban, bueno, aquí podemos hacer más cosas, ¿eh? Podemos hacer gráficos, si queréis, de correlaciones, si queréis hacemos gráficos de correlaciones, lo que vosotros queráis. por mí es bien, pero si preferís que aprovechemos y hagamos gráficos y así aprovechamos también y vemos un poco cómo se grafica, yo ahora mismo os hago gráficos vale, perfecto entonces vamos a hacer gráficos, para gráficos yo aquí he utilizado una librería que se llama ggplot2 en este caso, de nuevo, si os da errores, porque tendréis que instalarlo si os da errores, ggplot2 os aconsejo post it para que lo volváis a hacer porque sí que es cierto que por ejemplo yo empecé a descargar las cosas por Posit porque el gplot2 desde la versión oficial del reestudio me daba problemas entonces recordad que os he puesto en el chat, lo vuelvo a poner por si acaso alguien se unió un poco más tarde en la consulta con el Posit, para que lo podáis descargar que con esta versión funciona todo entonces os lo acabo de volver a pasar, por si acaso alguien al instalarlo tiene algún tipo de error aquí no sé si Irina está, porque no sé si te funcionó el post-it con RStudio, si has podido probarlo si no has podido probarlo porque sé que a ti te dio un error al hacer una instalación Sí, funcionó muchas gracias Funcionó, ¿no? Con esta no tuviste ningún tipo de problema Perfecto, perfecto Vale, entonces os lo aconsejo, porque sí que es cierto que la versión de RStudio, por algún motivo que no entiendo y la verdad nunca llegaré a comprender porque al final es la versión original, parece que tienen algún tipo de problemas con algunos paquetes, ¿vale? Entonces, si utilizáis la versión de Posit, yo es la que utilizo y a día de hoy no tengo ningún tipo de problema con ninguna instalación de absolutamente nada que quiera, ¿vale? Entonces me funciona. Es un RStudio igual, lo que pasa que, bueno, pasa, digamos, que los filtros de verificación de otra empresa que ha hecho que todo funcione a las mil maravillas. Vamos a hacer un diagrama de dispersión. ¿Qué es un diagrama de dispersión? Es un diagrama que generalmente utilizamos para representar como puntos los valores que hay en dos columnas diferentes. En este caso, este tema de los puntos, lo que tendríamos es que en función de cómo se representen podremos ver si es una correlación débil, si son independientes o si no hay ningún tipo de correlación. Entonces para representarlos con ggplot2, aunque la librería se llame ggplot2 para utilizar la función va a ser simplemente ggplot. Ahora dentro de ggplot es un poco complicado cómo funciona. Os lo voy a explicar paso por paso, puntito por puntito porque creo que se entiende bastante mejor. pero es como que vamos formando el gráfico a partes. Primero formaremos lo que serían los ejes, después vamos a añadir los puntos, después añadimos las líneas que queramos, pero vamos a hacerlo por pasos. No es que directamente, como otros lenguajes de programación, como puede ser Python, automáticamente me salga el gráfico y ya está. Entonces, ¿aquí qué vamos a decir? Vamos a decir que quiero mis variables, por ejemplo, orgánicas, que es lo que actualmente estamos mirando, y lo que vamos a querer es hacer unos ejes. ¿De qué van a ser los ejes? Tengo que decirle que va a ser mi x y que va a ser mi y. Mi x, ¿qué va a ser? Quiero que en el eje de las x me aparezca el volumen total, por ejemplo. podéis hacer también el precio, no hay ningún tipo de problema y en el eje de las sillas yo quiero representar el precio medio, average price perdón, que si lo escribo mal dará un error cuando nosotros mostramos esto fijaros que lo único que me ha hecho es generarme el dibujo o sea, generarme los ejes, pero no me ha representado ningún punto ¿qué tenemos que hacer ahora? decirle, oye, quiero que me representes los puntos pues nada, y un point y con esto representamos los puntos geométricos. Nosotros hacemos esto de aquí. Fijaros que tendríamos los puntos geométricos que son la representación, es decir, para este valor resulta que el precio es este. Hay uno que se vea bien, creo que este se ve, por cierto, lo podéis hacer más grande sin ningún tipo de problema y lo tendréis aquí en grande. Por ejemplo, si vamos a este, pues veremos que el precio es aproximadamente 2, aproximadamente 2, para el valor del total volume estamos un poquito menos de los 500.000. Entonces esta sería una opción de representación de un diagrama de dispersión. Como veis, aunque la dispersión en este caso nos daba menos 0,046, si os dais cuenta no sabríamos decir si realmente está aumentando o está disminuyendo. Sí que es cierto que aquí sí que parece que disminuye un poco, pero realmente no somos capaces de distinguirlo ¿Por qué? Porque tenemos una correlación que es muy débil, lo que os comentaba antes. Si fuese una correlación muy fuerte, no tendríamos puntos que bajasen. Y veríamos claramente esta relación. En este caso no, porque tenemos una correlación muy débil. Dicho esto, vamos a añadir más cosas. Vamos a poner más cosas. ¿Qué podemos poner? Podemos decir que aparte voy a querer tener una línea. Una línea que sea la línea de regresión. Recordad que habíamos visto el modelo de regresión, que era el modelo LM. Podemos hacer eso también. Podemos decir que yo quiero que me represente la línea que debería ser mi regresión. entonces esto como lo podemos hacer se hace con una función que se llama geom, bueno veis que si pongo geom me sale un montón de cosas, que si quiero el área, que si quiero un gráfico de barras que si quiero un gráfico boxplot que si quiero columnas, contores curvas, densidades me pone todos los gráficos que yo puedo hacer en este caso lo que quiero es el geom smooth vale, cuando utilizamos el geom smooth, de acuerdo tenemos que decirle cuál es el método por el cual yo quiero aproximar en este caso esa línea recta. Voy a decir que quiero aproximar estos puntos por el método de la regresión lineal, el LM. Recordad que cuando utilizábamos la regresión lineal hacíamos un LM y entre paréntesis poníamos las variables que queremos. Pues aquí simplemente estamos diciendo el nombre del modelo, que en este caso es con comillas porque tenemos que es el nombre. Y podemos además definir que lo queremos en un determinado color. Vamos a coger un color que resalte bastante, como podría ser, por ejemplo, el caso del azul. Entonces nosotros lo hacemos y fijaros, él ya me ha dado la línea de regresión que en teoría serviría, con incluso el intervalo de confianza. ¿Os acordáis que en un momento me preguntaste el intervalo de confianza que era? Aquí está representado este intervalo de confianza por esta rayita, es un azul más clarito y básicamente te está diciendo, no, mi recta te dice que debería ser este punto, pero realmente puede estar entre este apartado o este otro de aquí. Es decir, que tenemos una cierta confianza en el producto. Lo siguiente que os tenéis que fijar es que no tenemos título. ¿Podemos añadir título? Podemos añadir título. ¿Qué tendremos que hacer? Tendremos que hacer una suma. Y en este caso, los títulos no se van a llamar geom algo, sino que los títulos se llaman labs. En Python también se llaman labs. Se llama xlab e ylab. En este caso, la forma es distinta, pero es parecido. Tenemos el título. Que podemos poner, por ejemplo, relación entre volumen y precio. Entonces, aquí lo tenéis. Voy a eliminaros esas flechitas que os están molestando el dibujo. Pero aquí ya veríamos el tema del título. Entonces, esto es una forma de hacer gráficos, en este caso, con ggplot y con este tema de la regresión, de todo el tema de la correlación. ¿Qué lo queremos hacer con las variables convencionales? más de lo mismo, de hecho para que lo veáis, lo voy a copiar y pegar, lo pongo aquí, lo pongo aquí y veréis que es lo mismo, el gráfico es diferente. Sí, al gráfico, esta parte de relación entre volumen y precio, sí, sí, al gráfico, al gráfico porque ponemos título, aquí tenéis muchas más opciones dentro de Labs para cambiar los nombres a lo que queráis. En este caso, como veis, también tenemos una nube de puntos muy rara entre 0 y 2 elevado a 0,7, que esto vendría siendo notación científica. O sea, sería prácticamente, si no estoy haciéndolo mal, 20 millones. Entre 0 y 20 millones es como esta vorágine de puntos que no se sabe qué pasa. Pero sí que es cierto que en la segunda parte sí que parece una tendencia un poco más clara que la anterior a descendente. Pero sigue siendo como una especie de baterrullo de puntos en los que no se ve del todo claro la tendencia. De acuerdo, hasta aquí. Todo entendido, aprovechado también para enseñaros cómo se hacen ya en la masa de dispersión, porque ya que hacemos una actividad que no sea repetir lo que ya habéis hecho, sino que podéis aprender alguna cosita más que lo que tenemos. Hasta aquí, ¿todo bien? ¿Todo correcto? ¿Alguna duda, alguna cuestión? Veo que todo bien. Vale, pues vamos a la siguiente apartado que nos decía determina la posible relación existente entre dichos precios y su volumen de ventas. De momento vamos a hacer esto y luego hacemos la parte de los logaritmos. Entonces, ¿qué nos están diciendo? Nos están diciendo relación entre precios, números, volumen de venta, números. No es ni categorías y sí que tenemos datos de los mismos. Entonces, en realidad lo que me están pidiendo es la regresión, que es un poco lo que hemos dibujado ya aquí. vamos a hacer un poco la ecuación de esta línea azul pero básicamente es hacer el modelo de regresión lineal vale entonces qué hacemos hacemos modelo por ejemplo lineal de las variables orgánicas aquí de nuevo lo podéis hacer con el dataset orgánico lo podéis hacer como realmente lo veáis o sea lo podéis hacer así o lo podéis hacer con las columnas de los dólares es exactamente igual vale entonces en este caso pues lo voy a hacer con esto para que tengáis otra vertiente pero porque en clase ya lo hemos hecho mucho pues con lo que serían los nombres de las columnas tal cual vale entonces una regresión lineal en este caso de que pues utilizaríamos del precio y yo quiero calcular el precio en función del volumen podríais decirme puedo calcular el volumen en función del precio se puede calcular pero sí que es cierto que lo que normalmente intentamos saber es más bien el precio que es lo que nosotros podemos decidir que el tema del volumen al final se exponen a una a una empresa el precio es algo que yo puedo decidir el cuánto me van a comprar o no me van a comprar no depende de mí depende del cliente entonces generalmente lo que intentamos predecir es el precio vale porque es lo que yo al final puede un poco ajustar vale entonces tendríamos el average price y lo vamos a hacer en relación al volumen total total volumen tenemos que especificar también los datos en este caso los datos serían mis variables orgánicas y nada lo ejecutaría vamos a ejecutarlo tenemos aquí el modelo vale es un modelo sencillito porque depende de únicamente una variable que me está diciendo me está diciendo aquí ¿Qué me está diciendo? Me está diciendo que tenemos que la fórmula sería 1,62 menos 8,278 por 10 elevado a la menos 0,8. Os lo pongo así porque no se puede poner de otra forma en el escritorio. básicamente sería 0,0 bueno, vamos a copiarlo y pegarlo no ha habido tanta suerte en Python sí que te lo hace aquí serían 8 dígitos hacia atrás entonces si movemos la coma son 7 ceros 1, 2, 3, 4, 5, 6, 7 8, 2, 7, 8 entonces sería esta cantidad de número ¿por qué? por el precio total de ventas esto sería como podríamos nosotros predecir el precio este sería el valor del precio es normal que de un número tan tan tan pequeño porque estamos hablando de cantidades de millones en cuanto a volumen de ventas y los precios es un euro, un euro y medio, dos euros entonces la relación de escala sí que este todo aquí nos va a afectar bastante por eso es normal que el coeficiente sea tan pequeño porque al final no cuesta un aguacate dos millones de euros Entonces hay que tenerlo esto en cuenta, que sale un número tan pequeño por la diferencia de las dos variables. Entonces dentro del summary teníamos la fórmula. Creo recordar que no se os pedía tampoco evaluar cómo de bueno era el modelo. Creo recordar. Nosotros sí que es cierto que hemos visto que podemos hacer las métricas del error absoluto y todo esto, pero aquí en principio no se os pedía. Entonces viene siendo un poco la recta que teníamos antes, que era esta, creo que puedo volver atrás vendría siendo un poco esta línea recta al final es esta línea que nosotros hemos calculado aquí ¿vale? no se os pedía mucho más, aquí lo que sí que podéis decir es en cuanto aumentan una unidad ah bueno, sí, claro, perdón, perdón, perdón que se me ha olvidado hacer el summary de modelo cierto, cierto, cierto ¿vale? ORC que al final es por lo que salen estos valores ¿vale? que lo tenéis aquí de acuerdo, aquí tenemos los coeficientes a ver un momentito si nosotros hacemos este modelo y generamos aquí el modelo te saca la información ya de los coeficientes y si hacemos el summary efectivamente tenemos las métricas en este caso vemos que tenemos un R cuadrado del orden de 0 prácticamente con lo cual no es muy bueno que digamos pero bueno, no se pedía que evaluaseis como de bueno era o como de malo era Era básicamente que si fueseis capaces de aplicar una regresión lineal y que saliese un resultado y fueseis capaces de crear la función, en este caso la línea recta. Aquí lo que podemos decir es que cuando aumento en una unidad el volumen disminuye el precio en 0,000000008278. al final es prácticamente que no disminuye el precio. ¿Por qué? Porque aquí realmente disminuye cuando disminuimos en 10 millones o disminuimos en 10.000 o en 100.000, no cuando disminuimos en una unidad, pero por la diferencia de escalas. Si lo hacemos con el modelo convencional es básicamente lo mismo. Aquí pondríamos el conf en lugar de org Y aquí pondríamos el conf y aquí pondríamos el conf Y lo que sí nos dará es otra recta diferente Nosotros podemos sacar de aquí que es menos 4 En este caso es un 0 más 4199 Y tenéis de precio 1.153 esta sería la recta en este otro caso que vendría siendo esta recta que tenéis aquí de nuevo, ¿por qué un valor tan pequeño? lo mismo que hemos comentado antes por la diferencia de escalas en un punto lo podéis ver aquí, estamos hablando de que la escala está en decenas de millones y nosotros estamos hablando de que el precio son unidades entonces al final por eso sale tan tan pequeño dicho esto También nos preguntaban cómo sería si aplicásemos logaritmos. También lo habíamos visto, os lo había dejado en algunos de los archivos a repasar. Cuando aplicamos logaritmos, pues es aplicar la palabra log. Dime, Víctor. Sí, profesor, una consulta. ¿Cómo indicó que se generaba la fórmula? perfecto, vosotros miráis los coeficientes, que los podéis mirar aquí o los podéis mirar con el summary lo que queráis, de acuerdo deberían coincidir la verdad, sí, coinciden que es este de aquí y este de aquí o lo podéis mirar directamente del modelo vale, sí que es cierto que yo creo que este sobre todo para que no os olvidéis de hacer luego el summary, pero al final me ha pasado a mí lo de olvidarme el summary por hacerlo con el modelo entonces, aquí tienes un valor que es el intercept, que es el valor que va sin nada, es decir, va completamente suelto, este valor te está diciendo que es el 1,62. Entonces tendrías este 1,62, en este caso 0. Recordemos que era la e más 0,0. Es cuántas veces mueves la coma hacia la derecha y rellenas con ceros. Es notación científica. Cuando teníamos el e menos 0,8, ¿qué hacíamos? En lugar de moverlo a la derecha y añadir ceros al final movemos a la izquierda y añadimos ceros al inicio entonces en este caso que te está diciendo te está diciendo que la coma que tú tienes aquí esta coma la mueve es una posición dos posiciones tres posiciones cuatro posiciones y composiciones seis posiciones siete posiciones y ocho posiciones decir la coma la tienes aquí ahora si me permitís la voy a poner arriba porque es que si no no me cabe rellenas el resto con 0 0 0 0 0 0 0 y aquí delante también tiene que haber un 0 porque delante no puede empezar un número con una coma aparte empiezo con una con un 0 vale de ahí te sale este 0 0 0 0 0 0 0 8 2 7 8 vale si aquí tuvieses otro a variable otra variable, aquí tendrías el nombre de esa variable y otro valor, y aquí tendrías el mouse y sería este valor de aquí por el valor que tenga la siguiente variable ¿se entiende Víctor? sería el intercepto más, no disculpa, el intercepto más el otro más el número, ¿no? más el número por el próximo número, entiendo este número, ¿por qué? por el valor que tenga esta columna. Piensa que al final lo que estás haciendo es como decir, vale, yo tengo varias columnas, entonces lo que hago es necesito un número que multiplique la primera columna. Ese número que multiplique al valor que tenga esa primera columna es el menos 8,27. Para que te hagas una idea, creo que se puede entender mejor de esta forma. Un momentito, que elimine estos o garabatos y pongámonos en este caso un momentito de que saque que saque excel es una regresión lineal básicamente es lo siguiente imaginemos que nosotros tenemos aquí el precio y tenemos aquí el volumen y yo te digo cuando el precio es uno el volumen es dos y cuando el precio es tres del volumen es seis vale sería te digo que mi volumen es Si yo te digo ahora que mi volumen es 8, ¿cuánto será mi precio? Sí, exacto. ¿Y cuánto sería el precio? Coméntame. Mejor sería utilizar más variables, efectivamente. Exacto, la mitad Entonces, ¿qué estás haciendo? Realmente estás diciendo que para tú conseguir Este precio Lo que has hecho es el volumen Dividirlo entre 2 Pues 2 a 1 El 6 entre 2 es 3 Y el 8 entre 2 es 4 Entonces, esto Ya es tu regresión O sea, aquí tú ya tienes una regresión que es precio Igual, en este caso a 0,5 por el volumen, que sabemos que 1 entre 2 es 0,5. ¿Qué ocurre? Que la mayoría de las veces no es algo tan perfecto como esto. Normalmente siempre hay un cierto error que no acabamos de cuadrar. Entonces se une lo que sería el intercepto. Imaginemos ahora, si yo os digo que el precio y el volumen, tenemos que, en un caso, si es 2, es 2. si es 6 estamos hablando de 4 y si es 8 estamos hablando de 5, aquí lo veréis claro porque lo que he hecho es sumarle 1 a este precio entonces cuál sería mi recta de regresión sería el 0,5 por el volumen que me daría los datos anteriores pero no llego a ser exactamente el valor que quiero le falta que le falta sumarle un 1, ese 1 sería el intercepto ¿sí? y lo otro, el 0.5 es el coeficiente. Vale, pues cuando nosotros hacemos esta regresión en RStudio, ese 1, ese intercepto, está aquí y lo otro es el valor que multiplicas al valor que tenga en ese momento la columna volumen. En este caso sería el 0.5. Aquí nos ha salido un valor diferente, pero es el mismo. ¿Se entiende ahora mejor? Ok, ok. Entonces sería el intercepto más el valor que encontramos por el número siguiente que vamos a tomar. Exactamente. Si tuvieses más columnas, porque puedes tener más columnas, puedes tener aquí que lo hayas hecho con 30 columnas más, es lo mismo. Vas sumando el valor que te dé por la columna que sea, más el valor que te dé por la columna que sea, más el valor que te dé por la columna que sea. ¿Se entiende? Aquí te he perdido. Aquí te he perdido un poquito. Sí, está bien. Gracias. Simplemente Dime Por supuesto Porque es Ahí estás poniendo el precio En función del volumen Y no el volumen En función del precio Vale En este caso Porque en general Entre precios y volumen Pero yo podía pensar Al final Por ejemplo Si Cuánto me van a comprar O cuánto voy a vender Si bajo o si subo el precio No Cuánto va a ser mi precio Si aumenta la cantidad No entiendo aquí en principio depende de cómo lo enfoquemos ¿vale? pero sí que es cierto que si me lo has hecho de la otra forma, el volumen en función del precio está bien igual ¿eh? no vamos a, en principio esa es la vertiente que yo os doy, pero eso no quiere decir que si tú hagas el volumen en función del precio esté mal porque el enunciado no especificaba efectivamente que tenía que ser precio en función de volumen ¿vale? aquí tienes que pensar qué es lo que más te interesa, a ti te puede interesar, imagínate, vas a poner el precio vas a poner el precio de un activo financiero ¿qué te puede interesar? me puede interesar ver cuánto volumen o sea, cuál sería el precio acorde a la tendencia de volumen que me han hecho las compras y así poder definir que el precio, por ejemplo, al que salgo a mercado o a bolsa pues sea tanto, ¿vale? por ejemplo entonces en este sentido estás más bien entendiendo que tu volumen se va a mantener más o menos constante y lo que quieres ver es, ¿vale? con el volumen que yo he tenido históricamente ¿cuál es el precio recomendado? ¿cuál es el precio óptimo? Que al final es lo que la empresa puede llegar a decir, lo ajusto o lo elevo. Pero la otra vertiente que has comentado también es bien. Es decir, yo puedo decir, bueno, no sé exactamente qué precio voy a hacer, entonces voy a hacer diferentes predicciones, voy fijando precios y voy mirando cuál es el volumen que tenga de compra y al final es el que utilizas. Ambas opciones son válidas y ambas opciones se utilizan, ¿vale? Y para la actividad, en principio, ambas opciones es la misma. Yo os he dado esta, pero al final el tema es que sepáis hacer una recta de regresión, que es lo que vamos buscando aquí en principio. Pero buena pregunta, porque depende de cómo lo enfoques, incluso si somos clientes sí que es un poco más sencillo, porque tiendes a decir, bueno, yo sé más o menos los resultados que ha tenido, quiero predecir cuánto va a subir el precio. Pues esto se podría hacer, aunque generalmente no tenemos los accesos a los resultados, pero de clientes sí que es cierto que normalmente es a este punto. Sí que en la mayoría de los ejercicios o en la mayoría de los cursos de Data Science y de Business Intelligence y todos estos temas de análisis masivo de datos, generalmente si ves una columna de precio y os piden comparar algo, por autonomía se suele utilizar la columna de precio para predecirla. ¿Por qué? Porque es algo que normalmente es lo que siempre utiliza todo el mundo, pero eso no quiere decir que sea la única opción, ¿vale? La opción que comentas también es correcta. Entonces, si quisieras predecir precios, tendría que usar más variables. Efectivamente, ¿vale? O sea, cuantas más variables pongas, siempre y cuando sean variables medianamente relevantes, efectivamente te saldrá un mejor valor de la regresión, ¿vale? En este caso sí que es cierto que el enunciado os pedía que fuesen dos variables determinadas. Vale, estamos por la parte de los logaritmos. Aquí lo que haríamos sería la parte de log. Le haríamos la parte de log. ¿Y en qué cambiaba? Recordáis que aquí lo que cambiaba es que en vez de hablar de sumamos una unidad, sumamos dos unidades, lo que hablábamos era de que aumentamos un 10% la cantidad, ¿vale? Pero al final es lo mismo, el resultado es lo mismo. Lo que pasa es que estos valores, ¿de acuerdo? Serían en base a poner el logaritmo. Tendríamos el término menos 0,03. En este otro caso con los logaritmos que estaríamos hablando que el logaritmo del precio sería igual a que en este caso el término independiente que es 0,583641 menos el logaritmo, perdón, menos 0,03335547 por el logaritmo de qué, por el logaritmo del volumen total. ¿Vale? Y este sería el, ¿por qué? Porque hemos puesto logaritmos, has puesto logaritmos aquí, aquí también tendríamos que aplicar logaritmos a la hora de hacer la regla. ¿Por qué es mucho más pequeño? Porque los logaritmos son como potencias de 10, Entonces ya no estamos trabajando con 10 millones, sino que estamos trabajando con un 7. Perdón, si 10 millones se convertiría en 7, porque lo que hacemos es ver cuál es la potencia de 10 que nos daría 10 millones. Pero bueno, estos son temas de logaritmos exponenciales. Lo que a nosotros nos tiene que importar es que va por porcentaje. Aquí lo que hicimos es cuánto aumentaría un porcentaje si aumento el volumen, por ejemplo, en un 10%. Dicho esto, estos serían los modelos. Y ya lo último que nos quedaría sería la parte del Arima, que era la parte de la predicción de las series temporales. Un momentito, que os lo pongo aquí. Al final hemos rellenado la hora y media, pero viene muy bien porque hemos añadido temas de gráficos y todo este tema. O sea que me parece bien. Aquí tendríamos que hacer una predicción de precio de venta de los aguacates orgánicos vendidos en Albania tres meses. Aquí quizá alguno de vosotros habrá dicho, bueno, claro, yo estoy haciendo aquí una predicción de precio de venta, pero nos añadían lo de los tres meses. Y al añadirnos lo de los tres meses ya no estamos hablando de una regresión lineal, sino que estábamos hablando de hacer una rima. Entonces, ¿qué tenemos que hacer? Primero filtrar a que queremos los aguacates de Albany y únicamente los orgánicos. Y voy a necesitar aplicar las fechas para poder hacer bien la predicción. ¿Qué hacíamos por tanto? Primero vamos a hacer el filtro. Voy a poner por ejemplo Albani avocado y aquí que serán los aguacates, los avocado. En este caso vamos a filtrar. Yo nuevamente filtro con el filter, pero podéis utilizar otras opciones En este caso, a mí me interesa quedarme con aquellos casos en los que viene de Albany el aguacate Por tanto, Geography igual igual Albany Aquí como sólo queremos un caso, no necesitamos hacer el IN ni nada porque ya aquí estaría Y lo podemos filtrar como igual igual orgánicos Lo mismo, si habéis hecho dos filtros aparte, en dos filas apartes, da igual, es correcto. No os preocupéis por estas cosas. Y después aquí tenemos que organizarlo por fechas. Lo que voy a hacer es ordenar las fechas para que sean en orden de menor a mayor. entonces yo lo que voy a hacer es hacer un mayor igual y un orden por fecha si no recuerdo mal la tasa ya venía ordenado pero bueno no viene de más que aprendáis que esto lo que nos hace es ordenarlo por una columna en este caso por la columna de fecha nosotros podemos mirar alba ni hago y vemos que son todos los casos de los aguacates que están en albania en este caso y tendríamos la fecha, el precio medio y todas las columnas porque no hemos hecho ningún tipo de select. ¿Qué es lo que hacíamos ahora? Cuando vimos las series temporales vimos una cosa que eran las TS que vendría siendo las, hacemos una serie temporal de un conjunto de datos. Entonces TS Albany, ¿qué hacemos? Pues en este caso será mi columna, o sea, mis datos de Albany, en este caso abocados y qué vamos a hacer me voy a quedar con únicamente la columna que me interesa aquí me interesa la columna del precio y luego la columna de la frecuencia vale entonces vamos a quedarnos con el average price y aquí tenéis que poner la frecuencia aquí en la frecuencia aunque nos viene a tres meses podéis haber querido hacerlo pues frecuencia mensual podéis haber querido hacer frecuencia anual y luego le vas a ver que tres meses es uno partido por cuatro yo siempre intento pasarlo a lo más pequeño vale y lo más pequeño excepto que sería diario pero es raro que nos piden algo diario entonces lo siguiente de mes yo lo que haría sería pasarlo a semanas los que lo habéis hecho con frecuencia mes bien lo que lo habéis hecho con frecuencia año bien siempre y cuando luego la predicción habéis puesto que fuese año o mes vale esto lo que prefieras entonces en En mi caso lo voy a hacer a semanas, ¿de acuerdo? En un año hay aproximadamente 52 semanas, pero repito, podéis haberlo hecho a la parte que queráis. Ya tenemos nuestra serie temporal que es únicamente el precio y gestionado por las semanas y ahora tenemos que hacer la autoarima, modelauto.arima. Para eso hacíamos la librería de Fork hasta arriba, no se os olvide, y ponemos la serie temporal que sería la TS al BAN. no he puesto la librería forecast un momento no debería haber problema y ahora hacemos la librería autórica una vez que tengamos esto haremos la predicción con la parte de forecast y ya estaría, vale, sí que quiero comentaros tranquilidad con el tema de las entregas y con el tema de las notas porque sí que es cierto que esta semana no, pero la siguiente me las quiero mirar con bastante detalle para comprobar que en efecto se evalúa correctamente, ¿vale? Porque como son profesores distintos, pues para asegurarme. ¿A qué se debía el 52? Al 52 se debía que yo lo hago en semanas, ¿vale? Entonces en un año más o menos hay 50 o en el orden de 52 semanas, ¿vale? Entonces la frecuencia semanal es 52 porque cojo frecuencia semanal y no cojo frecuencia mensual. más que nada por costumbre mía al final siempre intento coger una menos de la que hagáis porque me es mucho más cómodo pero podéis hacerlo con frecuencia mensual que sería 12, podéis hacerlo con frecuencia anual si queréis, podéis hacerlo con frecuencia diaria, lo importante es que cuando hagáis la predicción que es el forecast, sigáis esa misma nomenclatura pero yo puse 52 porque personalmente a mí siempre me ha funcionado mejor el arima con semanal más que con mensual u otra cosa pero es algo mío propio que me gusta así lo que si utilizáis cualquier tipo lo que tenéis que aseguraros es que aquí cuando le digáis exactamente cuál es la predicción que queréis hacer que en mi caso son tres meses claro que yo no pondré tres porque porque no estoy midiendo lo en meses lo estoy midiendo en semanas entonces para mí no son tres lo que serán doce porque en tres meses hay cuatro semanas con lo cual aquí yo no te pondré un 3 si vosotros aquí habéis habéis expuesto una frecuencia mensual aquí sí que pudiese saber puesto un 3 porque estaría es en mensual si vosotros aquí hubiese expuesto una frecuencia anual de 1 pues que tendríais aquí tendríais 1 entre 4 estaríamos hablando de un 0 con 25 si aquí hubiese expuesto un diario de 365 pues aquí sí que es cierto que tenemos un problema tenemos un problema por el tema de realmente si son meses de 30 o de 31 días por eso diario intento alejarme un poquito de ello por este motivo de más que nada Pero bueno, en este caso pongo 12 porque en tres meses hay cuatro semanas y hacemos el forecast de Alvani. Aquí tendríamos nuestros resultados. Aquí lo mismo, este resultado nos da varios valores y esto lo comentamos en clase de seguro. básicamente el valor de la predicción es este valor que os da aquí al es el valor que tenéis que tener en cuenta como que es el precio que nos está prediciendo ahora bien no es el único vale nos da otros valores son los valores de los intervalos de confianza es decir yo sé que el punto que me ha dado es 145 89 pero pero con un 95 por ciento de confianza yo puedo asegurar que se encuentra entre 1,23 y 1,68. Evidentemente, este punto siempre se encuentra entre el valor menor y el valor mayor. Pero es un poco las áreas estas que os comentaba. Estas áreas de aquí, no es lo mismo, porque esto no es una serie temporal, pero son estas áreas que veis aquí como un azul sombreado, es básicamente, sí, mi valor es el azul fijo, ¿vale? Ese es el valor que me está dando la predicción. Pero sabemos que la predicción no es más que un valor probabilístico. entonces cuando nosotros hacemos el intervalo de confianza y seguridad es vale mi valor es 1,46 vale 1,458 1,46 pero pero yo sé que con el 95% de seguridad sé que sí o sí sí sí o sí fijo va a estar entre 1,23 y 1,68 con un 95% de seguridad vale y con un 80% de seguridad es decir bajando la confianza que tengo en mi modelo, con un 80% de seguridad, yo te digo que está entre 1,31 y 1,60. Entonces, lo que hacemos es decir, vale, este es hablar de mi predicción, pero ¿cómo de seguro puedo estar yo de esa predicción? Para eso, te pido los intervalos de confianza que me lo preguntes en su momento y me preguntes el 80 y el 95 que era, ¿vale? Y es básicamente, yo te digo que esta es mi predicción. Ahora, ¿con qué seguridad? No te lo puedo garantizar. Lo que sí que te puedo decir es que con un 95% de seguridad está entre esto y esto y con un 80% de seguridad entre este y este varón. Es para dar una información más de cómo de preciso es la predicción. ¿Sí? ¿Se entiende un poco todo? Más o menos. Por la entrega de verdad que no os preocupéis. ¿Qué dicen 6,88 de la primera columna? Justo. Y en la izquierda. Eso. Esto en principio debería ser la semana, el punto de la semana en el cual estás. Debería ser, pero la verdad te voy a ser completamente honesta, la primera vez que me planteo esto, ¿vale? Generalmente tienes a mirar estos valores de aquí y esto en principio es la semana en la cual estás analizándolo, ¿de acuerdo? y en principio debería ser el día correspondiente pasado a decimal porque no es una semana entera, sino que estás en la semana y viene entrada la siguiente semana. Semana 6 y en el 88, que sería la parte correspondiente al día en el cual estés y la hora en la cual te ha hecho la predicción. Muy buena pregunta en este sentido, pero en principio es eso. Al final piensa que tú estás haciendo unas predicciones, te tienen que decir más o menos en qué valor o qué punto estás mirando, qué punto estás prediciendo. Y en principio esto vendrá, bueno, aquí no lo se verá, pero si hiciésemos la representación lo podríais ver. Sería el primer periodo de entienda, ¿no? Porque son los 12. Sí, sí, sí, exactamente. ¿Alguna duda más? ¿Alguna cuestión más? ¿Alguna pregunta más? ¿Cómo nosotros podríamos asegurarnos que la primera columna está en semanas en la programación? Porque lo que estoy revisando aquí, esta frecuencia es 52. Exactamente, 52 semanas, ¿vale? aquí sí que en este caso tiene que tomar la columna de serie de tiempo, ¿cómo me aseguro que no tome alguna otra columna? porque a veces en la base de datos hay dos columnas una tiempo de entrega otro tiempo de embarque, ¿cómo me aseguro? porque lo ordenas por una columna concreta si por ejemplo yo lo que aquí recomendaría es que si tenéis bastantes columnas de fechas, seleccionéis, hagáis primero un preseleccionar y os quedéis con la columna de fecha, en este caso, la que queráis y el valor. Para que no te pase esto de que tengas varias columnas de fecha y al final no tengas muy claro cuál. Entonces mi opinión es que si te enfrentas con este problema, como en la serie temporal solo vas a utilizar un tipo de fecha, hagas un preselect antes para quedarte con únicamente la columna de fecha que te interesa. y entonces continúas con el proceso ¿sí? Gracias Nada Vale, pues en principio por hoy este sería todo, de nuevo en cuanto a las notas y la entrega que yo sé que las primeras entregas sobre todo de tema de programación es un poco complicado ¿vale? Así que tranquilidad absoluta ¿de acuerdo? Intentaré ir mirándomelas cuando pueda, lamentablemente por temas personales no puedo ni este jueves ni este viernes ¿de acuerdo? Porque para empezar por temas personales no voy a estar en mi casa. Entonces, nada, algo imprevisto. Nada, entonces, intentaré un poco mirarlos porque sí que me gusta mirarlas un poquito para el tema de confiar, sobre todo cuando no soy yo la persona que corrige y hay como dos profesores que corrigen diferente. ¿De acuerdo? Más que nada para que sepáis eso. Entonces sí que si alguien ve que la puntuación no le cuadra cualquier cosa, lo puede comentar por el foro sin problema intentaré mirarlo lo antes posible ¿sí? pues nada, este sería, dime una consulta más, en el caso puntual que hemos visto, como estamos manejando en semanas ya que es lo que usted se ha acostumbrado en tema de frecuencias, si puntualmente nos piden centrarnos en meses es un ejemplo extra, ¿no? la frecuencia sería 12 y el forecast sería 3 ¿entiendes, no? exacto, exactamente muchas gracias Vale, pues nada, por mí un placer de verdad ya os digo, a lo largo de la semana que viene si los temas personales se han arreglado intentaré ir mirando un poquito las calificaciones para tener en cuenta que al final sí que siento que es un poco complicado porque como somos dos profesores que realmente sea en base a lo que hemos visto en clase Yo he pasado igualmente las notas de acuerdo de cómo lo haría yo, con lo cual entiendo que ir alineado a lo que os he comentado, pero igualmente por si acaso por alguna cuestión así que me gustaría revisarlos. Entonces, esto sería todo. Si alguien tiene alguna duda con la calificación o cualquier cosa, lo puede comentar por el foro. Y nos vemos la próxima semana. ¿De acuerdo? Muchísimas gracias. Adiós.

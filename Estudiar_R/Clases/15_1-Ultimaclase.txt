¿Puedo? en que tenéis que fijar muchísimo más. Recordemos en el tema de filtros, tema de creación de columnas y sobre todo regresión logística, clasterización y árbol de decisión. Esas son las cosas que sobre todo tenéis que fijaros. De punto de vista de las series temporales, ya os dije que no entrarían, salvo novedad. En principio, mirárosla muchísimo menos. Y el tema de regresión lineal es probable que lo centremos única y exclusivamente en el punto de regresión logística y árbol de decisión. Entonces, árbol de decisión, regresión logística y clasterización, que también son aquellos que hemos trabajado más, sobre todo en las dos últimas entregas. Así que lo que vamos a hacer es empezar a corregir la entrega número 3, que nos permite hablar también de regresión logística, de árbol de decisión en mucha más profundidad y de clasterización. Y conforme vayamos viendo esta última parte, que es la última parte que nos quedaba para repasar, haremos cualquier duda que surja pues la podremos la podremos detectar vale entonces voy a compartir pantalla de acuerdo aquí estaría la pantalla vale que tengo bastante mensaje buenos días a todos buenas tardes perfecto y entonces vamos a empezar con la actividad número 3 para poder corregir y poder decidir cómo vamos a ir haciendo todo entonces se me ha abierto en esta otra pantalla ya dame cinco segundos aquí lo tenemos y bueno la tía final en la cual vamos a tener regresión logística regresión de decisión y regreso y clasificación lo primero la primera pregunta que nos preguntaban era de qué tipo de variables se componía nuestra base de datos y realizar un análisis descriptivo de las variables de la base de datos aquí jugábamos con un conjunto de datos bastante bastante grande en el cual nos teníamos que quedar con dos hojas lo que voy a hacer es descargar primero esas hojas, haré la comprobación de qué tipo de datos hay con una de las mismas, si por algún caso necesitas escribirse con la otra, sin ningún problema me comentáis y lo hacemos. Aquí, como siempre, podéis decidir hacerlo por código, si no os sentís cómodos hacerlo por código, pues siempre lo que podéis hacer es darle aquí, en este caso es un archivo Excel, por tanto podemos darle a From Excel, esto nos abrirá nuestro conjunto de archivos, y en este caso le tengo aquí tendríamos este dataset, mi opinión cuando tenéis nombres tan tan largos, es decir, cuando al hacer todo esto te genera un nombre tan largo yo siempre os aconsejo de que le cambies el nombre a una cosa más pequeña sobre todo por el tema de que luego no tengáis que estar escribiendo una y otra vez que al final si ponemos la S minúscula de SQL ya no nos lo va a encontrar, entonces lo mejor es poner siempre una palabrita más corta. En cuanto a la hoja, aquí eran dos las que tendríamos que utilizar, la de ST Ventas Totales, que nos lo pedía en la última actividad, que era la parte de series temporales, que como digo, centraros más en regresión logística, árbol de decisión y clasterización. Y la otra que necesitemos era la de VAR Discreta ADQ Bicicletas, si no recuerdo mal. Entonces, empezamos por ST Ventas Totales, yo lo que voy a poner es datos ventas 1 y al otro lo voy a llamar datos bicicleta vale de todas formas el nombre como siempre podéis escoger el que más os interese siempre y cuando copiéis esto vale y lo que veis de este punto si se está corrigiendo la actividad número 3 alejandro y luego cuando entremos en la parte de regresión logística clasificación y árbol de decisión que es lo que nos quedaba sobre todo por ver de cara al examen, pues aprovecharemos este ejercicio para explicarlo desde ahí. Entonces, tenemos nuestro conjunto de datos, sí que es importante que no os olvidéis, si lo hacéis de esa versión, que no os olvidéis por favor de poner las cosas, de copiar y pegar este código. Y lo otro que vamos a hacer, lo podemos hacer igual, si queréis, esto es completamente igual, volvemos a seleccionar el archivo, en este caso para mí de la carpeta descargas podemos seleccionar archivo y en este caso lo voy a llamar datos bicicleta vosotros podéis llamarlo como queráis vale que esto es completamente lo que lo que prefieras vale no se nos olvide copiar el código y no importamos perfecto y ahora sí que es cierto que como ya he puesto aquí el library puedo eliminar este sin ningún tipo de de problema una vez que están cargados los datos veamos que nos pregunta nos preguntaban de qué tipo de variables se componía mi base de datos y realizar un análisis descriptivo de las variables en este caso respecto tanto a estadística descriptiva como a correlación vale que tendríamos que hacer lo primero siempre el str de datos bicicleta esto me va a decir qué tipo de datos tenemos con datos ventas sería lo mismo vale que descubrimos aquí descubrimos que tenemos total amount es una variable numérica de formato general vale bike purchase numérica de formato general tipo texto porque pone chr tipo fecha vale y luego en personas que tenemos vale porque en ningún caso tenemos la int que sería la que son numéricos sin decimales específicamente vale así que sean numéricas con numéricas generales tipo carácter o tipo de texto y luego tipo fecha vale Por lo tanto, con esto ya tendríamos resuelta la actividad número uno, que evidentemente lo ideal sería que vosotros dijeses alguna columna de ejemplo de cada una de las casuísticas. No necesitáis todas porque es un dataset muy grande, pero sí que intentad hacer representativo mínimamente. Próximamente. De acuerdo, siguiente nos preguntaban realizar un análisis de estadística descriptiva. ¿Qué es lo que nos están preguntando con la análisis de estadística descriptiva? Que hagamos el summary en este caso de datos bicicleta. Y con el summary de datos bicicleta pues tendríamos por ejemplo que nos centraríamos en por ejemplo la edad La edad mínima son 40 años, la edad máxima son 110 años Lo cual es un poco raro para cuando estamos hablando de clientes de bicicletas Porque técnicamente una persona de 110 años a priori no se nos antoja como la persona que más compra una bicicleta Pero pensad que aunque sea un caso extraño, un caso que puede ser un outlier no tiene por qué ser algo que no ocurra, porque puede ser simplemente un abuelo que le esté regalando una bicicleta a su nieto, ¿vale? Por ejemplo. Entonces, tendríamos primer cuantil, vendría siendo que el 25% de las personas tienen 50 años o menos. Tendríamos el caso de la mediana, que el 50% de las personas tienen 57 años o menos. el caso de la media que es el valor promedio 58,42 y el caso del tercer cuantil que el 75% de las personas tendrían 66 años o menos. Voy un poco rápido pero si alguien tiene alguna duda sin problema me pregunta y vamos más en profundidad. En este caso yo ya puedo ver que no hay valores nulos porque en el caso de que hubiese valores nulos en las variables numéricas aquí debajo del max me aparecería un NA y me diría cuántos valores nulos hay. De todas formas, siempre está bien que lo comparemos, por tanto, con el colsams, creo que es la forma que se ve luego muchísimo mejor, is.na y en este caso de datos bicicleta, ¿vale? Bueno, creándolo, pues vemos que efectivamente ninguna columna tiene un valor nulo. Dime, Lisseth. Sí, hola, hola a todos, buen día Hola, hola Solo una duda y es más, o sea, como que puede que ya la hayas dicho perdón, si ya la dijiste No te preocupes En el examen entiendo que se va a entregar un documento que es como Word o lo que tú quieras, PDF, para organizar como esos códigos para ejecutar cada una Ese tipo de código, por ejemplo Summary View que uno puede decir en el momento del examen se le olvida uno por los nervios o lo que sea o porque a veces aprenderse tanto este tipo de estilo, no pasa nada o no sé, el summary para esto veo el summary pero puede que se me olvide en el momento del examen, esos son los tipos de variables que van a estar en ese documento para acordarme que con el summary o sea, lo puedo tener como en mis notas, para acordarme que con el summary puedo ver los datos estadísticos Exactamente, tú puedes tener en tus notas que con el summary ves los datos estadísticos efectivamente, ¿vale? Aquí sí que comentaros que el view datos venta, por ejemplo, no es necesario siempre va a ser muchísimo mejor Entiendo que no habría ningún tipo de problema si trabajas mejor con cuarto o R markdown Alejandro ¿vale? No debería haber ningún tipo de problema Lo único que cuando lo adjuntes, que se vea claramente que se puede ejecutar después que cualquier profesor corrector puede ejecutarlo después, ¿vale? porque el cuarto al final también te genera otro tipo de documentos. Lo que quiero comentar es que el VIEW siempre te va a resultar útil, pero no es un código que sea fundamental. Lo que sí que sí tiene que ser el tema de datos venta del RETAX, es decir, la carga de los datos. Todos los códigos que queráis poner con todas las explicaciones que queréis poner, podéis ponerlo en las notas, que se os van a abrir y podréis utilizarla durante el proceso. Y durante el examen tenéis que enviar dos cosas. La primera sería las preguntas se responden en la propia plataforma. Dentro de la plataforma os ponen como una especie de cuadro de texto a rellenar, pero eso es dentro de la propia plataforma. En principio no hay ningún Word ni nada. es donde tengas la pregunta tienes como un espacio para rellenar pero aparte tendréis que adjuntar al final el que el fichero que estéis utilizando de estudio vale pero esto comentamos que lo único que sí que se puede ejecutar porque la historia aquí vale este tipo de bueno lo que vendría siendo la historia no aparece con el remark down per se y si lo pones en formato cuarto que los profesores correctores sí que les gusta como más ejecutarlo por lo tanto si en algún momento no se puede ejecutar tendrías un problema vale no se resuelta las dos espero entiendo que sí perfecto vale entonces tema de valores nulos importante de mi mamá entonces lo que hay que presentar en el examen es directamente nuestro archivo de estudio y ya está y rellenar las preguntas en las casillas que no Perfecto. estés utilizando. Vale, el archivo tal cual, sin tenerlo que exportar con el markdown y historias raras, ¿no? El archivo y punto. Exacto. El archivo como tal. Si no habría ningún tipo de problema, ¿vale? Entonces en la plataforma se responderá con texto nada de capturas del resultado o algo por el estilo. Os recomiendo que sea por texto porque al final, cuando queréis añadir alguna captura o algún tema que sea muy del cuaderno, siempre podéis decir adjuntado o aparece en el archivo adjunto de R, ¿vale? Si queréis, para que quede bien claro al profesor de que, oye, mira el archivo de R que tengo la continuación de esta pregunta, ¿vale? Pero si yo os aconsejo, Paulina, en lo medio de lo posible, el tema de solo texto, en lo que vendría siendo la plataforma como tal, ¿vale? Porque es el primer año que está esta plataforma, entonces, en principio funciona perfecto y se ha probado de diversas maneras, pero por si acaso, ¿vale? profesor, ¿y es igual para los que hacemos exámenes presenciales? Sí, para los que hacéis exámenes presenciales María no sé si era la misma persona la que tenía la mano o no, pero bueno profesor para los que están en exámenes presenciales lo mismo, ¿vale? Tendréis el examen, que en vuestro caso creo que sí se os da en PDF, en el propio PDF tenéis la posibilidad de responder a las preguntas dentro de los huecos que se os indica, ¿de acuerdo? Y luego tendréis que ajuntar exacto, vale, perfecto Luego tendréis que juntar exactamente igual el archivo R. Para nosotros el archivo R es la prueba de que vosotros lo habéis trabajado y para vosotros es la prueba de que si una respuesta está mal, puede ser simplemente porque hayáis hecho una pequeña cosa más mal, pero el resto del código sea correcto o el planteamiento sea correcto. Por eso para nosotros es tan importante tener vuestro archivo R para poder corregiros no en base a resultados, sino en base al planteamiento que hayáis hecho. Entonces, bueno, en principio la plataforma está considerada para esto, ¿vale? Para que dentro de la propia plataforma podáis responder, ¿vale? Lo que se os pregunta. Si por algún caso a alguien no le funcionase la plataforma o no pudiese responder en la plataforma, hacedle un word aparte y lo adjuntáis, ¿vale? Pero esto sería el caso concreto de que la plataforma no funcionara. ¿Sí? ¿Se entiende? En principio, desde hoy ya funciona a todos, pero por si acaso, opciones hay, ¿vale? Sí, es correcto. Tenemos que hacer análisis por ST ventas totales también, ¿vale? Esto lo comentan más los profesores correctores, pero si lo hiciésemos para el caso de datos ventas, sería repetir esto, ¿vale? Y simplemente sustituir por datos ventas aquí, perdonad, simplemente sustituir por datos venta aquí, datos venta aquí y datos venta aquí, lo podemos hacer sin ningún tipo de problema, ¿vale? Entonces tendríamos aquí str datos venta, ¿vale? Veríamos que tendríamos tipo fecha, tipo número con carácter general, tipo texto, ¿vale? Después, ¿por qué es tipo texto? Aquí quizá nos interesa saber por qué es tipo texto, es porque tenemos unas palabras que se llaman null, entonces aunque el resto sea números, nos lo considera como tipo texto porque él dice, hay números mezclados con palabras. ¿Qué es lo más general que puede haber? Tipo texto, ¿vale? Entonces, es simple y llanamente por eso que te lo reconoce como tipo texto, aunque para vosotros la mayoría de los casos sean de tipo número, ¿vale? varias cosas preguntas, ¿la base de datos a trabajar viene en inglés? sí, si no recuerdo mal, sí, pero tenéis la explicación de cada una de las columnas y tenéis la explicación de todo y el examen es en castellano, ¿vale? lo único que viene en inglés sería el tema de los nombres de las columnas y viene bastante explicado qué significa cada una de las cosas, ¿vale? en el examen vendrán varias hojas como en este ejercicio vale, ahora voy En el examen vendrán varias hojas como en este ejercicio, en principio no, ¿de acuerdo? En principio los archivos son de una única hoja, ¿vale? ¿En qué fecha se publican los resultados de los exámenes? Si no recuerdo mal, tenéis los exámenes que comienzan, entonces os habrá de decir mejor coordinación, ¿vale? Pero perdonad un momento, a ver, voy a borrar esto. Vale, tendríamos que creo recordar, pero os hablo de creo recordar, es decir, no es definitivo, coordinación os lo da muchísimo más concreto que fechas son, ¿vale? Pero creo que empezáis examen, puede ser la semana que viene. Confirmadme, por favor. Generalmente suele ser como una semana aproximadamente, ¿vale? 26, 27, 28, 1 aproximadamente para corregir los exámenes, ¿vale? Se suelen disponibilizar las notas entre el 1 y el 2 muy probablemente, ¿vale? Para que ya tengáis la visión de las notas. 3 y 4 suelen ser revisiones, ¿vale? Y el 5 suele probablemente ser la fecha en la que se cierren actas, ¿vale? De todas formas, como os comento, esto lo sabe muchísimo mejor coordinación y lo sabe muchísimo mejor vuestra mentora como tal, ¿vale? Que os podrá concretar muchísimo más el tema de las fechas, ¿vale? Pero bueno, para que os hagáis una idea, para primera semana de marzo muy probablemente ya lo tienes, ¿vale? Entiendo que la actividad de texto la había que hacer en el summary de bar discreta de cubicicleta Porque es el que contiene estas variables que usamos para el análisis Sí, bueno, aquí os lo comentarán muchísimo más los profesores correctores Pero yo también lo entiendo así, ¿de acuerdo? De todas formas, no pasa nada que los hagamos también para datos 20 Y así practicamos y vemos las dos opciones, ¿vale? Entonces, cuando vamos al summary de datos 20 Pues veremos que la primera sí que me calcula la media ¿Por qué? Porque estamos hablando de valores numéricos, pero en el resto, al convertirse en variable de tipo texto por tener esas palabras null, pues aparecería todo como tipo texto. Y si vamos a los nulos, no habría ningún nulo porque no tenemos ninguna celda vacía. Ahora bien, nosotros realmente sabemos que hay una palabra que para el ordenador no es nulo, pero para nosotros sí. Y es que en las series 3, 4 y 5 tenemos esta palabra escrita null, que significa nulo, pero para el ordenador es simplemente una palabra más y por tanto no la detecta. ¿En qué temas debemos centrarnos para el examen? ¿En el nivel de complejidad, descomunicación? Vale, temas que debéis centrarnos para el examen. Súper importante, filtros, saber si hay nulos o no nulos, saber el tema de filtros. Estuvimos jugando con filtros la semana pasada, bastante con filtros, así que esto, por favor, repasadlo muy bien, Catalina. Luego tenemos el tema de crear una columna numérica y lo que veremos ahora a continuación de regresión logística, árbol de decisión y clasterización. Estas cinco cosas como el abecedario, súper bien aprendidas. podemos ver hoy como, vale, perfecto, vamos a la creación de la variable numérica, por ejemplo, creamos una variable numérica de datos bicicleta que de hecho creo que era el siguiente paso que teníamos que hacer, así que lo creamos ah bueno, no, porque está aquí el 1 y 0 vale, no pasa nada, creamos una columna por ejemplo con el género si aparece la palabra F lo vamos a poner como 1 y si aparece la palabra M lo vamos a poner como 0, vale, ¿cómo hacíamos esto? Lo que hacíamos era crear nuestros datos, en este caso datos bicicleta, dólar y el nuevo nombre que le damos a la variable. Por ejemplo, en este caso estaríamos haciendo, por ejemplo, de sexo numérico. Voy a poner sexo num. En este sentido, ¿qué le vamos a añadir aquí? Lo que queremos es hacer una condición. Si es F, entonces añadiremos el valor 1 y si es M o es otra cosa, añadiremos el valor 0. Puede ser IF ELSE. Y vamos a ponerle la condición. El if en inglés es sí. Por tanto, lo que estamos diciendo, si ocurre esto. Vale, dime María. Lo ves de esto, así que si querés, termina ahí y ahora después te pregunto. Perfecto, entonces seleccionaríamos la columna, en este caso datos bicicleta, le vamos a seleccionar la columna que queremos ver, en este caso la columna de sexo, y le vamos a decir si es igual a F, en este caso si es igual a que sea mujer, pues le añadimos un 1, y en caso contrario le añadimos un 0, es decir, para los casos que no sean, le añadimos un 0. Cuando no se llama como tal la variable sexo, se llama probablemente sex, ¿verdad? Gender se llama, perfecto Pues gender Cuidado con eso porque si no os va a dar un error Vale, entonces cuando nosotros vamos a ver ahora datos bicicleta Fijaros que ya tenemos una columna nueva con unos y ceros En este caso lo hemos hecho con F y con M. Os puede tocar hacerlo con sí y no, con yes o no. El yes el 1, el 0 para el no. ¿Se entiende Leticia? Esto es si os pido específicamente crear una columna numérica, ¿vale? En base a esto. De normal, si yo no os pido específicamente que haya que crear esta columna numérica, podéis ponerla en factor, ¿vale? Dime María, no sé si acabo de responderte a tu pregunta. En realidad sí, porque pensé, profe, que habías dicho que era como un paso obligatorio, pero claro, como nosotros elegimos, o sea, determinamos que la variable buy purchase, que es el que tiene si compra o no, es la variable objetivo, entonces no hicimos esto que vos habías dicho, porque no creamos ninguna columna binaria que diga sí o no. Entonces eso, te quería preguntar, pero bueno, ya me respondiste que no es que era obligatorio, sino es algo que preguntó la compañera. Exactamente, este caso, ¿vale? No hace falta que hagáis nada de esto porque ya tenéis el bike purchase como número Por lo tanto no hace falta En el examen es muy probable Muy muy probable que no lo tengáis como número Lo tengáis como un yes o no, ¿vale? Y tengáis que ponerlo como número Por eso coincido mucho aquí Pero si no es un paso obligatorio A menos que os lo pida específicamente como tal ¿Vale? Lo cual es muy probable Por eso lo repasamos Y te puedo hacer una preguntita Claro Es de otra cosa, pero bueno, entiendo que capaz lo... Lo que necesites. Yo tengo una consulta con los filtros. Creo que vos la otra vez habías dicho que no ibas a pedir, o sea, que se cumpla una condición o la otra, es decir, como un OR. Pero yo igualmente lo estuve practicando por las dudas. Por ejemplo, agarré una base de datos de Kaggle, que es la plataforma que vos nos dijiste. Y con un compañero estuvimos haciendo como preguntas ficticias. Y, por ejemplo, una de las preguntas era, cuántas ventas tiene, por ejemplo, amount, o sea, o gasto total 10,000 o que el producto sea tal. Entonces, en estos casos, la idea, lo mejor sería como hacer los filtros por separado y después restar a la sumatoria de todo. Exacto. Tú haces filtro 1, filtro 2, ¿vale? Los sumas. Y luego tienes que quitar aquellos que has contado 2 veces. ¿Cuáles has contado 2 veces? Los que ocurren las 2 cosas a la vez. entonces tienes que hacer el primero el segundo y luego le restas lo que vendría siendo en matemáticas la intersección que es simplemente el filtro 1 y el filtro 2 juntos, lo restas una vez y así los cuentas una única vez existen formas mucho más fácil de hacerlo pero no os va a caer en principio nada que sea o esto o esto y si cae se puede hacer perfectamente con sumas pero en principio van a ser filtros sencillitos, eso sí, puede haber filtros encadenados pero filtros sencillos ¿Vale? Perfecto, excelente. Y una última pregunta de eso. Viste que en los casos que, por ejemplo, que esto, ¿no? Que el gasto total sea igual a 10,000. En ese igual hay que poner 2 veces igual, ¿no? Sí, para comparación siempre se pone 2 veces igual. Si pones un único igual probablemente te dé un error y te recomienda que pongas doble igual. Esto es porque un igual lo asemeja como a la flechita que ponemos de guardar valor. Entonces, como que se hace un poco la cabeza, se hace un poco loco. Exactamente, dice no entiendo me quieres añadir un valor o me quieres comparar, entonces como que se hace un poco ahí sus cositas entonces, sí, son dos iguales para comparar, ¿de acuerdo? Igual que si haces por ejemplo mayor es distinto un mayor estricto que un mayor o igual, ¿vale? Pero bueno, esto es o pones el mayor o pones mayor seguido de un igual menor o menor seguido de un igual ¿vale? Buenas preguntas Si pregunta mayor o igual, ahí igualmente pones mayor o igual, no pones mayor o igual No, mayor o igual una única vez, porque ahí él ya entiende como tienes el mayor de antes, él ya entiende que estás haciendo una comparación Perfecto, excelente, gracias profe Perfecto, no a ti Vale, tenía dos preguntas en el chat Vale, a ver, a ver, a ver Para convertir una variable en factor, debía estar en formato carácter, aún así se tendría que pasar al número Vale, sí, a ver Para hacer los ejercicios podéis dejarlas en factor es decir, de carácter de tipo texto a factor, no hay ningún tipo de problema. El tema es que yo os diga específicamente que quiero una variable numérica con unos y ceros. ¿Vale, Olga? Si yo te digo explícitamente quiero una variable con unos y ceros, es muy probablemente que tengas que coger una variable de las que tú tienes en tu conjunto de datos y en función de si es sí o no, yes o no, o en este caso FOM, crear una variable numérica. Pero si yo no te lo pido explícitamente, lo cual es raro, ¿vale? pues lo puedes hacer como factor. ¿De acuerdo? Importante, yo os lo voy a pedir a lo mejor para una columna. El resto de columnas no tenéis que pasarlas a numérico así, podéis dejarlas como factor, pero la columna que yo os pida específicamente que sea de numérico tiene que aparecer unos y ceros. ¿Vale? Es lo único. El resto, con factor no hay ningún tipo de problema, salvo, no, con factor no hay ningún tipo de problema. ¿Vale? Vale, perfecto. Entonces, dicho esto, continuamos. Ya hemos resuelto, no hemos resuelto porque nos falta la parte de la correlación. Recuerda que la parte de correlación solo se puede hacer si las variables eran de tipo numérico. Entonces, para esto lo que era más fácil era utilizar la librería de Plir. perdonad que siempre me confundo con instalación y no instalación y pongo comillas y no comillas vale vale dentro de la librería de plin nos vamos a seleccionar con las variables numéricas en este caso datos bicicleta no lo estoy haciendo rápido de aquellos que hayáis decidido pasarlo a factor y de facto pasarlo numérico todas las columnas perfectos sin ningún tipo de problemas vale pero para que no esté tiempo hacer todo prefiero ir un poco más rápido aunque si tenéis dudas me lo comentáis vale Entonces, como ya he puesto la librería de Plir, lo bueno que podemos poner es este porcentaje, mayor porcentaje y seleccionar solo aquellas en las cuales es numérico nuestro resultado, ¿vale? Esto recordad que, por si acaso no lo recordáis, recordad que teníamos aquí un curso que si no recuerdo mal, para el tema de que lo practiquéis, si no recuerdo mal, estaba aquí en la de correlación, reducción línea de correlación, ¿vale? Para que veáis que no nos inventamos nada y que lo podáis repasar. Aquí es básicamente, seleccionamos las columnas numéricas, ¿vale? Luego, seleccionamos, en nuestro caso, la correlación y le añadíamos este complete observations. ¿Por qué? Porque en este caso no hay nulos, pero imaginemos que sí que hubiesen nulos y se nos ha olvidado cambiarlos o reemplazarlos por el valor correspondiente, ¿vale? Pues con el use complete observations nos aseguramos que esas variables que pueden tener algún nulo, ¿vale? Esos nulos como que me los ignore. Y no me den un error como me podrían dar. En este caso no pasa nada, ¿de acuerdo? ¿Por qué? Porque ya hemos visto que no hay nulos en nuestra variable de datos, pero siempre os aconsejo ponerlo por si acaso en algún punto se nos cuela alguno y luego tenemos problemas de que estamos en un examen y decimos, no, no se me han salido NAs, ¿qué pasa con que me ha salido NA? vale entonces importante seleccionamos las variables que son numéricas hacemos la correlación entonces hacemos la correlación únicamente bueno aquí lo puedo llamar la correlación únicamente de las variables que sean numéricas y lo que voy a hacer es mostrar la variable correlación para la variable correlación me ha hecho muchísimas variables también me ha hecho por ejemplo las que acabamos de hacer del tipo género porque lo hemos pasado a numérico entonces en este sentido vemos por ejemplo que el total amount y el bike purchase le está aquí es de 0.72 un valor bastante alto mayor de 0.5 positivo que estoy diciendo que cuando aumenta la cantidad total gastada también también hay más probabilidad aumenta la parte de la compra de las bicicletas lo cual tiene mucho sentido vale si nos fijamos también en el back por chase, tanto si queréis la columna como si queréis la fila, la que mejor os venga, a mí me gusta más en este caso la columna, vemos por ejemplo que el customer ID con el bike por chase no tienen prácticamente relación. ¿Tiene sentido? Sí, que una persona se llame Juan, que se llame Pedro, que sea el cliente 1, que sea el cliente 3, en principio no afecta a que me compre más una bicicleta o no. Sin embargo, en este caso, por ejemplo, el total children vemos que tiene una correlación negativa tiene una correlación negativa de 0 127 es débil porque está por debajo por encima del menos 0.5 es decir es débil está entre 0 y menos 0.5 y es negativa es decir cuantos más hijos tienen hay menos probabilidad de que compre una bicicleta tiene sentido sí porque tiene sentido porque al final muy probablemente tendrán más gastos y a lo mejor no pueden acometer un gasto como sería la bicicleta ¿vale? si miramos algún otro caso más, tenemos por ejemplo la edad voy, voy, voy sería débil porque está entre menos 0,5 y 0 ¿vale? sería débil, sí que es cierto que en la realidad es raro encontrar correlaciones así y luego ya en la realidad en experimentos reales se diluyen un poco las fronteras ¿vale? Pero sería débil. Me ha pasado a mí al principio y he dicho por debajo y luego he dicho no por encima porque los negativos a veces se confunden un poco. Después tendríamos por ejemplo este 0,51. Fijaros que ¿cuántos más hijos tienen? Es el total children con el age. que estamos diciendo que cuantos más hijos tienen, una correlación fuerte porque ya es mayor que 0,5, estamos en positivo, pues más edad tiene, es decir, cuanto más edad tiene, más hijos tiene, lo cual también tiene una lógica, ¿vale? Te sería un poco, cuando os pidan hacer la correlación, un poco las características más concretas, que os vayan a interesar más, un poco redactarlas, pero así como os estoy diciendo, o sea, brevemente, ¿vale? Sobre todo, centrados en lo que se pregunta, intentad no perder el tiempo con algunas cosas que a lo mejor nos llevan a más, ¿vale? De acuerdo. Siguiente nos pregunta, ¿podría estimar un modelo que le permitiera clasificar si un individuo realizó una compra o no? Usa un modelo de regresión logística y un árbol de decisión, ¿vale? Aquí vamos a utilizarlo para poder reprofundizar todo lo que vimos en su día de regresión logística que también está en el PDF, ¿vale? Para que estemos completamente de acuerdo, aquí sí que os pediré bastante atención porque muy probablemente, bueno, seguro, os cae algo de regresión logística, de árbol de decisión y de clasterización, ¿vale? O sea, seguro, seguro. Así que, por favor, muchísima atención y cualquier duda que tengáis me la podéis comentar, ¿vale? Entonces, nos tenemos que enfrentar a la regresión logística, en este caso dentro de la regresión logística, si miramos nuestros datos, la variable que queremos predecir es la variable byCurchase. Es una variable que en efecto ya tenemos, en la plataforma tenemos que responder con la interpretación de los datos que obtenemos, es decir, lo que es el código ya se comprobaría después al subir el archivo R. Sí, yo os aconsejo que al menos alguna frase expliquéis. No necesitáis explicar todas las variables o todas las cosas, pero al menos lo más relevante sí que lo expliquéis, ¿vale, María? Luego ya en el archivo R vendrá absolutamente todo. Vale, entonces la variable que queremos predecir es si compra o no compra una bicicleta es una variable que ya tenemos en nuestro dataset. Aunque sea una variable numérica representa un código porque estamos diciendo compra o no compra, ¿vale? Entonces es un código como tal. Y como ya tenemos la variable, estaríamos hablando de una clasificación. Dentro de clasificación, regresión logística y el tema de árbol de decisión. Si miramos además, me van a preguntar cómo de buenos son los modelos. Es decir, me van a preguntar también el qué, matriz de confusión. Entonces, ya sabiendo que me van a preguntar cómo de buenos son los modelos, mi mente tiene que pensar en entrenamiento y testeo. ¿Me seguís? Aquí sí que me iré parando un poco más porque es la parte que nos repasamos el otro día. Vale, perfecto. Entonces, paso 1, cuando nos enfrentamos a esto, ¿vale? Y vamos a ir con el pdf para que todo el mundo no se pierda, que lo tenemos aquí también, ¿de acuerdo? En la parte de clasificación. Entonces, paso 1 sería cargar los datos. Hecho. Paso 2 sería mirar si hay valores nulos. De momento, hecho. Y si hubiese algún valor nulo, como estáis en un examen, serán muy poquitos valores nulos, ¿de acuerdo? Entonces podéis hacer perfectamente un na.mit de datos bicicleta y simplemente no tener en cuenta aquellos que sean valores nulos, ¿vale? Tened cuidado que si hay una columna que tenga muchísimos valores nulos, que creo recordar que no es el caso, ¿vale? De quitar esa columna antes para que cuando hagáis el eneomit no se se eliminen todos los valores nulos que haya, ¿vale? Pero, por lo más general, probablemente haya muy poquitos valores nulos y podéis hacer un eneomit si es que hay valores nulos que a lo mejor no los hay, ¿vale? entonces vale carga de datos hecho valores nulos hecho siguiente las variables que son de tipo texto tengo que convertirlas a que a factor aquí nos estamos diciendo que las pases completamente a variables numéricas por lo tanto en principio las podemos pasar a factor porque nadie nos está diciendo lo contrario vale entonces qué variables tenemos que eran de tipo texto pues podemos hacer ordenable str datos bicicleta y las variables que tenemos de tipo texto pues las tenemos aquí también vamos a ver si ya anteriormente puede haber una variable que podamos quitar que sea una variable que sepa que no me va a repercutir en nada pues para que la voy a utilizar si la puedo quitar directamente y ahorrarme ese paso vale entonces cuánto gasto dime maría Profe, en este caso porque ya tenemos la variable objetivo la transformamos solamente a factor pero en caso de que no haya, creamos la columna como dijiste vos recién, ¿no? En base a otra columna, creamos la columna binaria con el if-else y bueno, los datos Exacto Exactamente, ¿vale? Muy probablemente ya os digo que casi con un 80% de seguridad, la variable que tengáis que predecir, sea con yes, no, o sea sea de tipo texto, y tengáis que crear esta columna con unos y ceros, ¿vale? Que aquí ya os lo dábamos, pero muy probablemente en el examen sí que tengáis que crear, ¿vale? ¿Cómo sé si conviene transformar variables a factores? Pues lo primero, enlazando, lo primero que tenéis que ver es ¿realmente voy a utilizar esa variable o no la voy a utilizar? ¿vale? Porque aquí lo que nos interesa es trabajar cuanto menos posible y lo más eficiente, es decir, si yo ya de antemano veo que una variable no me sirve, ¿para qué me voy a esforzar en pasar la factor? ¿vale? Entonces, ¿cuánto gasta una persona en total? bueno a priori a priori tiene sentido que es una persona gasta menos puede comprar a menos bicicletas y si una persona gasta más comprará más bicicletas por lo tanto la dejamos bike purchase es la que quiero predecir por lo tanto la dejamos ahora el casto me da y di lo mismo si os dais cuenta en la correlación ya salió una correlación muy muy bajita tanto el personal y como el con el bike purchase como el casto me da y di si os dais cuenta es una correlación bastante bastante bajita y aparte es por lógica que una persona se llame raquel se llame juan se llame pedro se llame antonio no afecta a priori en que tengamos en que compren o compren vale entonces lo que vamos a hacer ahora es seleccionar las columnas entonces vamos a hacer aquí un perdonar un datos bicicleta datos bicicleta por ejemplo selección y dentro este datos bicicleta selección serán datos bicicleta y vamos a seleccionar las columnas que me interesa perdona seleccionar las columnas que me interesan pues tenemos un select y empezamos hemos dicho que la columna total amount en principio si vamos a poner total amount vale qué más vamos a poner también la columna luego ponemos comillas y todo la de bike por chase si creamos una columna reemplazamos los datos con 0 y 1, siempre utilizaríamos el mismo nombre de la variable de la nueva columna creada. ¿En qué te refieres lo de siempre utilizaríamos el mismo nombre de la variable? Cuando estamos hablando de cuando predices que lo pones al principio, sí, en ese momento siempre ya utilizas las variables que son numéricas. ¿Era eso, Jorge? Es una variable numérica, pero en realidad por su significado sería un factor como homeowner flag. La dejamos en numérica. La podéis pasar si queréis a factor o a numérica. A este nivel, María, no vamos a entrar. Si la quieres dejar en numérica perfecta y la quieres meter en factor, perfecto también. No hay ningún tipo de problema. Sería mejor, o sea, tiene más sentido pasarla a factor, pero no vamos a entrar a valorar si la ponéis en numérica, si la pasáis en factor. A este nivel no vamos a llegar en esta asignatura. Siguiente, tendríamos el bike purchase que hemos dicho que sí que nos lo quedamos porque al final es lo que quiero predecir. Luego ponemos comillas y todo lo que sea necesario el casto meridi hemos dicho que no el país tenemos ahora el país el country y un coach es decir la región y el grupo que al final es un poco el continente que tenemos vale para mí estas tres más menos como lo haría realmente el país son todo países no son todo países porque aquí tenéis el sureste el suroeste de eeuu y el noroeste de eeuu por lo tanto no estamos hablando de todo países por lo tanto está de aquí el country a mí lo que es el texto me dice me puede llevar a equivocación vale entonces de momento no me parece demasiado pequeño tenemos el country rey un code que aquí si os dais cuenta sí que aparece por países todo el iu es y ue es etcétera entonces el canadá australia aquí sí que es obviamente por países por lo tanto de las dos opciones de la opción de arriba la opción de abajo yo me quedo con la segunda porque mucho más fiable cuando nos vamos al grupo nosotros lo filtramos vale se puede también o sea podéis también filtrar si queréis no hay ningún tipo de problema vale entonces nosotros cuando vamos al continente claro un continente que pasa que es muy amplio o sea no es lo mismo españa por ejemplo que noruega no puedes no es lo mismo en este tema del tema de bicicletas por lo tanto me parecería que al final es como demasiado general y los y luego la rutina tanto de españa como lo que sería noruega es muy diferente por lo tanto no me convendría así que de todas estas yo me quedaría con el country de junco mal el country o rey o siguiente el siguiente es el persona y más de lo mismo con el casto mira de nombres de personas es una persona es la primera o la segunda para mí me interesa así que no lo voy a tener en cuenta y la siguiente es el persona vale a priori podemos decir bueno el tipo de persona quizás el tipo de persona me dice un poco el poder adquisitivo de la persona me puede portar o si es más joven o más o más mayor me puede aportar pero vosotros cuando hagáis cuando tengáis que mirar esto vale hacéis datos bici perdón table de datos por ejemplo dólar el brindados bicicleta dólar y vamos a mirar cuánta cantidad hay de en este caso la variable person Lo estoy escribiendo bien, lo estoy escribiendo bien. Entonces, nosotros gestionamos esto y vemos que la variable personType solo tiene valores y no tiene ningún dato más. Por lo tanto, me afecta, no, porque lo único que tengo son que todas las personas son del mismo tipo. Así que es una variable que no me aporta ninguna información. Por lo tanto, lo eliminamos. Después tenemos el dateFirstOfPurchase. Siempre os comento, fechas, with. De momento, fecha suite. No quiero ver fechas, ¿vale? Entonces, vamos a quitar esta fecha y vamos a quitar también el birth date. Además, en el caso de la fecha de nacimiento ya tenemos la edad, así que si tengo la edad, ¿para qué voy a utilizar la fecha de nacimiento y complicarme la existencia cuando tengo la edad? Entonces, la edad sí que la voy a poner aquí, ¿vale? Siguiente, tenemos el estado, dime, Lissete. es solo por el ejercicio pero normalmente las fechas cuando quiero predecir si por estacionalidad de lo que sea puedo vender tanto si es necesario incluirla sí, aquí dos cosas, cuando hablamos de series temporales las fechas es completamente imprescindible, cuando quieres predecir algo a lo largo del tiempo cuando lo que quieres predecir no es tan importante ese carácter temporal, lo que yo siempre aconsejo a mis alumnos es no te quedes con una variable de tipo fecha, lo que se suele hacer es calcular cuánto tiempo ha pasado desde la fecha hasta la actualidad o cuánto tiempo ha pasado desde los orígenes, que se llama una cosa que es seconds to epoch, hasta la fecha. Es decir, no nos quedamos con un formato fecha, sino que siempre intentamos pasarlo en formato numérico. Existen formas. Como es un poco más complicado, tampoco en esta versión lo vamos a ver, porque al final pensad que esto es un mundo ¿vale? y mi humilde intención es que la parte, la base, la tengáis ¿vale? luego cómo trataremos las fechas, si hacemos una cosa, si hacemos otra es un máster muy amplio, o sea, vais a verlo posteriormente, ¿vale? pero de momento lo que me interesa es que quede bien claro las cosas que hacemos, ¿vale? ¿me has respondido? Sí, sí, perfecto, gracias Nada, perfecto, dime Alejandro Sí, sin entrar mucho lo de la fecha por lo que has comentado, pero entonces, básicamente, si dejáramos la columna fecha en el hipotético caso, que no lo vamos a hacer porque no hay que hacerlo, pero en ese hipotético caso, si yo lo hiciera de verdad, no para un examen, sino para la vida, ahora mismo eso no me estaría prediciendo si la fecha es una variable predictora realmente, ¿no? No lo estaría haciendo bien el modelo. Exacto, exactamente. Generalmente te lo considera como si fuese un texto y entonces le dan la misma importancia que si tienes la palabra abcd o sea como que pierdes de carácter temporal si quieres que mantenga ese carácter temporal hay dos opciones o lo conviertes a una serie temporal en la cual ya tomas esa variable como la variable de tipo tiempo o bien lo que haces es hay dos opciones hay una cosa que se llama se construye pocos lo voy a escribir vale vale Sí, hay dos opciones Habría que transformarlo y ya está y es otro proceso y ya está Exacto, se transforma numérico porque si no te lo considera mal como que pierdes ese carácter entonces solo es transformarlo a segundos que han pasado entre dos fechas o a segundos que han pasado desde una fecha que el ordenador considera como la inicial de todo hasta la fecha que tú tienes entonces se convierte en un valor numérico y ese valor numérico es el que utilizas ¿vale? Y en la vida real puede ser interesante quitarla porque dices Oye, sin tener en cuenta la temporalidad, ¿qué variables hacen que se venda tal cosa? Claro, efectivamente. Es decir, tú al final la puedes quitar perfectamente porque tú eres la persona que decide cómo más o menos o en qué relación te interesas. Si a mí no me interesa añadir la relación de temporalidad por absolutamente ningún motivo, pues ya está, no la tienes que poner. En este examen no es necesario, por supuesto, porque es que no hemos hablado de salvosedias temporales y ya os he dicho que es muy improbable que caiga. no hemos hablado de cómo datar estas variables temporales. Así que tranquilidad en este aspecto, no hace falta que las seleccionéis. Pues tendríamos la edad, muchas gracias. La edad tendríamos el tema del estado marital, perdonad, perdonad, perdonad, aquí. Marital de estatus. Tenemos también el Yearling Com, que aunque si os dais cuenta es de tipo texto, pero lo que me está dando es como niveles de rangos entre los cuales puede estar el salario. Después tendríamos el género, después tendríamos el número total de hijos, que estas a priori, tanto son numéricas y no parece que nos den ningún tipo de problema, mejor. La educación puede ser que también sea interesante, la ocupación también. vale el si tenéis una casa o no tenéis una casa el número de coches obtenidos porque si ya tengo coche a lo mejor no me compré una bicicleta y bueno el sexo numérico que vamos a considerar que no lo habíamos creado porque era simplemente para que para mostraros un caso vale entonces seleccionamos ya estás está este conjunto de datos y dentro de este conjunto de datos volvemos a tener que variables que son de tipo texto que tenemos que convertir vale entonces vamos a seleccionar la expresión de tipo texto que en este caso ya se nos ha reducido bastante pero si el canto de young coat y el estado marital los intervalos de ganancias el tema del género la educación y la ocupación así que lo que vamos a hacer es convertirlas a factor vale para poder hacer la regresión logística entonces datos dólar voy a poner lo voy a convertir en la misma en la misma así que va a ser country perdón datos de bicicleta datos bicicleta selección dólar y en este caso la variable control y el code que va a ser va a ser como unas factor la variable nos volvemos a copiar y pegar todo esto hacemos esto para todas las variables que tengamos entonces yo haría un copia pega. Creo que son 5. Y luego iría copiando y pegando la columna que esté seleccionando de aquí. Pues marital status, marital status, marital status. Siguiente es el yearling com. Pues vamos del yearling com aquí y aquí. Dime, María. Profe, ahí para hacer el modelo de regresión no podemos poner como fórmula modelo regresión la flechita clientes. Lo voy a mandar porque si no te voy a dejar todo Lo que sería el acento circunflejo Vale, sí, lo podéis Vale Modelo regresión Para después poner Para también juntito Pasar las variables A factor Como estás haciendo vos, pero quizás todo juntito Todo junto, por supuesto De momento Lo podéis poner y de hecho está muchísimo mejor Lo que pasa es que ahora estamos simplemente lo que veáis. Recordad que siempre os comento que si vosotros habéis una forma mucho más corta y mucho mejor y sentís mucho más cómodos haciendo la otra forma, súper bien. Es decir, no hay ningún tipo de problema. Ahora digamos que lo estoy explicando pasito a pasito para que cualquier persona diga paso 1, paso 2, paso 3, paso 4 y lo podamos ver más entre comillas sencillo. Pero por supuesto lo puedes hacer así y está perfecto. O sea que súper bien. podríamos hacer la elección de las variables en función de la correlación entre las variables las que veamos que tiene mayor correlación ya sea positiva o negativa si iban podéis hacerlo y podéis argumentar la y estaría perfecto vale si no también lo podéis argumentar por experiencia como lo estoy argumentando aquí no habría ningún tipo de problema vale tendríamos género para la presión se necesita variables numéricas cierto pero que luego al tener esos campos en tipo factor habría que transformarlos vale para el tema de regresión logística y árbol de decisión no vale es decir para el problema de regresión logística y árbol de decisión funcionan tanto como variables numéricas como para variables de tipo factor, ¿vale? Clasterización sí que necesita que sean numéricas, pero para lo que estamos haciendo ahora de regresión logística y de árbol de decisión, sirve tanto factor como numéricas, ¿vale, Paulina? Vale, perfecto. Y nada, por supuesto. Vale, entonces tendríamos el tema del género, vamos con he contado una de menos y ahora me va a tocar pegar y pegar esta última, pero bueno, no os preocupéis por esos espacios ni nada de esto, tranquilidad en ese aspecto ocupación y ocupación ¿vale? tampoco si veis que os queda estos espacios y vais de prisa y corriendo, no pasa nada, mientras funcione como veis que funciona, ya estaría ¿vale? y si no pasamos las variables a facto y hacemos la reacción logística con la variable de tipo carácter que sucede en la respuesta, que os dará probablemente un error y os saldrá un mensajito rojo abajo que os dirá que no puede converger o que no puede llegar a la solución o de que estás utilizando variables de tipo texto. De acuerdo, pues ya tenemos las variables de tipo factor, ya tenemos todo, vamos a hacer la regresión logística. Entonces, para la regresión logística podemos hacerlo perfectamente como modelo reclog, por ejemplo, o como queráis llamarlo, de verdad que aquí no hay ningún tipo de problema como queráis llamarlo. Tendríamos que poner el GLM, que es el de la regresión logística, porque LM es la regresión lineal. Y tenemos que especificar, perdón, primero tenemos que descomponer entre entrenamiento y testeo. Perdona, es que se me ha olvidado esta parte. Entonces, siguiente paso, descomponer entre entrenamiento y testeo. ¿Por qué? Porque ya me lo preguntan. Para descomponer entre entrenamiento y testeo, habíamos visto el Create Data Partition, habíamos visto el index del subseímpole, etcétera, el que mejor os cuadre, ¿vale? Para que tampoco, o sea, para que lo veáis, está aquí, tal cual estamos siguiendo los pasos, ¿eh? Estamos en la parte de cargar los datos, ahora estamos en la parte de dividir el dataset en entrenamiento y testeo, ¿vale? Que es un poco lo que tenéis aquí, que está más o menos puesto, ¿vale? Entonces, para temas de reciprocidad, siempre ponemos el set-seed, ¿vale? Podéis poner el 1, 2, 3 o podéis poner cualquier otra semilla, ¿vale? Esto es simplemente una semilla que nos linka a una fórmula que nosotros a priori no conocemos de cómo se me genera los valores aleatorios. Y ahora tendríamos que la forma en la que hemos visto más veces es el tema de seleccionar un índice que me va a decir qué filas van al conjunto de entrenamiento y luego el resto irá al conjunto de testeo, ¿vale? Como tendréis un código, copiadlo y pegadlo, ¿vale? No tenéis que modificar prácticamente nada de esto, salvo el nombre de los datos que estéis utilizando, ¿vale? Quitando esta modificación, el resto de los datos os debería ser exactamente igual, ¿vale? Para que lo veáis, lo podemos copiar, pegar, ¿vale? Y lo único es datos regresión. Bueno, pues yo sé que no tengo datos regresión, yo tengo datos bicicleta selección, pues datos bicicleta selección, datos bicicleta selección en todos los sitios que tengamos en este caso los datos regresión, ¿vale? Pero para que veáis que podemos directamente simplemente copiando y pegando, pero asegurados de utilizar vuestros datos, ¿vale? recordemos que este 08 que quiere decir que un 80% vamos a training y un 20% vamos a testeo no siempre es 08 de habitual suele ser 08 07 vale pero sí que es cierto que por ejemplo si yo os dijese no un 60% de los datos tienen que ir a entrenamiento y un 40% de los datos a testeo vosotros haríais aquí un 06 pero en principio si no os decimos nada 08 07 suele ser lo habitual y lo que más utiliza. Entonces, nada, creamos el conjunto de entrenamiento y creamos el conjunto de testeo. Hasta aquí, ¿alguna duda de cómo hemos creado conjunto de entrenamiento, conjunto de testeo? Lo que estamos haciendo es quedarnos con el 80% del número total de filas que tiene nuestro dataset. Lo que hacemos es decir, vale, pues yo quiero que me recorras todas las filas y que de ese recorrer todas las filas te quedes con el 80%. Este 80% que son las filas que me quedo en datos bicicleta. Ojo, cuidado, aquí la coma y el no poner nada detrás porque nos interesan las filas, pero nos interesa que mantengamos todas las columnas. R entiende por defecto que poniendo coma y nada detrás y cerrando el corchete estamos queriendo que nos cojan todas las columnas. Y aquí tendríamos el menos índice que sería el resto, es decir, las que no son ese 80%, métemelas en conjunto de testeo. Perfecto, pues una vez que tenemos conjunto de entrenamiento y conjunto de testeo, ahora ¿qué vamos a hacer? Vamos a entrenar el modelo con el conjunto de entrenamiento y probar el modelo con el conjunto de testeo. Voy copiando y pagando para ir también un poquito más rápido, pero de verdad que cualquier duda que tengáis, cualquier cuestión que no entendáis, por favor comentádmelo, ¿vale? Porque hoy quiero daros esto, clasterización que me lo comentasteis la semana pasada y el tema de árbol de decisión y voy mirando un poco la hora para tampoco irme muy muy allá de tiempos, entonces cualquier duda que tengáis en este copia y pega que vaya haciendo, me lo vais comentando y os voy aclarando cualquier cuestión que sea, ¿vale? Una duda chiquitica y no tanto con esto y no sé si lo mencionaste, cinco minutos antes que entrara, el examen es literal solo del proceso de clasificación o regresión, bueno, el que sea más no de, oye, explícame o ABC de esto o sea, que tenga más teoría, o solo es esto no, el examen sí, os compartiré el script sin ningún tipo de problema el examen corresponde únicamente a o sea, no se entra teoría no se entra nada de teoría, o sea que por teoría ni siquiera la miréis porque es que no os la vamos a preguntar entonces son preguntas muy concretas primero de filtros, estilo lo que hicimos el otro día, oye, ¿cuántas personas resulta que, o cuántas mujeres resulta que tienen por ejemplo a un sueldo igual o superior a 30 mil euros por ejemplo vale es decir estamos hablando de este tipo de preguntas pero que no son de teoría son más bien de que vosotros hagáis filtros sus filtros filtros encadenados de eboli prop table vale igual que sus pregunto cuál es la probabilidad de algo os estoy preguntando realmente por el table por ejemplo he dicho esto dicho esto dicho esto dicho esto vale quería comentar otra cosa respecto a esto no tenéis ningún tipo de teoría y os pueden caer nulos no me alegro que no siente están perdidos os pueden caer nulos os puedo caer a filtros sobre todo filtros tables table prop table vale que los vimos el otro día, regresión logística, árbol de decisión y clasterización. Pero ojo, os puede caer regresión logística y árbol de decisión y clasterización. Es decir, no tiene por qué caeros únicamente uno de los tres casos. No sé si me explico, Lisset. La primera parte de tu pregunta... Exactamente Una pregunta Hola Dime No, es que ya enlazando con la pregunta de mi compañero allá por noviembre tuvimos que hacer una actividad que supongo que en tu grupo era la misma que era la de los aguacates Sí La actividad de los aguacates tiene una peculiaridad y era que no era una regresión logística sino que era una regresión lineal. Y serie temporal. No, serie temporal nosotros al menos ahí no vimos nada. No entrasteis. No entramos. Bueno, no entramos en nada, pero la actividad en sí mismo era una eso, era una regresión lineal, pero tenía la peculiaridad de que había que hacerla logarítmica, porque la relación entre precios del aguacate y tal y cual pues había que pasarlo a log. esto, o sea, que está muy guay pero, contanos regresión lineal la miraría un poquito más que series temporales ¿vale? y logarítmico nada por orden de improbabilidad pero no creo que os caiga el tema del logarítmico honestamente, ¿vale? es decir, sobre todo centraros, pensad en que habéis visto más conmigo y centraros en esa parte sobre todo, ¿de acuerdo? Bien, perfecto. Es raro. ¿Os puede caer algo? Os puede caer porque al final el profesor puede poner otra pregunta, pero ya os digo que es mucho más improbable que todo lo que vamos a ver ahora de repaso, de regresión logística, árbol de decisión y clastrización. ¿Sí? ¿Se entiende? Pero es bastante improbable. Al final de la clase os lo confirmo. Vale, dicho esto, modelo. ¿De acuerdo? Tenemos que hacer el GLM. Muy importante, hacemos el GLM. Yo no reviso exámenes, ¿vale? Porque yo con vosotros ya no soy correctora de ningún grupo, pero sí que más o menos hablo con los profesores correctores, de ahí que os pueda decir más o menos en lo que tenéis que centraros de cara al examen, ¿vale? Que por esta parte no os preocupéis, son exactamente igual que yo, así que no hay ningún tipo de duda, ni estamos todos en sintonía, que lo que se trata es que aprendáis, que sepáis más o menos el procedimiento, con lo cual, tranquilidad, ¿vale? Sobre todo eso. vale, cogemos el modelo para que veáis que es lo mismo nosotros cogemos el modelo usamos el modelo, pero claro yo no tengo todas estas columnas, tengo otras columnas, entonces voy a tener que poner las otras columnas, sé que muchos me diréis si tengo que poner una columna, una, una, una una, una, una, una lamentablemente sí, para esta primera edición, vale no es necesario de normal, pero para esta primera clase que tengáis, esta primera asignatura, sí, vale, entonces ¿Qué es lo que quiero predecir? Lo que quiero predecir es de datos, bicicletas, select, bueno, como ya estoy poniendo aquí el train, sería la columna únicamente a poner aquí, ¿vale? Entonces, tendríamos que sería el bike purchase este, ¿vale? Entonces, sería, quiero predecir bike purchase, que es mi columna 1, 0, envase A, recordemos que el envase A es el acento circunflejo, alt, gr y el valor 4 en teclado español, no sé, el teclado, si alguien tiene otro tipo de teclado, teclado americano, puede que cambie un poco, poco pero bueno sería este acerto circunflejo y luego ya es poner todas las otras variables de acuerdo una tras otra no os compliquéis copia y pega aunque haya espacios por ahí copia y pega o sea no no hay ningún tipo de problema vale yo no puedo probar espero tampoco os digo que tranquilidad en este aspecto de verdad muchísima tranquilidad tranquilidad absoluta vale yo no tengo ninguna duda de que lo vais a sacar todos perfecto y eso es lo importante vale si yo no tengo ninguna duda vosotros tampoco debéis tenerla puede que se extraña alguna pregunta puede ser pero sobre todo se extraña una pregunta no os preocupéis y está la siguiente y luego ya con que con calma podrías hacer la anterior que os habéis saltado valiosa que esto sobre todo eso vale es un examen que son dos horas mientras voy haciendo esto es un examen que son dos horas es un examen que es largo vale por eso como también tenéis el código y al final es mucho de repetir entendemos vale que podéis hacer varias cosas que os preguntemos varias cosas es decir que os preguntemos y regresión logística y árbol de decisión sé que al principio para vosotros puede parecer en plan de me hace hacer un montón de cosas en muy poco tiempo os garantizo que en el fondo es por vosotros vale y por vuestro bien bueno se hace ese menos tiempo pues súper bien Lo que quiero decir es que al final, bueno, sobre todo aquí, perdón, date igual a train, family igual a binomial. Lo que quiero decir es que al final es bien para vosotros, porque al final si se te da mal la regresión logística, sabes que puedes sacar la de clasterización. Y si se te da mal la clasterización, sabes que puedes sacar el árbol de decisión. ¿Me explico? Es decir, es problemático porque tendréis que hacer más cosas, pero por otra parte es mucho mejor porque os permite que si algo se os da mal, sabéis que lo vais a sacar por otro lado. ¿por qué dejas espacios en cada columna? no es por nada en especial, es porque he hecho un control C y control V, vamos un poquitito y simplemente por eso también para que veáis que si vosotros hacéis eso y lo vais poniendo funciona exactamente igual entonces si le dais a mí, vais con muchísima prisa a hacer el STR de arriba en lugar de estar tecleando y hacer control C, control V control C, control V, que es lo que he hecho funciona exactamente igual sobre todo, no se os olvide del family binomial porque si no, no estáis haciendo una regresión logística estáis haciendo una cosa de distribuciones gaussianos que funciona igual y sirve igual pero no es la regresión logística que se os pide vale así que muy importante este dato igual a 30 de acuerdo volvemos a ejecutar perfecto y ahora hacemos el samar y de modelo para la primera pregunta que os pueden hacer que la vamos a regresar me ha quedado este perfecto pregunta qué variables son significativas en este modelo la pregunta que todo el mundo vais a temer y la pregunta que tenéis que saber contestar de manera adecuada, ¿vale? También es importante. Entonces, pregunta, fijaros, yo tengo aquí la probabilidad, estoy con la regresión logística, ¿vale? Yo tengo aquí estas probabilidades que no tenemos ningún tipo de asteriscos, ¿de acuerdo? Absolutamente ninguno Cuando no tenemos Exactamente, la de las estrellitas Cuando no tenemos ningún asterisco por defecto ¿Vale? Aquí podemos ver Que según R lo compara con este 0,1 ¿Por qué? Porque si os dais cuenta Aquí siempre me pasa lo de las estrellitas A mí también, ¿eh? Porque Python es distinto Es bastante más claro Vale, sí En principio sería con el 0,1 ¿De acuerdo? Si aquí lo comparáis con 0,05, que es el que es por defecto, comentad, lo vamos a comparar con 0,05 porque es el valor que se utiliza por defecto en el control de hipótesis. se llama esto vale aquí podéis compararlo en principio aquí si seguimos tal cual el estudio sería con 0 con 1 vale pero normalmente se utiliza casi siempre se utiliza el 0,05 entonces si lo comparáis con 0,05 comentad que lo comparáis con 0,05 porque es el valor por defecto vale el que se suele utilizar por norma habitual de acuerdo entonces efectivamente aquí tenemos que ver qué pasa si es menor o que tenemos que ver qué pasa si es mayor vale entonces para este tema de mayor o menor yo os aconsejo que os lo apuntéis en el código vale en el código también podéis poner si es mayor o si es menor porque hasta a mí me pasa que a ver que tengo que revisar si es que sea mayor y si es que sea menor porque luego cuando lo veamos de otra forma que es el grado de confianza justamente el contrario, entonces os acabaréis liando. Así que mi consejo aquí es que os apuntéis si es el mayor el que importa o el menor el que importa, ¿de acuerdo? De todas formas, igualmente, si vamos por aquí, veréis que también en principio, ¿vale? Lo tenemos hecho. No da exactamente la misma relación, ¿vale, Cristina? O sea, la correlación mide la causalidad y la significancia mide qué tan importante es una variable para el modelo. Es decir, si tú puedes despreciar esa variable y el modelo, entre comillas, seguiría funcionando igual. Están íntimamente relacionadas, pero no siempre. Se calculan de manera diferente y puede haber un poco de diferencia. Algún día me gustaría entender un pelín más profundamente el 0,05 de cómo la predicción se debe lanzar. Me parece complicado en tema matemáticamente en cualquier caso. Esto matemáticamente y estadísticamente es un tema que si os interesa se llama control de hipótesis, es un tema bastante arduo, no os voy a engañar, pero básicamente lo que tú dices es, ese 0,05 viene de que tú estableces que quieres una confianza del 95% en lo que tú des. Entonces, lo que se hace es restar. Por eso os digo que es complicado hacer ese 0,05. Entonces, tú estás diciendo al final que con un 95% de confianza esa variable es significativa o no es significativa. Si la haces con el 0,1, con un 90% de confianza esa variable es significativa o no significativa. Entonces, todo está relacionado realmente con intervalos de confianza, que es otro tema extenso que podríamos estar hablando de esto de verdad que años. Entonces, lo que tendréis que ver es si son mayores de 0,05 o mayores que el número que os esté marcando aquí con las estrellitas, entonces las podemos considerar que son no significativas. Y si son menores, son las que cogemos. Como referencia, cuando no tenéis ningún tipo aquí de valor, yo sí sería el que cogiese 0,05. Según R, no debería ser 0,05, porque según R, si fuese el 0,05, tendrías que tener un punto al final. pero sí que es cierto que tendría que ser 0,1 que es el que tienes como el espacio al final pero sí que es cierto que por norma general en matemáticas y en estadística por defecto se suele utilizar el 0,05, entonces ante la duda de no sé si es 0, no sé si es 0,001 no sé si es 0,1, no sé si es 0,05 podéis compararlo con 0,05 y comentar seleccionamos 0,05 porque a pesar de que por las estrellitas fuese 0,001 por defecto lo más habitual es compararlo con 0,05 ¿vale? en el caso de country vale, sí comentadme el caso del country que según si es de un país tiene esa aleatoria o no, entonces habría que eliminar esa variable o no vale, buena pregunta ¿vale? en este caso sí porque todas son mayores de 0,05 si te das cuenta, pero si no tendrías que decir, bueno Country Region Code K, por ejemplo, el de Canadá este se aceptaría y estas se rechazarían, ¿vale? Lo que te quiero decir es tú especificarías cuál es el que te resultase raro, ¿vale? O sea... Sí, dime Sí, o sea, yo cuando nosotros hicimos el ejercicio como que, pues eso Echemos como una iteración, ¿no? En plan, oye, pues he hecho el modelo, he elegido estas variables, pero resulta que luego haciendo el modelo estas salen mayor que 0,05 y por tanto, pues en la siguiente iteración las quitamos. Esto sería la manera correcta de proceder en el examen. Vale, en el examen no necesitáis luego quitarlas, ¿vale? Se os preguntará por qué variables son significativas, pero no hace falta que luego retoquéis el ejercicio. Pero imagínate que te pasa algo como esto. ¿vale? Y entonces, ¿con qué variable te quedas? Entonces, no hace falta que retoquéis el ejercicio y decís cuáles son las significativas y no significativas, pero dejáis la regresión logística tal como la teníais al inicio, ¿vale? No hagáis una segunda porque es más tiempo y porque puntuamos por procedimiento más que por otra cosa, ¿vale? Vale, pero ¿en la vida real sería lo correcto? En la vida real depende, porque muchas veces las variables que notas son significativas, sí que te interesa mucho mantenerlas. Entonces, andas un poco ahí. En la vida real depende del caso. Hay veces que las eliminas, hay veces que optas por, realmente lo que sueles optar es por hacer un principal component analysis y reducir las variables, ¿vale? Que es lo que se suele utilizar más o un UMAP, que básicamente es lo mismo de reducción, más que andar mirando las significativas o no significativas, ¿vale? Pero esto ya es, depende también de la persona que trabaje. Yo, por ejemplo, como las significancias no me gustan mucho, tampoco lo voy a negar, lo que hago es hacer un PCA o un y me reduzco así las variables de una manera mucho más segura y después con esas variables ya utilizo. O podéis utilizar una laso regression que también me dice exactamente qué variables escoger. Una regresión por laso que es parecida a la regresión logística te dice exactamente qué coeficientes tienes que escoger. Pero esto ya para adelante. Dime Jorge. Sí, una pregunta, que creo los asteriscos, por ejemplo, en los códigos de significancia, aparece el 0 y a la parte tiene 3 asteriscos, pero esos 3 asteriscos están asignados al 0 o al 0.001. vale, en teoría en teoría al 0, buena pregunta ¿vale? porque en R siempre me hago un poco la misma pregunta, pero en teoría están al 0 ¿por qué? porque si no estuviesen al 0 y estuviesen al 0,001 el 0,05 que es valor referente, tendría una estrellita, y esto es muy raro porque el 0,05 es el valor por defecto así que el 0,05 me inclino más a que sea el punto por lo tanto, en principio, estas tres estrellitas van con el 0 ¿vale? Sí, de ahí salía mi duda porque por ejemplo en Country Region Code CA que decía 2 exponencial a la menos 16 quiere decir que toma que si es mayor a 0 no tiene significancia pero si es mayor a 0.5 No existe o sea el 0 el 0 es un número que se inventaron los matemáticos ¿vale? No existe el 0 real cuando estamos hablando, o sea, nunca te va a salir aquí, nunca te va a salir un cero, ¿vale? Pero cuando te sale un número muy, muy pequeño, como es este caso de este menos 16, y de hecho aquí había una pregunta que venía al respecto. Ah, sí, exacto, ¿vale? Cuando tienes un 2 elevado a por e elevado a la menos 16, es un valor tan, tan, tan, tan, tan pequeño, piensa que estás hablando de 0,16 zeros y un 2, que realmente el ordenador está considerando que eso es el valor cero, ¿vale? Entonces cuando te dicen menor que 2 elevado a la menos 16 prácticamente te están diciendo que es cero o incluso menor que cero. ¿Vale? ¿Cómo se me ha explicado? El 2 elevado a la menos 16 es prácticamente el cero. Dime. Y para interpretación sí podemos guiarnos siempre con el punto 5. Con el punto 05. Vale. Yo lo que haría... Si tenéis... Si tenéis dudas para esto lo que yo haría personalmente en un examen es decir según los asteriscos yo tendría que comparar este valor con 0 pero normalmente y por defecto casi siempre se comparan con 0,05 así que voy a compararlos con 0,05 pero sí que comentas que este se debería comparar con 0,05 pero que por defecto como que lo habitualmente se hace es compararlo con 0,05 lo vas a comparar con 0,05 ¿se entiende? Pero escribidlo. Vale, perfecto. Un momento, Olga, que teníamos un montón de preguntas sin responder por chat. Y luego te comento lo tuyo. Entiendo que si el coeficiente tiene signo negativo implica una relación inversa y si es positivo una relación positiva. ¿Pero qué pondríamos como análisis vos? Vale, como análisis ¿estáis hablando del estimate? Porque la probabilidad siempre va entre 0 y 1. Entiendo que estamos hablando del estimate. Vale. te mantengo al vilo porque me viene para una pregunta posible de examen ¿podrías repetir qué criterio debe tener en cuenta para tener en cuenta las variables o rechazarlas? vale, un poco lo que estamos comentando si son menores que el valor de referencia te las quedas, si son mayores que el valor de referencia no te las quedas si recuerdo bien, porque siempre al final acabo destabillándolo, entonces, como os vais a trazar muchísimo lío con el cero, muy probablemente Porque algunos hagan 0 y os hagáis muchísimo lío con este 2 elevado a la menos 16, yo lo que haría sería, si os hacéis muchísimo lío, poner por los asteriscos que marca R, lo tendría que comparar con el 0. Ahora bien, como por defecto siempre se compara con 0,05, pues vamos a compararlo con 0,05. Y lo hacéis en base a 0,05. ¿De acuerdo? Creo que te resuelto la duda, Olga. De todas formas, me lo comentas. La vida real, lo justo no siempre es lo correcto, efectivamente. pese a un no lo vimos preferimos profundizar en esto que es lo que se ve a quedar en el examen nos tocaría una de esas clases que empecé yo más tarde pero repasamos un poquito entonces por eso no os preocupéis vale lo veremos para años bueno las el siguiente cuatrimestre me quedó una duda si ahora te comento lucia hola que no se ha pasado me quedó una duda cuando hicimos la tarea los coeficientes sales sólo yender m y no yender f por tomar como ejemplo esta variable que se ve esto vale se debe probablemente a que yender efe sea la primera entonces en este caso o no tengas yender efe o al hacer al hacer el factor te haya quitado el primero vale esto puede ocurrir no preocuparse por esto vale la idea esto básicamente es el factor lo que está haciendo al final cuando hacemos una regresión logística de este estilo lo que hace es convertirlo entre comillas en variable en cada una en una columna diferente y si yo tengo la columna de hombre realmente tengo la columna de mujer porque cuál será la columna de mujer la contraria de hombre entonces muchas veces se queda con uno para evitar tener dos columnas que me den la misma información o estén íntimamente relacionadas y me pueda pervertir el resultado vale paulina no sé si esto te ha resuelto algo es más que nada para que lo entendáis pero al final el resultado es que analicéis lo que os salga vale pero viene siendo eso si yo tengo la columna de hombre tengo la columna de mujer o si tengo la columna de mujer tengo la columna de hombre. Perfecto. Estoy preparada para el examen, pero como ustedes saben, si luego en la vida real no estoy haciendo... La vida real se hace con PCA, se hace con UMAP y casi nadie ya mira las significancias. Es algo que tenéis que entender, porque es algo que importa bastante cuando estáis hablando desde el punto de vista de entender el modelo que hace, pero realmente la mayoría de las personas ya tiran a hacer una reducción previa con el PCA y el UMAP Y muchas veces tanto como analizar las significancias no se suele detallar, se suele detallar más el tema de los estimadores. Sí, en las siguientes asignaturas, ya que ya empecéis conmigo desde el inicio, sí que veremos un poco más la vida real. Espero y deseo, si no hay cambios. Dime Olga, ¿qué querías comentarme? Es que estoy un poquito confundida con lo del valor R, por lo que tú acabas de decir, tenemos en cuenta solo los valores menores a 0.05, que eso lo tenemos que decir bien claro en el examen. En ese orden de ideas, ¿todas las variables excepto las tres primeras se descartarían? Sí, por eso os digo una cosa es la teoría y otra cosa Sí, pero una cosa es la teoría y otra cosa es la realidad, ¿vale? Entonces, sí, si tú dices la significancia al o sea, a la definición efectivamente, ¿vale? Solo tendrías cuatro variables que serían significativas pero por eso comentábamos que realmente la vida real que se hace, se hace se hace una regresión de lazos se hace un tema de un PCA se reducen así las variables y entonces ya no tienes que estar mirando tantas significancias la verdad que yo personalmente lo es dejadme que lo mire porque siempre bailo los números entonces por algo os dice esto también vale vale efectivamente vale los menores nos los quedamos los mayores los descartamos entre comillas que no los descartamos cuando hacemos el examen vale vale si oís algún tipo de alerta es básicamente una alerta de temporal o sea que si habéis oído un ruido muy desagradable, es simplemente el gobierno diciendo que va a haber mucho viento y mucha lluvia. Nada, vale, dicho esto, hasta aquí ¿lo entendemos? Creo que sí, profe. O sea, yo como que tengo la duda, o sea, recién de lo que preguntó Olga. Nosotros descartamos las variables que en realidad están por encima en este caso el 0,05 lo vamos a tomar de referencia pero no hacemos nada en realidad con esas variables en la interpretación, simplemente decimos que vamos a tener vamos a tener en cuenta las tres primeras variables que son justamente las que están por debajo del 0,05 El examen a lo mejor os pregunto, ¿cuáles son las variables más significativas? Entonces tendréis que decir las que están por debajo del 0,05, ¿vale? Y vosotros diréis, ¿es honestas? porque están por debajo del 0,05. Podéis decir, hay alguna que por los asteriscos los tendríamos que comparar con 0,01 o por el valor que sea, pero como por defecto lo más habitual es por 0,05, lo comparamos por el 0,5, perdona, no 0,05, 0,5. Entonces, lo comentáis así, pero luego ya no retoquéis ni la regresión logística ni hagáis nada más porque va a ser pérdida de tiempo para vosotros, volver a rehacer lo mismo no tiene mucho sentido. Entonces, lo dejáis tal como está para el examen y ya está. ¿De acuerdo? Perfecto, gracias. afirmativamente si el ingreso aumentaba en 1 o si el ingreso aumentaba en 2, ¿vale? Cuando estábamos hablando de cuánto aumenta, ¿vale? Algo, ¿de acuerdo? Si aumenta, por ejemplo, la variable age en 1, ¿vale? O aumenta la variable age en tanto. ¿Qué os estamos pidiendo? Os estamos pidiendo que hagáis el exponencial, ¿vale? De, en este caso, hemos dicho la variable edad. el exponencial del estimate del age en este caso será este exponencial ¿vale? ¿esto qué será? esto será lo que aumenta si aumentan 1 pero yo os puedo decir, no, yo quiero saber lo que aumenta si aumentan 100 dime Iván profe A la hora de hacer el modelo, cuando has puesto GLM y con las columnas, ¿podrías haber puesto, digo, para simplificar, GLM datos bicicleta selección o no? ¿O hemos puesto el nombre de columnas por algo? Vale, no porque si pones datos, bicicleta, selección no distingues que columna quieres predecir del resto ¿vale? Entonces tendrías ese problema, sí que hay una forma mucho más rápida de ponerlo pero de momento, os lo he puesto así sí que hay una forma mucho más rápida de hacer la selección con R para que no tengáis, pero os lo pongo así sobre todo para que os aseguréis de que ponéis cada cosa por eso os comenté también hacer el STR La predicción entonces es like purchase y luego ese signo tipo la ñ o eso el acento circunflejo exacto, ¿vale? luego ya veremos más cómo reducirlo dime María ¿cómo dijiste que puede ser la pregunta para usar el exponencial? vale, yo os puedo preguntar ¿cuánto puede aumentar la probabilidad de responder de forma yo que sé, afirmativa es decir, de que haya predicción por ejemplo de que compres una bicicleta si aumento en una unidad en la edad por ejemplo pues entonces tendrías que coger el estimador donde estás el estimate de la edad pero es que es la columna estimate de la edad haces la exponencial de este valor se esprendió en 100 pues si esto es 1 pues en 100 será el resto como se ponía lo de la ñ en el teclado si estáis en teclado castellano vale lo que tenéis que poner es el alt r que está a un lado a la derecha perdón que soy un poco disléxica a la derecha de la barra espacial de la tenis al r mantenéis pulsado de la r y dais al valor 4 pero no al 4 del panel de números al 4 que está arriba de la y la r si tenéis teclado americano ya casi Vale, creo que tienes teclado diferente. A ver. Alt 4. Alt 4. Alt GR 4 tiene que ser. Y un espacio. A ver. A ver. al GR más 4, sí. Si no te funciona, Iván, tendrás que mirar el... A ver... Atajo teclado... Acento... Creo que es el acento circunflejo, si no recuerdo mal. ¿Puede ser? Vale, en Mac es alt más ñ. Vale, vale. No, el acento circunflejo es el triangulito. El acento... El umblau de... Ah, vale, tienes también Mac Vale, perfecto, pues al más cuatro Perfecto Y el tema de alt más ñ Si estás en Mac, muchas gracias Alejandro Porque yo Mac la verdad no he tenido nunca Así que ese atajo no me la sé Dime María, no sé si tienes alguna duda más Alguna cuestión No, pero perdón Dejé la mano en el rato No te preocupes Vale, entonces dicho esto, ¿qué más cosas os puedo preguntar? os puedo preguntar, no os preocupéis porque ahorita haremos un poquito más, repasaremos todo, os lo prometo, ¿vale? así que los que se tengan que ir, os vais no hay ningún tipo de problema, los que os podáis quedar os quedáis un ratito, ¿de acuerdo? o sea no hay ningún tipo de problema por mi parte por vosotros quedará grabado igual, ¿vale? así que si alguien necesita que lo comente, ¿vale? ¿qué más puedo preguntar? que aumentas en 100 la probabilidad ahí sería 100 por exponencial habías dicho? Sí, en principio sí. ¿Vale? Por ejemplo. ¿De acuerdo? Entonces, siguiente. Siguiente, siguiente, siguiente, siguiente, siguiente. Que al final es hacer el tanto por ciento en comillas. ¿Vale? Siguiente. ¿Vale? El tema de la matriz de confusión. ¿Vale? Tema de matriz de confusión y la métrica de exactitud. ¿Vale? Entonces, esto yo puedo preguntar tanto matriz de confusión como métrica exactitud como sensibilidad como especificidad vale las cuatro métricas las podemos hacer entonces para ello tenemos que hacer una predicción entonces haremos un white predict como si como queráis llamarlo que será aplicar nuestro modelo a que a en este caso nuestro conjunto de datos de tipo texto vale para no tener que copiar ir un poquito más rápido vamos por aquí también lo tenéis dentro de este tema de interpretar el signo de los del tema de los coeficientes el tema por ejemplo de cuando aumentan uno la variable tenemos que aumentar un 344 vale repite repasar esto por si acaso os lo preguntamos vale entonces una vez que tenemos el modelo vamos a copiar y pegar esto simplemente por ir más rápido pero cualquier duda que necesites me lo comentas a poder ver el orden podéis poner el orden de los pasos de regresión logística no hay ningún tipo de problema vale sí que podéis hacer sin ningún tipo de problema mónica vale entonces aquí lo que haríamos es hemos llamado modelo tanto asegurarnos aquí lo llevamos también modelo vale el test confirmar que es este test y el tipo respuesta vale lo que hacemos es calcular la predicción recordad que esta predicción me está dando las probabilidades por lo tanto son números bueno este caso ha salido todo súper bien porque probablemente algún punto el algoritmo no era el mejor del mundo, pero bueno, va súper bien. Pero en todo caso, siempre tendremos que, en el caso de regresión logística, tendremos que cambiarlo a hacerlo el mayor que 0,5 es 1 y en el caso contrario sería 0. Así que le daríamos al clase pre. Y luego podremos hacer una perdonación, si estoy con llueve hoy. Luego podemos hacer la matriz de confusión. Entonces, una vez que hayamos reemplazado y hemos hecho la probabilidad y hemos redondeado si es 1 o si es 0, haríamos la matriz de confusión. Yo os aconsejo personalmente que la matriz de confusión la hagáis con el library caret, porque me parece que queda todo bastante mejor, te da todas las métricas directamente y no tenéis que hacer mucho. Entonces, en este caso, ¿qué haríamos con el library caret? Pues la clase pret, decís, vale, clase pret, clase pret, perfecto. Esta columna ya no es llueve hoy, esta columna ahora es bike purchase, que es la que estamos analizando. Así que cambiáis la bike purchase y el resto coincide. Bueno, si escribo bien por chase, quizá salga mejor. Y no he cargado la librería caret. Si es de ese error de que no lo reconoce, muy probablemente es que lo que viene siendo la librería no la hayáis cargado. Cuando lo cargamos, ahora sí que nos va a dar el resultado. Aquí para interpretarlo, lo primero, el positive class igual a 0 me está diciendo que los positivos es el 0, por lo tanto el 0 con el 0, ¿qué van a ser? Son los verdaderos positivos, el modelo ha acertado, era 0 y me ha dicho que de verdad es 0. vale el 0 con el 1 en este caso son 9 que es en realidad es 1 y en la predicción me está diciendo que es un 0 por lo tanto es un falso positivo porque porque el 0 es positivo y en realidad será uno que es negativo en este caso en realidad será positivo me ha dado negativo por lo tanto estos son los falsos negativos y este último pues serán los verdaderos negativos era negativo y me dado negativo en la cura si un 99 57 por ciento vale un modelo muy muy bueno que me da mi cura si un 20 por ciento no pasa nada decís que es una curación muy bajo no se va a valorar por la cura si sino por si decís que es un buen modelo o mal modelo vale y aquí la sensitividad y la especificidad sensitividad como de bien detecta los casos positivos especificidad como de mal detecta los casos pero no como de bien detectados casos negativos aquí recordad que habíamos hablado para que os acordéis del tema del test COVID. El tema del test COVID daba muchos falsos positivos, por tanto, sensitividad baja porque no predecía bien los positivos, daba muy pocos falsos negativos, es decir, predecía muy bien falsos negativos, por lo tanto, especificidad alta. Dime, Alejandro. Muy rápido. Entonces, o sea, el acuracy siempre está relacionado con la sensibilidad y la especificidad en tanto y cuanto, si falla mucho, tu acuracy va a ser muy bajo y luego pues tú y luego sensibilidad y especificidad simplemente hacen mención a falsos positivos o a falsos negativos. Exacto. Exactamente, exactamente, ¿vale? Vale, perfecto. De acuerdo, muy bien. ¿Examina qué hacer gráficos ahora que veo Gigi Plot 2? No, el máximo gráfico que vais a tener que hacer es la matriz de confusión. ¿Vale? Ah, bueno, sí, y el de los clusters. Muy bien, efectivamente, Leticia, y el de los clusters que se me había olvidado a mí. vale, hasta aquí, ¿alguna duda con regresión logística? ahora vemos el de los clusters lo haremos rápido, ¿vale? el árbol de decisión que se hacía después, dime María profe, entonces el accuracy cuanto más cerca del 1 esté mejor es el modelo exactamente, lo que estás diciendo es cuántas veces acerto de todas las veces que lo intento Entonces lo que haces es, ¿cuántas veces acertó? Acertó aquí y acertó aquí, por lo tanto lo sumas. Y luego, ¿de cuántas veces lo intentó? De esta, de esta, de esta y de esta, o sea, de todas, de las cuatro que haces la suma. Entonces haces una división entre las veces que acertó, divido entre las veces que lo intentó y este es el acurase que te da. Cuanto mayor significa que más veces ha acertado. Perfecto, y por ejemplo el 1859 es el verdadero positivo el 9 es el falso positivo el 7 es el falso negativo y el 1822 es el verdadero negativo, ¿verdad? Efectivamente, perfecto ¿Alguna duda más de regresión logística antes de que os diga la última cosa que os puedo preguntar de regresión logística, queda una última cosa más, ¿vale? Sí, ahora os comento eso. Vale, entonces, ¿qué otras cosas puedo preguntar? Recordad Titanic. En Titanic vimos una cosa que era cómo podemos predecir, o sea, yo tengo ya todo mi modelo logístico, pero quiero predecir una cosa concreta, ¿vale? Bueno, aquí tenéis todo. vale, entonces viene siendo esto si yo os digo, bueno y ahora cálculame la probabilidad de una persona que tenga treinta y tantos años que sea mujer pero un caso completamente nuevo pues lo que tenemos que hacer es hacer esto lo que pasa es que le tenemos que dar los valores ¿de acuerdo? de cada una de las columnas que estemos utilizando en el modelo, salvo evidentemente la de byte por chase, que es la que queremos saber vale, entonces voy a copiar aquí lo que tenemos que hacer es copiar todas las columnas con tiempo, con calma. Country, region, code. Country, region, code. Luego tenemos age. Exacto. Esto lo hicisteis en Titanic. En Titanic lo hicisteis, así que si vais a la parte de Titanic tenéis una parte en la que deberíais haber hecho la predicción de Leonardo DiCaprio de la capacidad que tenía de sobrevivir y tenéis que haber hecho la predicción de Kate Winslet. ¿Os suena esto? La verdad yo no me acuerdo mucho, pero lo puse en mis apuntes, porque estaba en el documento, pero yo no me acuerdo mucho. Vale. Bueno, es simplemente, ¿vale? Vais poniéndolas porque hay muchas y no me... Va a decir, lo hicimos. Hay muchas variables. el tema es vosotros ponéis probabilidad de lo que queráis vale pero olímpia en este caso de compra de comprar la bicicleta entonces utiliza es el predict que fijaros que este predict es el mismo que utiliza es aquí vale pero ahora tenemos nuestro modelo se mantiene igual el modelo y luego cambias este new data vale este ni un dato ya no estés porque ya no me interesa sobre todos los datos de test me interesa sobre un dato nuevo concreto vale entonces este new data como interés para ponerle esa estructura de fila para que lo entendáis para que poner esa estructura de fila que estamos acostumbrados a utilizar la palabra data punto frame vale y entre paréntesis lo único que hacer es poner todas las columnas que tienen en cuenta para el modelo creo que me falta creo me falta total children total children total children de estas aquí educación educación educación educación educación educación aquí ocupación claro ahora me diréis bueno pero es que realmente hay algunas que son factores no hay ningún tipo a madrid me quedaba mal como un flag o mover flag vale y number cars owned number cars owned que está aquí vale entonces vamos con las fáciles primero numbers cars owned vamos a poner que es que tiene un coche vale quiero hacer la predicción de una persona que tiene un coche que no tiene casa vamos a poner que la ocupación vamos a poner que sea creo que aquí tenéis bachelor evidentemente tiene que ser un valor de los que tenéis en factor no es posible vale entonces vamos a hacer factor sí sí conmigo no lo habéis visto porque yo he ido más a que intenta esto el tema de todo el tema vale conmigo lo vio mi grupo que vosotros en principio no porque no me daba tiempo a explicaros todo vale Pero esto, lo único que tenéis que hacer es un poco, diciendo, pues, ocupación, por ejemplo, manual, educación, por ejemplo, bachelor, ¿vale? Número total de niños, vamos a poner que tiene un hijo, género, pues vamos a poner, por ejemplo, que es una mujer. Ay, Dios santo, mujer, ¿vale? El tema de los ingresos salariales, tenemos que poner una de las opciones porque lo hemos pasado a factor, tanto esta misma. estos datos os los dan ellos para es decir yo estoy poniendo unos datos aquí pero vosotros en el enunciado tenéis exactamente qué datos tenéis que poner aquí vale lo único que para haceros el ejemplo pues estoy poniendo unos cuantos cualquiera vale pero vosotros dirían calcula la probabilidad de que una persona soltera que tiene de 75.000 uno a 100 mil euros de ingreso que tenga para hacerlo el manual etcétera vale pues un poco esto de acuerdo cancha y el rey un ejemplo que se canadá creo que era este y total amount suponer 58.000 por ejemplo vale fijo que algo se me ha olvidado en respectiva el símbolo y marital estatus me falta la coma vale vale ya tenemos argumentos entes un argumento vale me falta una columna por eso es que me diréis todos los valores que tenéis aquí vale que yo creo que me ha saltado una columna casi, casi de seguro. Vale, pero bueno, si lo hacéis, ¿de acuerdo? Y lo repetís con todas las columnas os saldrá bien, os saldrá aquí un valor por este tema, ¿vale? Esto, si lo preguntas, perdón, si se preguntan al examen, ¿no? Esto si se preguntan al examen es, oye, pues si ya una vez tienes el modelo, meterle estas variables para calcular si sobrevive o muere o compra o no compra y habría que meter las variables que se pidan si son 2, 2, si son 10, 10 las que se pidan ahora estás haciendo un ejemplo con muchas tenéis que poner todas las columnas tenéis que poner todas las columnas que hayáis utilizado aquí no en bikepurchase que es lo que queréis predecir pero todas estas columnas sí que las tenéis que poner en el mismo orden, si es posible no, y en la vida real podrían ser bueno, no siempre tienes todos los datos pero en el ejercicio del examen sí que os lo damos todos los datos vale, visto, visto, genial vale, esto puede pasar que nos pregunten por un caso sí, al final es lo último de lo último y es sencillo, es poner un data frame y vais poniendo vuestras columnas, el dato que os dan aseguraros que sea un dato que se haya valido en la columna y ya está vale, es simplemente esto pero pero vamos que es lo mismo que el predil, ¿vale? Pero sí que os puede caer, ¿vale? Es lo mismo que habéis hecho aquí, lo mismito, ¿eh? O sea, lo mismito que habéis hecho aquí. De hecho, os va a ser una probabilidad que luego tendréis que si queréis redondear, pues lo mismo. Salvo que en lugar de aquí poner el test, añadís un data frame, ¿vale? Y ponéis las columnas con el valor correspondiente que os dé el propio examen, ¿vale? Dime, Iván. Y si por lo que sea Contestamos en base a ir mirando Sé que es muy cutre Pero No te preocupes, dime Y por lo que sea nos da por contestar la predicción Mirando un árbol de decisión Que sería algo bastante cutre Pero Lo podéis hacer, no hay ningún tipo de problema Como probablemente os caiga predicción con relación logística y probablemente os caiga predicción con árbol de decisión, igualmente lo vas a tener que hacer. Así que lo podrías hacer, ¿vale? No habría ningún tipo de problema. Sí que es cierto que os aconsejo que, o sea, intentadlo al menos, ¿vale? Que veamos esto al menos porque si os ha dado cualquier error, no hay ningún tipo. Un número entre un porcentaje te da un número entre 0 y 1. Como un 0,60 y algo, un 0,40 y algo, o un 0 o un 1, ¿vale, María? Pero lo que es hacer lo mismo, o sea, es literalmente esta misma línea solo cambia aquí esta parte de test, lo reemplazáis, ¿vale? Por esta parte, que es, ponéis data frame y entre paréntesis, lo tenéis en los apuntes, lo tenéis aquí, aquí lo tenéis, ¿vale? Probabilidad de lluvia. En este caso, con las columnas que se hayan hecho en lluvia, lo predecís y os da el resultado, ¿vale? Pero es simplemente que añadáis este data frame punto y todas las columnas con el valor correspondiente. Cuidado con las comas. ¿Vale? Disculpa, Amparo. Si solo fuera la predicción de una columna, si solo fuera el total amount, se pone siempre data.frame y solo la columna de la predicción, se podría decir. Tienen que ser todas las columnas. Tienes que poner siempre todas las columnas. Siempre. ¿Vale? Eso por defecto. Y os daremos los datos en principio de todas las columnas. ¿Vale? gracias. Os lo podemos preguntar. Dicho esto, y por ejemplo, si os preguntase cuál es la probabilidad de, bueno, vale, si os pregunto, por ejemplo, cuál es la probabilidad de comprar una bicicleta frente a no comprarla. ¿Table? Probabilidad de comprar una, perdón, prop table, casi, prop table de table. Probabilidad de comprar una bicicleta, 0,50, 59. Probabilidad de no comprarla, 0,49. Bueno, al revés, perdón. Probabilidad de no comprarla, 0,50 y probabilidad de comprarla, 0,49. Que ya no tiene nada que ver con el modelo de predicción. Si os da igual que a mí, a la hora de hacer un caso concreto, preocupación 0, lo tenéis aquí puesto. vale será un error mínimo lo que tendréis que decir es aquí me dará un valor entre 0 y 1 que correspondería a la probabilidad de esto vale maría sobre todo si os atranca es en algún punto le ponéis lo que lo que se supone que os tendría que salir y ya está vale vale perfecto alguna duda más de regresión logística de todo esto que hemos hecho déjame nada dos segundos que Enciendo la luz, ¿vale? Porque estoy otra vez como si fuese aquí un fantasma y ahora vuelvo. Vale, ya estoy. Ha sido rápido. Vale, árbol de decisión, más de lo mismo. Os puedo preguntar exactamente lo mismo, ¿vale? Entonces, ¿qué puedo preguntar del árbol de decisión? Pues un poco, ah, bueno, por cierto, en la regresión logística muy probablemente nosotros os demos qué variables tenéis que escoger, ¿vale? Al igual que el árbol de decisión. Compartir el script sin ningún tipo de problema, Jorge, ¿vale? podéis escoger, os diremos que variar es utilizar, por lo tanto también tranquilidad en este punto de seleccionar o seleccionar que es muy probablemente que lo que aparezca ¿vale? tema de modelo de árbol pues un poco lo mismo seleccionaríamos el modelo de árbol que lo tenemos aquí voy un poco rápido por el tema de que tampoco estemos aquí hasta las 8 porque yo a las 8 tengo otra clase ¿vale? cualquier hora que tengáis no os preocupéis si lo vamos mirando ¿vale? entonces para el árbol recordemos el repart el repart plot y copiamos y pegamos porque generalmente suele ser el mismo copiamos y pegamos el mismo modelo que tenemos aquí lo que pasa que en este caso nosotros no queremos un modelo glm queremos un modelo repart así que aquí pondríamos el repart dentro de este modelo repart la familia esto es lo único que hay que cambiar ya no es familia binomial sino que queremos decirle que es una método de clases porque porque si no me va a considerar el 1 y el 0 como números y yo quiero que me lo considere como lo que son códigos vale entonces en este caso cambiaríamos el final y pondríamos mesot class entonces cuando nosotros ejecutamos esto estoy a nos va a dar un árbol de decisión que nosotros podéis poner el samar y si queréis o podemos directamente ya representarlo tendríamos aquí nuestro árbol de decisión recordemos cómo se presentaba el bol de cómo se interpretaba el primer valor es lo que más hay vale entonces al principio lo que más hay es 0,49 es la probabilidad de tener un 1 y tenemos el 100% de los datos. Hemos hecho la distinción únicamente por una columna que es total amount, si total amount es menor que 526, pasimos al caso de que todos son ceros, probabilidad de tener un 1 es un 0, ¿vale? Y si hay un 50% de casos. En el caso contrario, cuando estamos hablando de que total amount es superior a 526, lo que más hay son unos, probabilidad de tener un 1 es un 1 clavado y tenemos un 50% de los datos. ¿De acuerdo? Entonces, ¿qué más os puedo preguntar? Pues un poco lo que hemos hecho aquí. Aquí que hemos hecho una predicción, pues que vamos a hacer una predicción también. Copiamos y pegamos. Y lo único que hay que cambiar es esta parte de aquí que necesitaremos especificar de nuevo que sea un método de clase. entonces ¿vale? y si nosotros vamos a las probabilidades la diferencia del árbol de decisión con la relación logística si lo hacemos así veis que está la probabilidad de que sea 0 la probabilidad de que sea 1 pero lo que realmente queremos es básicamente el tema de si es de que os dé el 0 o el 1 como tal ¿vale? que esto se hacía ¿Dónde ando al final con este? El type class, no el method class, perdona, me he confundido. Si hacéis el type class, aquí ya tenéis este 0 y 1. Sí, se hace train test, pero como vosotros ya lo tenéis hecho de antes, fijaros que vosotros ya lo tenéis hecho de antes para hacer el tema de la regresión logística. Entonces, como estamos haciendo la misma con el bolt de decision, pues no necesitáis repetir regresión train y testeo porque es lo mismo. Exacto, como ya lo habéis hecho una vez, no hace falta repetirlo, con lo cual nos ahorramos este paso. Entonces, tenemos el replart muy importante que ponga método clase y luego tenemos el prof.test muy importante type igual a clase. ¿Para qué? Para que me dé este 0 y este 1, que es lo que yo estoy buscando, que esto me diga exactamente si el valor que predigo es un 0 o si el valor que predigo es un 1. ¿de acuerdo? ¿qué es lo siguiente que voy a hacer? voy a hacer una matriz de confusión copio y pego ¿vale? copio y pego y lo único que tendré que hacer es en este caso clase pret ya es mi prof pret ¿por qué antes distinguíamos entre prof pret y clase pret? porque antes prof pret lo que me daba era un valor entre 0 y 1 y ahora clase pret perdón, ya era prof pret, me da o 0 o 1 ¿le metí menos variables? Vale, ahora miramos el árbol de decisión. Ahora miramos. Entonces, como ya prof.pre tenemos que es o 0 o 1, no hace falta redondearla, por tanto, podemos decir que nuestra clase pret ya es prof.pre, ¿vale? ¿Por qué? Porque ya estamos diciendo que es o bien 0 o bien 1. Así que simplemente generamos esto y hacemos la matriz de confusión y ya lo tendríamos. Un momentito, pasamos de confusión aquí, para que veáis que es exactamente lo mismo. Tendríamos nuestra matriz de confusión y ya podríamos estar hablando igual de la cura, de la cura de, en este caso, sensitividad, especificidad, etc. Tema de, disculpa, me perdí un poco con el árbol. Vi que solo salieron dos niveles en el árbol de decisión. A mí me salieron varios porque había algunas variables. adicionalmente podéis explicar un poquito más análisis de la info de la cual vale aquí depende de lo que tengáis a mí en mi caso sólo me ha contado para dividirles lo que sería el total amount vale claro yo aquí estoy haciendo el total amount del entrenamiento si no has hecho entrenamiento y testeo es probable que te haya salido como más variables o en este caso lo importante es que sepas sobre todo analizarlo vale entonces en este caso depende si te preguntan por el tema de cómo de bueno es el modelo o si te preguntan por calcular la matriz de confusión si te preguntan por métrica de exactitud aquí sí que tendrías que hacerlo el tema de la matriz de confusión vale o sea tendréis que hacer entrenamiento y testeo si no te pedimos nada de entrenamiento y testeo ni nada de cómo de buenos son y de cómo de malos son no no haría falta vale dime paulina no terminaba de responderte la pregunta, pero dime. ¿Cómo estás? Buenas tardes. Sí, todavía me queda un poco la duda porque, o sea, claro, ahí veo en el árbol que sale en función de total amount, pero en el modelo en donde está Rpart están todas esas variables total amount, total children. Pero él considera que sólo necesita este. En tu caso, muy probablemente haya considerado que aparte de total amount, necesitaría a lo mejor otra más en función de otra variable. Puede darse el caso. ¿me explico? pero eso depende del entrenamiento y testeo porque bueno, igual lo hice ajá, lo hice pero me salió bastante grande en realidad el árbol para en comparación puede ser, no os preocupéis, lo que sé que quería explicaros porque alguno de vosotros me comentasteis el tema de que salía un árbol muy muy grande que claro que visualmente era imposible de entender ¿sí? puede que fuese tu caso Paulina bueno, así lo pude entender pero pasándolo igual a un PDF pero entonces no te preocupes entonces hay una forma os aconsejo siempre representarlo porque al final es casi lo más sencillo pero si vosotros hacéis si vosotros recogéis este modelo y lo pintáis tal que así y le dais a RAM efectivamente, ¿vale? aquí a mí me sale muy pequeñito porque solo tengo dos pero aquí os va diciendo mira, tienes el primero que es la primera raíz es la primera caja y te da las probabilidades de tener un 0 y las probabilidades de tener un 1 luego, el segundo cajita que ocurre es cuando el total amount es menor que 526 estamos en la caja azul oscuro y te da aquí los valores te dice, oye, tienes 7458 casos lo que más hay son ceros luego la probabilidad de 1 es 0 y luego además tenemos pues esto de 1 y 0 ¿vale? y si vais al 2 o si vais a la cajita verde, ¿qué cajita verde es? cuando total amount es mayor o igual que 526,23 tendríais 28 casos de de 1 si no recuerdo mal y aquí tendríais la probabilidad de 0 y la probabilidad de 1 ¿vale? entonces igualmente si a alguien le sale algo muy muy difícil siempre puede copiar y pegar esto un poco mirando cuáles son las casuísticas que al final lo tenéis aquí lo que son las reglas vale se entiende si nos preguntan cuál sería mejor modelo tendríamos que comprar a que tenga mejora cura si sí efectivamente el que tenga mejora cura si he dicho esto entendido que os puedo preguntar os puedo preguntar lo mismo y se hace exactamente Exactamente igual. Lo mismo que os he preguntado aquí. ¿Vale? Entonces, vamos a copiarlo y pegarlo. Es lo mismo, por eso lo digo. Esa última matriz, ¿cómo la hizo? ¿Esta de aquí? La del árbol. Esta de aquí. Las probabilidades del árbol, sí. Los distintos niveles, sí. Vale. El modelo que hayas hecho en el repart, simplemente lo pones y lo visualizas. y al final te sale esto vale, os puedo preguntar el mismo tema de predecir no hay ninguna sorpresa, es copiar y pegar lo que hayáis hecho aquí vale, type igual a class type class, vale, entonces aquí haríamos type class lo ejecutáis y os saldrá el 0 y el 1 vale a ver, efectivamente por la discusión que estáis arriba, efectivamente cuantas más variables metáis hay muchas más posibilidades de que el árbol o salga más o salga menos, ¿vale? Pero también tiene que ver con cómo hacemos el entrenamiento y el testeo, cuántas, qué filas seleccionamos para una cosa y qué filas seleccionamos para otra, ¿vale? Lo importante es que sobre todo sepáis entender y analizar el gráfico, el árbol que os sale, ¿vale? Por el tema de Paulina y Alejandro. Y aparte puede ser que yo haya alguna variable que vosotros hayáis añadido que yo no lo haya añadido. ¿El árbol no tiene matriz de confusión? Sí, porque es un algoritmo de clasificación, pero lo tienes que calcular de la misma manera que lo has hecho antes. Lo único que aquí no necesitas, como en la reflexión logística, hacer el redondeo de 0,5, 1, lo que sea, porque realmente ya tienes el valor. Ya tienes 0,1. Entonces, es igual, pero no hacemos la parte del redondeo. ¿Sí, Alejandro? ¿Se entiende? Vale, clasificación. Algoritmos de clasificación. que son regresión logística, árbol de decisión, siempre, siempre, siempre tiene matriz de confusión. ¿Vale? Todo árbol de decisión, todo algoritmo de clasificación, regresión logística y árbol de decisión y todos los que haya, siempre tienen matriz de confusión. ¿Vale? Vale. Dicho esto, ¿alguien tiene alguna duda del árbol de decisión? Vamos a la última pregunta ya que es el clúster. Entonces se termina Sabiendo lo de matriz de confusión Con el código Confusion Matrix ¿Verdad? Exactamente, aquí con Confusion Matrix Acabarías teniendo esta matriz de confusión Lo mismo Positive Class Igual Es exactamente lo mismo Solo que cambiarán los valores que tengáis aquí Y los valores de acuracidad, sensibilidad Y especificidad La única diferencia entre esta matriz de confusión y la matriz de confusión de la retención logística es que la retención logística no te sale como tal 0 y 1 exacto, así que tienes que aproximarlo previamente. ¿Vale? Perfecto, y profe, si te pregunta ¿Cuáles son las variables más importantes A la hora de, no sé, por ejemplo En este caso de realizar una compra Sacamos la variable important ¿No? Efectivamente, súper buena pregunta Y sí, exacto, ¿vale? Si no recuerdo mal Es el variable importance ¿Vale? Que esto vendría siendo la importancia de cada una de las columnas. A ver, a ver, que veo que estáis... El árbol es posible que salga. Es muy probable. Regresión logística, árbol y clasterización son, vamos, a un 80% de posibilidades. El árbol es lo mismo. No os preocupéis por el árbol. El árbol es lo mismo. ¿Qué os asusta del árbol? Es lo mismo. Lo único que hacéis es cambiar aquí el GLM por el RPath y cambiar aquí el method, en vez de el type response y el otro, el family binomial, le metéis un method class. Pero ya está, es lo mismo que la regresión logística. El predict es igual, solo cambia que estáis haciendo el class y la matriz de confusión es la misma, solo cambia que no tenéis que redondear. Y la probabilidad es lo mismo. Y vale, nos puede confundir un poquito más el gráfico, no os digo que no, pero al final se entiende. Pensad que al final es lo mismo que regresión logística, solo hay unas pequeñas cosas diferentes, pero es lo mismo. Dime, Alejandro. Pregunta que me imagino que puede caer en el examen Dime Por qué ha caído las actividades Dime qué modelo Hace el Logística y luego Hace el de árbol Dime qué modelo es mejor Comparamos el Acuracy Y chao Miráis aquí, Acuracy ¿Cuál tiene mayor Acuracy? Este Ya está, este es mejor Porque tiene mayor Acuracy y luego lo que ha comentado María Alfina las variables más importantes exactamente ¿se entiende el árbol de decisión? le tenéis un poco de miedo pero de verdad que es lo mismo o sea, en cuanto a código es lo mismo, yo entiendo que en cuanto a representarlo lo veis gráficamente pero se entiende, o sea, para un lado es sí entonces tenéis lo que más ocurre, la probabilidad ¿vale? ¿se entiende sí o no? de acuerdo Leticia, ¿se entiende? un poco menos nerviosa cuando lo veáis, de verdad mirad la última actividad que habéis hecho ¿os han puesto ya las notas de la última actividad? sí, vale ¿qué tal han sido las notas? ¿meme o bien? bien, vale, quedaos con eso lo habéis hecho miles de veces De acuerdo al examen, simplemente se pone un enunciado un poquín distinto. Lo único nuevo que hemos visto, bueno, que hemos repasado hoy, que sí que lo habéis visto o os lo habían comentado, pero lo hemos repasado hoy, es simplemente esa parte de predict. Pero el resto, si habéis tenido buenas notas en la entrega, preocupación cero, ¿vale? Nada. Vale, vamos a clasterización, que ya es lo último, que os estoy repitiendo. ¿Podéis repetir lo de la variable importance sin mirar la que tiene mayor valor? si la variable importance lo único que te está diciendo es cómo afectan o cuál es la importancia de tus variables en este caso la que más afecta es total amount, seguido de number cards owned seguido de total children, seguido de educación seguido de age y seguido de country and code ¿Vale? ¿Cree Alejandro que sigues metiendo la mano de la vez pasada o tienes otra duda? Paulina coméntame Sí, yo tenía una consulta que bueno es un poco más para entender ya la parte del análisis más que las funciones y todo es por el tema de que como en este trabajo en esta actividad había que elegir las variables que se podían utilizar estaba como libre está también en este caso que estamos haciendo ahorita seleccionado el total amount entonces más para entender ya como analista mismo porque se le dice total amount es una buena variable para usar como para trabajar con predicciones Vale, buena pregunta, ¿vale? Muy buena pregunta. Para esto nos vamos a volver un momento a la correlación, pero esto es información extra, ¿eh? Es decir, esto para el examen no os preocupéis, es información completamente extra. cuando yo he visto aquí la correlación ¿vale? yo he visto que total amount con buy purchase está muy muy relacionada ¿vale? cuando la relación es muy muy muy muy grande ¿de acuerdo? lo que puede pasar es que haya entre ellas alguna relación que me impida ver algún tipo de factor más que haya como que más care al resto de variables ¿vale? entonces aquí es un poco tanto la correlación como tu perspectiva como analista del negocio la perspectiva que tú tengas si tú sabes que está que afecta directamente a lo mejor te interesa quitar total amount porque a lo mejor hay gente es a saber si compran una bicicleta en función de la edad del número de niños porque tú quieres ver otras otras variables que si añades una variable como el total amount puede parecer puede pasar lo que ocurre en este árbol que diga pues como total amante está tan relacionada con en este caso la variable by por chase pues me quedo con total amount y no los demás y entonces no tienes esa relación que te puede interesar con la edad con el número total de niños con el con el tema de si tiene piso no tiene piso pero esto ya depende mucho de tu como analista de negocio donde quieres la relación vale dicho esto vamos a la caracterización y ya con esto terminamos vale entonces sí que es cierto que una cosa que habéis dicho que me ha gustado es el tema de oye, y realmente, ¿qué variables tengo que seleccionar? ¿Cómo puedo hacer la selección de variables? Etcétera. Generalmente os lo comentamos, ¿vale? Por lo tanto, tranquilidad en este punto, ¿de acuerdo? Solemos especificároslo. Si no os especificamos nada, seleccionad las que queráis y añadid una argumentación de por qué habéis escogido esas y ya está, ¿vale? ¿Se entiende? Os veo con miedo. pero bueno tranquilidad vale seguro que lo repasáis y lo haréis súper bien el examen de verdad que tengo dudas cero entonces vamos con la clasificación que era el último ejercicio bueno el último ejercicio era la serie temporal pero ya más menos lo vimos con anterior y vamos ahora con el tema de la clasificación que me interesa para el examen entonces para la clasificación que tenemos que hacer primero seleccionar variables numéricas segundo el método del codo o el nb cluster tercero aplicar la clasificación cuarto interpretar esta clasificación en sus cuatro pasos entonces nosotros vamos a poner datos clasificación para ir rápido yo lo que voy a hacer es seleccionar dólar vale dólar dólar dólar si de perdón de plis por tanto mayor porcentaje mayor selecciono where is numeric vosotros si queréis utilizar una columna más lo que podéis hacer es simplemente transformar variables de factor a numérico vale tenemos ya los datos clasificación que voy a hacer ahora el método del codo o el nb cluster el que queráis vale voy a hacerlo con el nb class seleccionamos y luego después del nb class lo que queremos hacer es aplicar entonces en nb class aplicó sobre el conjunto de datos clasificación si tenéis alguna reunión o cualquier cosa podéis desconectados y esto está grabado por si acaso que lo repito todas las veces del mundo pero que de verdad es porque es es así vale entonces tenemos que poner el sobre el mínimo min nc si no recuerdo mal es decir que analice entre dos clústeres y entre por ejemplo diez clústeres y el método que quiero que utilice es el caminos recordad que En el caso de la clasificación, no hacemos entrenamiento y testeo. Todo va. He escrito mal comings porque me pone method. Perfecto. Esto lo está ejecutando y llegará un momento en el cual nos dé el resultado. Ocurre que tarda muchísimo. vale, mira pues me viene bien tarda mucho, vale va a estar tardando un montón, que pasa que aunque yo escriba aquí o escriba aquí, no me va a ejecutar nada porque está ahí pensando entonces fijaros que tenemos aquí un botoncito rojo, vale le pincháis una vez que no me hace caso, le pincháis varias veces hasta que consigáis esto vale R no está respondiendo por lo tanto se tiene que interrumpir, no hay problema le damos a que sí ¿Cuántas veces lo habéis dado? Pues cuántas veces va a salir este mensaje No pasa nada Le damos a ok Le damos a aceptar Actualizará todo ¿Vale? Así que os aconsejo verlo antes No, no, no, tranquilo No, en principio no Si lo tenéis futuro para tal ¿Vale? Y ahora lo único que tenemos que hacer Es como ahora sí que No tendrá nada en memoria Habrá que volverlo a ejecutar Desde el inicio ¿Vale? Entonces 1, 2, 3, 4, 5, 6 ejecutáis todo con mucho cuidado porque yo a veces ejecuto todo y vuelvo a ejecutar la que me ha dado el problema y entonces estamos complicados, ¿vale? y no me ha funcionado esto, no pasa nada si no me ha funcionado esto, nosotros seleccionaríamos la otra que es el fbiznclust, no recuerdo mal library fbiz fbiz no fbiz siempre se usa, a ver, fbiz déjame que compruebe aquí está era el fbiz en el class, ¿verdad? fbiz cluster, sí, yo creo que es fbiz cluster pero no me lo recomienda y me resulta rara eso, perdón, gracias, facto extra y luego la función es eso entonces tenemos la librería facto extra y luego aquí tendríais ya la función fbiz cluster, efectivamente pondríais vuestro conjunto de datos que es dato cluster, en este caso vuestro método que es el método camins y tendríamos que poner porque así nos daba una que no sabíamos específicamente cuál sería y lo único que teníamos que especificar era que tenía que ser con el WSS es posible que esto me dé un error porque datos cluster datos clusterización, esto la primera vale, y el orden de los factores efectivamente, el orden de los factores afecta, entonces tienes que poner exactamente un momento Vale, tenemos una pregunta de Paulina ¿A qué pregunta de Paulina te refieres? Para poder ayudarte, Alejandro Me he quedado un poco loco, pero creo que ya lo entiendo con lo de la pregunta de Paulina de, vale, pues si ya dos variables correlacionan o sea, si la variable bicicleta comprar bicicleta positivo correlaciona mucho con lo que sea pues ya está pues esa es la que me predice la venta pero no no por según esa fue la pregunta que creo que hizo o no esto es lo que hemos hablado del total amount puede ser es que me he quedado ahí atrapado con eso. Vale, la pregunta de Polina ha sido ¿por qué escogeríamos o sea, en qué base nos escogeríamos el total amount o no escogeríamos el total amount? Y mi respuesta ha sido depende de qué quieres tener las relaciones. Vale, por ejemplo, total amount tienes un gasto total pero como se relaciona tanto con el tema de si compras una bicicleta si tú pones total amount te máscara, o sea, te te hace más invisible como afecta en el otro, el resto de variables. Entonces, si tú quieres porque quieres saber cómo afecta la edad pues a lo mejor no pongas total amount porque no te va a dar una relación del resto se va a centrar en total amount que era el gráfico que me había dado a mí Vale, pues entonces ella ha hecho otra pregunta pero yo en mi cabeza me he inventado otra eso es lo que ha pasado Entonces mi pregunta es ¿por qué? Si ya tengo una correlación y ya lo estoy Bueno, he pasado esto porque se lo preguntaba a Gemina y mientras hablábamos que es, oye si ya si la variable predictora, es decir si la edad pues se correlaciona mucho con vender bicicleta igual así, y hay una correlación positiva muy grande, pues ya está yo ya sé que esa es la la variable predictora pero por lo que estoy leyendo no, porque porque por lo que me vas a decir no sabes ni cómo o sea, sabes cuánto afecta pero no sabes cómo afecta, es decir, no sabes exactamente qué fórmula matemática, entre comillas, puede modelizar esa relación. No sabes si hay otros patrones y generalmente cuando hacemos Machine Learning queremos saber patrones que están ocultos, que nosotros no vemos a simple vista. Entonces, aunque la correlación sea cero, no siempre implica, o sea, sí que implica que son independientes, A lo mejor, aunque sean independientes en la mayoría de las ocasiones, sí que en algunas casuísticas puede que afecte. Entonces, el tema de correlación no implica causalidad, ¿cierto? Efectivamente, Paulina. Entonces, pasa un poco esto. Sí que tiene mucho sentido que si tú sabes la correlación es muy probable que haya esa relación y que me vaya a salir, pero no tiene por qué siempre en todas las ocasiones. o a lo mejor hay algún patrón oculto que tú no estás viendo y que haciendo estos algoritmos puedes verlo mucho más. ¿Se entiende? Sí. ¿Más o menos? Vale, perfecto. Se entiende mejor. Vale, haremos todo esto, lo repasaremos también en próximos cuatrimestros aquí. Preocupación cero. Ahora mismo lo que no tengáis, no os preocupéis. vale el tema de datos clasificación tenemos que hacer lo que vendría siendo la selección de las variables en este caso yo me quedaría con las variables numéricas y haríamos el método del codo y esto perdona hace que eso son mucho tiempo ya haber canjando la novitos clases de blf de ft de timales está dando problemas con este tema porque datos bicicleta no es el que estamos utilizando y habíamos hecho una limpieza si no recuerdo mal habíamos hecho un tren un test pero esto necesitamos el de antes que era datos bicicleta selección datos bicicleta selección a ver y creo que me va a dar un problema también pero bueno podemos comparar los datos bicicleta selección esto probablemente sí que me dé un problema efectivamente y creo que es por las variables que son de tipo factor a ver, str datos bicicleta selección tenemos varias variables que son de datos bicicleta selección y si nosotros hacemos esto y le plantamos aquí un str esto sí que me está seleccionando yo las variables numéricas vale, espera que tengo dos preguntas entonces en principio aquí tendríamos todo variables numéricas y os debería funcionar porque ahora nos funciona he puesto algo mal segurísimo momento que he puesto mal datos select where is numeric vale sí y yo qué he hecho datos es que no sé yo creo que ya estoy viendo doble o triple pero me da cinco segundos datos bicicleta vale datos bicicleta me quedo con las variables que son numéricas me quedo con las variables que son numéricas hasta aquí no debería haber ningún tipo de problema vale entonces ahora voy con el library facto extra que vendría siendo la librería que necesito para hacer el fbiscluster y vale porque ese fbisnbcluster vale el fbiscluster es otro distinto así que me funcionará perfecto perdona hace que yo que ya la cabeza me baila un poco pero bueno tenéis el fbisncluster en este caso haríamos el método del core que no me funciona tampoco este que no me da el valor este y no sé qué es capaz de identificar no pasa nada lo volvemos a reiniciar y decimos que no habéis podido ejecutarlo por un tema de tiempo de memoria y por lo tanto lo que haría y sería simplemente considerar un caso concreto vale diréis por tiempo de memoria no ha terminado de ejecutar para el resto del ejercicio supongo por ejemplo que son tres o que son dos vales Gracias. Hola, hola, hola, ¿se me escucha ahora o no? Vale, perdona, se ha colgado el R, ¿de acuerdo? Efectivamente porque probablemente ha sido suficiente, ¿vale? Entonces, en el examen nos pasará esto. Sí, ahora está cansado. Totalmente, ¿vale? Totalmente. Entonces, ¿cómo nos ha pasado esto? Repetimos, ¿qué os dará? Os dará una gráfica que sea de este estilo, ¿vale? Más o menos. Vamos a poner una gráfica de este estilo, ¿vale? Generalmente, lo bonito o lo ideal es que fuese de una gráfica de este estilo. ¿Y dónde estaría el método del codo? Estaría aquí, ¿vale? Aquí, por ejemplo. Exactamente, lo dibujas así y lo explicas. Por ahí iba mi pregunta anteriormente, para que estudieces las variables numéricas, ¿no voy a transformar las variables numéricas que han estado utilizando? efectivamente, ¿vale? lo podéis, si no podéis cambiarlo tenéis en el tratamiento de datos en el bloque de tratamiento de datos tenéis como cambiaría de variable factor a variable numérica, que es ponerle un as.numeric o sea, por poder hacerlo podríais hacer, ¿vale? pero bueno, si no podéis simplemente seleccionarlas gracias, María porque si no, me da a mí que me va a dar los siete males ejecutándolo por aquí, ¿vale? entonces nada, simplemente ¿qué haríamos? En este caso, la gráfica que me la ha pasado María, pues tendríamos que seleccionaríamos o bien dos o bien tres, ¿vale? Son los que parecen más parecido el codo. ¿Qué os pasa como a mí y no os termina de ejecutar? Problemas cero. Hacéis una especie de dibujito así, ¿vale? Y con el ratón, si podéis, ¿vale? Y lo que haríais sería, o bueno, explicar que sería como una especie de curva que fuese hacia abajo y poner que explicaríais que donde aparece la forma del codo sería donde escogeríais el número de clusters. Vamos a considerar para este ejercicio que, por ejemplo, fuese 3. Entonces, ¿qué haríamos? Diríamos que el K óptimo para este ejercicio vamos a considerar que es 3, pero esto lo tendréis que explicar. Volvemos a ejecutar absolutamente todo. Yo tengo muchas preguntas. Vale. Y aquí digo, vale, pues suponemos que sería 3, ¿vale? Entonces, si es 3, ¿qué tendría que hacer ahora? Tendría que hacer el K-means, ¿de acuerdo? De que en este caso lo que haríamos sería de nuestro conjunto de datos, datos clasterización, ¿vale? Y que tendríamos que aplicarle en este caso el K óptimo que es 3, ¿vale? Entonces, nosotros ejecutaríamos esto. Bueno, claro, esto no lo he aplicado ahora y haremos esto de aquí, ¿vale? Vale, y aquí ya tendríamos el resultado. En examen no tendremos, no, en examen probablemente termine, ¿vale? Pero si alguien no lo determina, que lo escriba y haga un poco lo que hemos hecho ahora, ¿vale? Entonces, de aquí, este sería mi resultado, pero yo os puedo pedir que lo interpretéis, ¿vale? ¿Qué quiere decir? Que lo interpretéis bien, que expliquéis un poquito lo que vendrían siendo estas variables, bien lo que habíamos dicho de hacer un árbol de decisión rápido para poder mirar. Termino árbol de decisión y te comento Alejandro. Entonces haríamos esto, lo único que aquí tendríamos que hacer clasterización dólar y pondríamos en este caso el clustering vector. Y luego en estas columnas tendríamos que poner todas las columnas que ha utilizado nuestro conjunto de datos, que vendría siendo, en este caso sería de datos, clasterización. ¿Qué estamos haciendo? Estamos seleccionando todas las variables, más datos, clasterización, dólar y pondréis bike purchase, más datos, clasterización, dólar y pondréis customer ID, aunque este ya os digo que en principio lo ideal sería eliminarlo, pero bueno, clasterización. Dólar, personal ID, más datos, clasterización Dólar, estaríamos hablando del age, más datos, clasterización Dólar, estaríamos hablando del total children, más datos, clasterización Dólar, ¿vale? Y estaríamos hablando del homeowner flag, más datos, clasterización dólar y estaríamos hablando del number cars ya estamos por el number, vale más datos, clasterización dólar y tendríamos aquí la última variable que al final incorporamos que es esta recordemos el método class, el data ya no es, ya lo podemos eliminar porque como tenemos una parte que viene de la clasterización y ya lo estamos indicando aquí de que viene cada una entonces no necesitamos poner ese data lo ejecutamos un momentito vale y que el library.rpart vale y este tengo que guardarlo como un clusterización, perdonad que estoy intentando hacerlo más rápido y al final se me van olvidando cositas si no, no me lo va a salir vale, clusterización $clustering dólar cluster va a ser no clasen efectivamente dólar clúster perdonad de que ando intentando hacerlo rápido pero tampoco gastaros mucho tiempo y al final es que pasa entonces hacemos el reparto de modelo vale y aquí tendríamos nuestro caso no alguna library de reparto tampoco me va a reconocer nada y hacemos esto y tendríamos aquí nuestro árbol de decisión en este árbol de decisión ahora te doy la mano la palabra en este árbol de decisión si os dais cuenta tenemos clúster 1 clúster 2 clúster 3 y fijaros que está un poco más mezclado de lo que solemos tener vale entonces empezamos con que detecta el casto meridi que esta variable en principio la tendríamos que haber eliminado vale pero si no detecta los que son mayores iguales que este casto id iría a ese primer bloque que es como de color salmón y luego aparte lo ha clasificado por el personal y que son dos variables que la verdad no deberían no deberíamos haber utilizado pero bueno que en este caso salió así pero por favor el casto me ha ido y el y el personal y no la seleccionemos vale pero sería un poco aquí tendréis los clases en este caso como os aparece que el cláster 3 está aquí y el cláster 3 hasta aquí que serán pues el cast de 3 serán aquellos en los que el Customer ID sea menor que 15 por elevado a la 3, y menor de 18 por elevado a la 3, y que tenemos el Person ID que es menor o igual que 5.852, y también los que sean Customer ID mayores que 18 por elevado a 3 y el Person ID mayores que 11 por elevado a 3, porque en este caso están en dos partes. Dicho esto, Alejandro, hazme la pregunta, perdón gracias, perdona nosotros en la actividad esta, además de hacer esto hicimos una tabla donde poníamos cada uno de los grupos del clúster, por ejemplo, si son cuatro el A, B, C y luego como son variables numéricas, pues hicimos una media ¿no sería esta una manera correcta de esto de esto de aquí. Exacto, exactamente. Esto sería una ya lo has hecho y no me he enterado. No, no, no, no, no, no. Es una forma de interpretarlo, ¿vale? Lo que pasa es que este toque es mucho más visual y te da un conocimiento mucho mayor en hacer el árbol de decisión después. Pero si veis gustos de tiempo podéis perfectamente analizar estas medias, pero tenéis que analizarlo, ¿vale? O sea, explicarlo, tipo, pues el grupo 1 no sé qué, no sé cuánto. Y el árbol igual, tendríamos que decir, pues, tal, tal, tal, tal, tal, tal. Exacto, lo que pasa es que el árbol suele ser mucho más fácil, porque aquí sí que es cierto que, por ejemplo, el byte, me refiero, el byte pool 6 tiene los valores muy parecidos. Entonces, el árbol, si lo hubiese hecho bien y hubiese quitado las variables que tenía que haber quitado, a ver, datos, clasterización. Le voy a hacer un datos, clasterización. No, no, tranquila, tranquila. si hacemos select si alguien necesita desconectarse, de verdad problemas cero, de verdad customer ID y hacemos un, este sería el primero para quitar esta, quitamos también el person ID porque es que me están distinguiendo todo vale, de acuerdo ya os colgaré esto, o sea que no os preocupéis los que tengáis que iros, yo aunque me quede sola no es mi primera clase sola o sea que no hay ningún tipo de problema cuando hagamos la clasificación en este caso sí que el modelo bueno claro aquí tengo que quitar también este customer id que le había puesto por aquí y este personal perfecto y ahora sí que el modelo ya por ejemplo será mucho mejor vale si os dais cuenta de acuerdo en el sentido de que por ejemplo ahora nos lo distinguen por total amount vale o por las variables que tengáis entonces es mucho más fácil verlo aquí porque vemos exactamente en qué valor ha hecho la distinción entre irse al clúster 1 o irse al clúster 2 o al clúster 3 mientras que si lo hacemos por las medias a veces es más complicado interpretarlo ¿de acuerdo? me queda únicamente perdonadme pero sí que he querido sobre todo el tema de examen el tema de las series temporales ¿alguien ha tenido alguna duda con la serie temporal? ¿queréis que veamos la serie temporal? ¿o lo podemos obviar? un poco comentadme Perfecto, lo vemos muy rápido Vamos a la serie temporal, tenemos los datos Venta Venía en el ejercicio que os tenéis que dar Con la primera pregunta y la parte de las Y la parte de las fechas ¿Vale? Sí, complico un poco, normal Entonces hacemos aquí un datos ventas Entonces en este caso tenemos que seleccionar El que, pues seleccionamos La columna de las fechas Que te digo ahora mismo, cual era con un str de datos venta y así lo copiamos tal cual. Vale, tenemos que sería el order date por un lado, ¿de acuerdo? Y luego teníamos por otro lado que tiene que ser este sales, madre mía, punto, punto, punto, dos, que espero que no me dé problemas. Vamos a escribir mejor sales. Vale, para que me lo diga él. Vale, entonces ya tenemos datos venta, pero esto no es una serie temporal. Recordad que para series temporal tenemos que especificarle que es una serie temporal. Lo que sí que yo os aconsejo es que hagáis un view de datos venta y veamos un poco qué tipo de o qué pinta tiene. Tenemos una pinta que va a una fecha completamente diaria y luego tenemos un conjunto de datos. Además la fecha es diaria de verdad porque no es que tengamos un mes del día o un día del mes, sino que tenemos el 1 de junio, 2 de junio, 3 de junio, etc. Entonces, ¿qué haríamos? Lo que tenemos que hacer es básicamente, vamos aquí para que lo veáis, que es básicamente lo mismo, abrirse la parte de series temporales. lo que tenemos que hacer es con el TS definirlo como una serie temporal. Es cierto que lo mejor para estos casos sería haberlo hecho con un ZOP, pero no os explicamos el ZOP, por lo tanto, no habría falta. Lo que tenéis que hacer es un poco este TS, lo que pasa es que en este caso tendremos frecuencia diaria. Entonces, vamos a poner TS. En este caso sería nuestra serie temporal. Sería nuestros datos venta. La columna que me interesa es la columna de Sales. Y, bueno, de hecho, primero vamos a hacer, para que veáis que probablemente a lo mejor habéis dicho, no, voy a probar a hacer CS de datos de venta. A ver qué pasa. Bueno, pues probemos a CS de datos de venta. Fijaros que no se queja. Y si hacemos plot TS de serie temporal, pues tenemos una cosa rara. ¿De acuerdo? Entonces, ¿por qué? Porque nos hace la columna de order date y la columna de sales como si fuesen dos series temporales diferentes, ¿vale? Entonces, otra opción que a lo mejor se os ocurre es datos venta, haber puesto aquí el sales y luego la parte del inicio haber puesto datos venta, dos puntos, el order date, ¿vale? Esta podría haber sido otra que se os hubiese ocurrido. Entonces, si lo hacéis, pues os daríais cuenta de que esta tiene un poco mejor pinta, pero en el fondo siguen siendo las dos representadas una respecto a la otra, ¿vale? Así que lo importante es hacer el sales y luego aquí vamos a poner el start. ¿En qué año empezamos? Si vamos a datos 20, empezamos el 31 de mayo de 2011, mayo que es 05, el 31. Y tenemos que poner la frecuencia, que en este caso es frecuencia diaria, así que 365, aunque no es lo mejor. vuelvo a repetir existe la librería zoc es muchísimo mejor es por comas no aprendo en la sede delante vale con este ya no servirá vale entonces ya tenemos nuestra serie temporal bien hecha lo único que tenemos que hacer es el modelo a rima entonces aquí cuando aplicáis el modelo a rima lo que hacéis es una descomposición no necesitáis hacerla y en este caso tampoco poco simplemente tenéis que hacer la predicción general con el modelo auto arima muy probablemente la predicción que os daría sería bastante rara no preocuparse es completamente normal que os den es que os de rara porque no es el mejor modelo ha habido y por la frecuencia queríamos dos meses que venía siendo 60 días vale entonces ejecutamos ejecutamos ejecutamos perdón tenemos que hacer la librería no se nos olvide porque se nos va a dar que no existe la librería en este caso era la librería esta fortuna les hacemos librería forecast y si hacéis aquí ejecuta ejecuta ejecuta ejecuta es y hacéis la plot y bueno cuando termine pues ya estaría la predicción como era solamente dos meses probablemente la parte de representación pues quede muy muy pequeña pero sería un poco el resultado si os dais cuenta se está ahí pensando tardará un poco lo suyo vale pero para la parte de la serie temporal lo que se exigía es básicamente a esto hay alguna duda en este aspecto alguna cuestión algún comentario queda claro que para el examen sobre todo regresión logística y árbol de decisión y clasificación y filtros y columnas y nulos se entiende y el prop table y el table sobre todo esto vale alguna duda alguna cuestión pero por la clase de hoy que ha sido larga pero bueno y al menos lo hemos podido hemos podido entender algunas de las cosas vale y hemos repasado un poco lo que os podría salir no os preocupéis muchísimas gracias os saldrá súper bien para mí un placer haber dado clase creo que esta es nuestra última clase si no recuerdo mal así que para mí un placer me van a sorprender las notas porque vais a sacar súper buena nota, estoy segurísima así que tranquilidad ¿vale? sobre todo tranquilidad y argumentar muy bien las cosas y lo haréis perfecto ¿de acuerdo? muchísimas gracias ¿vale? y nos vemos estoy segura el próximo cuatrimestre ¿vale? adiós, muchísimas gracias nada

datos_num <- diabetesf %>% select_if(is.numeric)
datos_num
# estaría bien agregar a la chuleta el elegir sobre variables numércias
datos_num <- diabetesf %>% select_if(is.numeric)
cor(datos_num)
# estaría bien agregar a la chuleta el elegir sobre variables numércias
datos_num <- diabetesf %>% select_if(is.numeric)
cor(datos_num) * 100
# estaría bien agregar a la chuleta el elegir sobre variables numércias
datos_num <- diabetesf %>% select_if(is.numeric)
cor(datos_num)
# estaría bien agregar a la chuleta el elegir sobre variables numércias
datos_num <- diabetesf %>% select_if(is.numeric)
cor(datos_num$Outcome)
# estaría bien agregar a la chuleta el elegir sobre variables numércias
datos_num <- diabetesf %>% select_if(is.numeric)
cor(datos_num)
as.factor(diabetesf$Outcome)
diabetesf$Outcome <- as.factor(diabetesf$Outcome)
set.seed(123)
split <- createDataPartition(diabetesf, 0.8, 0.2)
set.seed(123)
index <- createDataPartition(datos$Outcome, p = 0.8, list = FALSE)
set.seed(123)
index <- createDataPartition(datos$Outcome, p = 0.8, list = FALSE)
diabetesf$Outcome <- as.factor(diabetesf$Outcome)
set.seed(123)
index <- createDataPartition(datos$Outcome, p = 0.8, list = FALSE)
set.seed(123)
index <- createDataPartition(diabetesf$Outcome, p = 0.8, list = FALSE)
# 3. Dividir con corchetes: index = train, -index = test
train <- datos[index, ]
set.seed(123)
index <- createDataPartition(diabetesf$Outcome, p = 0.8, list = FALSE)
# 3. Dividir con corchetes: index = train, -index = test
train <- diabetesf[index, ]
test  <- diabetesf[-index, ]
# 4. Verificar tamaños
nrow(train)  # ~80% de los datos
nrow(test)   # ~20% de los datos
modelo_glm <- glm(Outcome ~ ., data = train, family = binomial)
summary(modelo_glm)   # Ver variables significativas (asteriscos)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
#pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
#pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_prob
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
cconfusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
library(caret)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
cconfusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
library(caret)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
# Matriz de confusión (necesita factores)
#confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
confusionMatrix(as.factor(pred_glm), as.factor(test$Outcome))
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
#rpart.plot(modelo_arbol)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweek=1.3)
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 1.4)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 1.1)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 0.8)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 0.6)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 0.3)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 0.5)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.3, cex = 0.4)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.4, cex = 0.4)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.4, cex = 0.3)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.2, cex = 0.3)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.8, cex = 0.3)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.8)
# Importancia de variables
modelo_arbol$variable.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.6)
# Importancia de variables
modelo_arbol$variable.importance
confusionMatrix(as.factor(pred_arbol), as.factor(test$Outcome))
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(Outcome ~ ., data = train, method = "class")
# Visualizar
rpart.plot(modelo_arbol, tweak=1.6)
# Importancia de variables
modelo_arbol$variable.importance
pred_arbol <- predict(modelo_arbol, newdata = test, type = "class")
confusionMatrix(as.factor(pred_arbol), as.factor(test$Outcome))
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(caret)
library(dplyr)
library(glue) # para hacer fstring
getwd()
diabetes <- read.csv("/Users/alejandrocamposlamas/Proyectos/ACTIVIDADES_UNIR/Estudiar_R/datasets/diabetes.csv")
# cuántas filas y columnas tienes
glue("el número de filas es {nrow(diabetes)}")
glue("el número de columnas es {ncol(diabetes)}")
# Qué tipo de dato tiene cada variable
glue("Aqui se pueden ver el tipo de variables {str(diabetes)}")
diabetes <- read.csv("diabetes.csv")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(caret)
library(dplyr)
library(glue) # para hacer fstring
getwd()
diabetes <- read.csv("/Users/alejandrocamposlamas/Proyectos/ACTIVIDADES_UNIR/Estudiar_R/datasets/diabetes.csv")
# cuántas filas y columnas tienes
glue("el número de filas es {nrow(diabetes)}")
glue("el número de columnas es {ncol(diabetes)}")
# Qué tipo de dato tiene cada variable
glue("Aqui se pueden ver el tipo de variables {str(diabetes)}")
diabetes <- read.csv("diabetes.csv")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(caret)
library(dplyr)
library(glue) # para hacer fstring
getwd()
diabetes <- read.csv("/Users/alejandrocamposlamas/Proyectos/ACTIVIDADES_UNIR/Estudiar_R/datasets/diabetes.csv")
# cuántas filas y columnas tienes
glue("el número de filas es {nrow(diabetes)}")
glue("el número de columnas es {ncol(diabetes)}")
# Qué tipo de dato tiene cada variable
glue("Aqui se pueden ver el tipo de variables {str(diabetes)}")
knitr::opts_chunk$set(echo = TRUE)
library(caret)
library(dplyr)
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("datasets/diabetes_dataset.xlsx")
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
data
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(data$Glucose =! 0 | data$BloodPressure =! 0)
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(Glucose != 0 | BloodPressure != 0)
#index <- createDataPartition(data$Glucose , )
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(Glucose != 0 | BloodPressure != 0 | age != 0)
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(Glucose != 0 | BloodPressure != 0 | Age != 0)
#index <- createDataPartition(data$Glucose , )
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(Glucose != 0 | BloodPressure != 0 | Age != 0)
# creamos el índice a partir de la variable objetivo
index <- createDataPartition(data$Glucose, p=0.8 )
train <- data[index, ]
library(caret)
library(dplyr)
library(readxl)
data <- read_excel("../datasets/diabetes_dataset.xlsx")
data <- data[ ,-1]
set.seed(123)
data <- data %>% filter(Glucose != 0 | BloodPressure != 0 | Age != 0)
# creamos el índice a partir de la variable objetivo
index <- createDataPartition(data$Glucose, p=0.8, list=FALSE )
train <- data[index, ]
test <- data[-index, ]
nrow(train)
nrow(test)
library(caret)
library(dplyr)
library(readxl)
library(dplyr)
library(caret)
library(rpart)
library(rpart.plot)
datos <- read.csv("datasets/clientes_marketing.csv")
library(caret)
library(dplyr)
library(readxl)
library(dplyr)
library(caret)
library(rpart)
library(rpart.plot)
datos <- read.csv("../datasets/clientes_marketing.csv")
# Variable objetivo: convertir respondio_campaña a numérica
datos$respondio_num <- ifelse(datos$respondio_campaña == "Sí", 1, 0)
library(caret)
library(dplyr)
library(readxl)
library(dplyr)
library(caret)
library(rpart)
library(rpart.plot)
datos <- read.csv("../datasets/clientes_marketing.csv")
# Variable objetivo: convertir respondio_campaña a numérica
datos$respondio_num <- ifelse(datos$respondio_campaña == "Sí", 1, 0)
datos <- createDataPartition(datos$respondio_num, p=0.8, list=FALSE)
library(caret)
library(dplyr)
library(readxl)
library(dplyr)
library(caret)
library(rpart)
library(rpart.plot)
datos <- read.csv("../datasets/clientes_marketing.csv")
# Variable objetivo: convertir respondio_campaña a numérica
datos$respondio_num <- ifelse(datos$respondio_campaña == "Sí", 1, 0)
index <- createDataPartition(datos$respondio_num, p=0.8, list=FALSE)
train <- datos[index, ]
test <- datos[-index, ]
set.seed(123)
library(caret)
library(dplyr)
library(readxl)
library(dplyr)
library(caret)
library(rpart)
library(rpart.plot)
datos <- read.csv("../datasets/clientes_marketing.csv")
# Variable objetivo: convertir respondio_campaña a numérica
datos$respondio_num <- ifelse(datos$respondio_campaña == "Sí", 1, 0)
index <- createDataPartition(datos$respondio_num, p=0.8, list=FALSE)
train <- datos[index, ]
test <- datos[-index, ]
nrow(train)
nrow(test)
modelo_glm <- glm(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, family = binomial)
summary(modelo_glm)
exp(coef(modelo_glm)) * 100
newdata = data.frame(
ingreso_mensual = 2500,
usa_tarjeta_credito = "Sí",
visitas_web = 6,
compras_previas = 4
)
newdata = data.frame(
ingreso_mensual = 2500,
usa_tarjeta_credito = "Sí",
visitas_web = 6,
compras_previas = 4
)
newdata
# Crear un data.frame con las características del individuo
prob_individuo <- predict(
modelo_glm,
newdata = data.frame(
ingreso_mensual = 2500,
usa_tarjeta_credito = "Sí",
visitas_web = 6,
compras_previas = 4
),
type = "response"
)
prob_individuo   # Probabilidad entre 0 y 1
# Si prob >= 0.5 → clasificar como 1
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
pred_glm
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
pred_prob <- predict(modelo_glm, newdata = test, type = "response")
pred_glm <- ifelse(pred_prob >= 0.5, 1, 0)
confusionMatrix(as.factor(pred_glm), as.factor(test$respondio_num), positive = "1")
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(var_objetivo ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)]
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)]
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)]
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)
modelo_arbol$respondio_num.importance
library(rpart)
library(rpart.plot)
# Crear modelo — method="class" OBLIGATORIO para clasificación
modelo_arbol <- rpart(respondio_num ~ ingreso_mensual + usa_tarjeta_credito +visitas_web +  compras_previas, data = train, method = "class")
rpart.plot(modelo_arbol)
modelo_arbol$variable.importance
pred_prob <- predict(modelo_arbol, newdata = test, type = "response")
pred_prob <- predict(modelo_arbol, newdata = test, type = "response")
pred_prob <- predict(modelo_arbol, newdata = test, type = "response")
pred_prob <- predict(modelo_arbol, newdata = test, type = "class")
# pred_arbol <- ifelse(pred_prob >= 0.5, 1, 0)
#confusionMatrix(as.factor(pred_arbol), as.factor(test$respondio_num), positive = "1")
pred_prob <- predict(modelo_arbol, newdata = test, type = "class")
pred_arbol <- ifelse(pred_prob >= 0.5, 1, 0)
#confusionMatrix(as.factor(pred_arbol), as.factor(test$respondio_num), positive = "1")
pred_prob <- predict(modelo_arbol, newdata = test, type = "class")
confusionMatrix(as.factor(pred_arbol), as.factor(test$respondio_num), positive = "1")
pred_prob <- predict(modelo_arbol, newdata = test, type = "class")
confusionMatrix(as.factor(pred_prob), as.factor(test$var_objetivo), positive = "1")
pred_prob <- predict(modelo_arbol, newdata = test, type = "class")
confusionMatrix(as.factor(pred_prob), as.factor(test$respondio_num), positive = "1")
datos_cluster <- datos %>% select_if(is.numeric)
datos_cluster <- datos %>% select_if(is.numeric)
datos_scaled <- scale(datos_cluster)
datos_cluster <- datos %>% select_if(is.numeric)
datos_scaled <- scale(datos_cluster)
set.seed(123)
resultado_nb <- NbClust(datos_scaled, min.nc = 2, max.nc = 8, method = "kmeans")
library(NbClust)
datos_cluster <- datos %>% select_if(is.numeric)
datos_scaled <- scale(datos_cluster)
set.seed(123)
resultado_nb <- NbClust(datos_scaled, min.nc = 2, max.nc = 8, method = "kmeans")

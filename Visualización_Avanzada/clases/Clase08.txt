Muy bien. Vale, pues oficialmente estamos grabando y me presento de nuevo para que me conozcáis un poco. Yo soy Juan Antonio Guevara, soy profesor de la Facultad de Estudios Estadísticos, profesor del Departamento de Estadística y Ciencia de Datos en la Universidad Complutense de Madrid. Y bueno, digamos que al final mi día a día es un poquito estar trabajando con R, sacar resultados, analizar datos... Es un poquito todo eso. También he estado acostumbrado, me he visto en la necesidad en muchas ocasiones como consecuencia de la investigación, de tener que colaborar con distintos grupos de investigación, etcétera. Pues al final no queda otra cosa que acabar desarrollando informes a través de un conjunto de datos que nos pasa. Y en muchas ocasiones qué es lo que ocurre que este conjunto de los datos pues suele ser distinto te lo vuelven a enviar o se va actualizando día a día entonces es importante saber y aprender cómo podemos en primer lugar sacar estos resultados estos estadísticos descriptivos gráficos etcétera que al fin y al cabo nos devuelvan información sobre los datos que tenemos y que se puede actualizar en un formato automáticamente. Si me permitís un segundo voy a coger el teléfono porque me está llamando Luis Fer por si acaso fuese algo importante y si lo vale. Un segundo, por favor. Vale, efectivamente me estaba confirmando de que todo fuese bien. y bueno, pues eso, que en muchas ocasiones nos vamos a ver en la necesidad de tener que automatizar un poco, sobre todo también por nuestro bienestar, porque lo que debería de ser, o tal y como a mí me gusta abordar un poco lo que es la programación en el análisis de datos, es que siempre tengo una máxima, que es la de que realizado una vez, realizado todas. Entonces, ¿a qué me refiero con esto? Lo que debe de costar trabajo es realizar un primer script, un primer análisis, pero nos corresponde a nosotros intentar hacer este script lo suficientemente generalista como para facilitarnos la vida más hacia adelante. Tiene que ser lo suficientemente generalista para que se adapte a cualquier tipo de conjunto de datos. Eso es un poco nuestro objetivo. Entonces, ¿qué es lo que voy a hacer? Me hubiese gustado que hubieseis tenido un conjunto de documentos que no es necesario que los tengáis. no es necesario que los tengáis pero hubiese estado bien que lo hubieseis podido tener en el sentido de que en una determinada parte de la clase me hubieseis podido seguir un poquito más de cerca en ese sentido ¿vale? pero esto no es un problema porque lo vais a poder hacer ¿vale? voy a intentar... mi idea de esta clase es que sea especialmente también un poco interactiva ¿a qué me refiero? si no entiendo mal Luisfer os puso algunas guías sobre cómo instalar R, RStudio etcétera, eso habéis tenido la oportunidad de hacerlo y lo tenéis en vuestros ordenadores al fin y al cabo como la clase está grabada siempre lo podéis hacer de forma síncrona, pero creo que lo ideal al menos para poder aprender un poco bien o interiorizarlo un poco mejor, creo que lo ideal es que me vayáis siguiendo un poquito el ritmo de lo que voy planteando y sobre todo a mí me va a gustar poneros de vez en cuando un ejercicio o alguna prueba algo para ver si os equivocáis si no os equivocáis e ir aprendiendo poco a poco para que esto no os pase cuando no esté yo delante entonces algo de sí que me gustaría saber antes incluso de empezar es creo que la respuesta me la sé pero quiero que me digáis vosotros qué nivel de programación tenemos de R, por ejemplo, en concreto. Hola, Juan. Hola, ¿qué tal? Buenas tardes. Yo, por el momento básico, o sea, estamos aprendiendo R en otra materia que es análisis de datos, así que, bueno, lo estamos como aprendiendo en simultáneo a estas clases. Así que algo sabemos, pero bueno, por mi parte, yo no soy súper avanzada. Me parece fenomenal, porque Yo sí que os voy a hacer como una mini introducción muy rápida a lo que es el manejo de datos o enfocado en la análisis de datos de R, porque creo que no tendría sentido asegurarme que no sabéis estos básicos bien para todo lo demás que voy a explicar, porque al fin y al cabo vamos a aprender a cómo hacer informes dinámicos, pero para hacer un informe dinámico tenemos que saber cómo representar un gráfico, cómo representar distintos tipos de gráficos, cómo manejar distintos objetos en R, etc. Así que la primera parte va a ir un poquito orientada a esto, que en realidad no es tiempo perdido ni es nada porque es que lo vamos a utilizar después. Porque al final estos informes digamos que es una mezcla entre un script de programación y un Word. Básicamente eso. Así que vamos a ver cómo podemos interiorizar estas dos cosas por primero. para interiorizarlo y que al final, pues eso, podamos plantear los informes de tal forma que sean actualizables, que muestren los datos como queremos, etc. Desde esta perspectiva hay también dos partes, ¿vale? La primera de todas ellas va a ser, os lo voy a presentar todo enfocado a R y a R Markdown para poder hacer esos informes automáticos y luego también tenemos por otra parte lo que va a ser cuarto enfocado a Python. No sé si también estáis empezando a programar en Python, etc. Básicamente sí que me he encontrado unos problemas para poder aplicar cuarto desde Python. Mira, estoy leyendo que con Python todavía aún no, pues entonces es fenomenal como tenía enfocada la clase. Porque me he encontrado algunos problemitas donde si no controlamos bien Python hay que hacer cosas muy complejas para que funcionase bien al principio, dadas unas librerías que quería utilizar. Porque al final mi objetivo es que, si quiero que vosotros seáis capaces de reproducir informes que sean actualizables, tenéis que saber trabajar con distintos tipos de datos. Entonces mi objetivo es que no solo sepáis trabajar con números. Os he preparado algunos ejemplitos con palabras, para que si lo que tenéis es tipos de productos y opiniones asociados a ellos, porque al menos sepáis sacar una nube de palabras, un grafiquito que nos diga cuáles son las palabras más importantes, etc. Al final son distintos tipos de datos y tenemos que ir acostumbrándonos a todos ellos. Entonces, en Python sí que os he dado un poco el script de lo que estamos aplicando en R, pero lo voy a enseñar un poco al final de tal forma que cuando sepáis bien y cuando tengáis un poquito más de tiempo, porque conmigo solo vais a tener una hora hasta las 3 de la tarde, ¿vale? en teoría estaba programado hasta las 4 perdón, en teoría estaba programado para que el resto de la clase que teníais pues estuviese Luisfer con vosotros pero si no conseguís resolver los problemas pues no entiendo que la clase entonces finaliza en él pero vamos a ver qué tal entonces voy voy a ir al grano si me lo si me lo permitís lo que voy a hacer va a ser compartir pantalla todo el mundo tiene instalado RStudio Vale, pues eso es fenomenal. Lo que voy a hacer es compartir pantalla y empezamos con esos básicos que quiero asegurarme que tengáis sobre manejo de objetos para el análisis de datos, para sacar descriptivos de todo esto, ver con qué cosas tenemos que tener problemas, con cuáles no, etc. Y luego ya pasarnos a cómo podemos interiorizar esto con R Markdown. Porque una vez que lo sabemos programar, mi objetivo es que entendáis R Markdown como algo muy intuitivo. Algo que casi que ni siquiera necesitaba esa explicación. Al menos ese va a ser mi objetivo. Esto se puede volver un poco más complejo. porque es verdad que hay que saberse en determinados comandos para poder hacer gráficos interactuables, para hacer tablas que sean interactivas, pues un poquito todo esto, ¿vale? Pero bueno, todo eso paso a paso, tengo un par de ejemplos de estos últimos, pero os voy a decir por qué son peligrosos. Son muy chulos, pero si el informe tiene que ser en un PDF, un PDF no puede ser interactual, no puede ser interactivo, entonces nos daría errores, tendríamos problemas. Entonces, os voy a mostrar un poquito esas dos partes. Todo depende al final de las características de lo que se nos está pidiendo. Como voy a pasar a compartir pantalla y no os voy a ver directamente, cabe la posibilidad de que no pueda leer el chat. Ahora mismo sí que lo tengo abierto, pero cabe la posibilidad de que lo pierda. Entonces, ¿qué es lo que quiero de vosotros? Que tengáis toda la conciencia del mundo para poder interrumpirme mientras hablo. Juan Antonio, por favor, repite de nuevo esto, no lo he entendido, preséntalo desde otra perspectiva y qué pasa si hago esto, es decir, sed curiosos yo creo que eso es al final el mejor consejo que os puedo dar como profesores sed curiosos y preguntad y no tengáis miedo a equivocaros ni a nada, muchas veces es a través del error de equivocarnos que somos capaces de aprender más algo así que voy a pasar a compartir para la pantalla muy bien Creo que podéis estar viendo mi RStudio, ¿verdad? Sí, se ve. Fenomenal. Pues fijaos, lo primero que hago de todo es abrir un... Esto voy a hacerlo un poquito más grande, puede ser que os facilite poder verlo un poco mejor. Y lo primero de todo que voy a hacer es, pues eso, abordar un poquito lo que es la programación en R enfocada al análisis de datos y al manejo de objetos para extraer información de ellos. ¿Vale? Eso es un poco el objetivo. Digo, probablemente todo esto que voy a decir ya lo sabéis. Así que también dándome el feedback, si puedo enfocar un poquito más, si voy un poco más rápido, menos rápido, etc. ¿Vale? Bueno, en primer lugar, todo lo primero que hay que hacer sería establecer el directorio de trabajo. Porque recordad que todo por lo que vamos a estar trabajando aquí, pues o vamos a querer cargar objetos o lo que vamos a tener que hacer es guardarlos. Y hay que saber a dónde va eso. Generalmente, esto suele ir a la carpeta de documentos. Si yo ahora mismo, no sé si en la sesión habré cargado, ¿ves? Entonces, ahora mismo tengo uno cargado, pues me está dando uno específicamente. Pero si no, probablemente me ponga uses documents. Entonces hay que saber un poco sobre qué estamos trabajando, ¿vale? Si queremos establecer uno nuevo, pues vamos a utilizar este set WD. Seguro que ya lo conocéis, ¿verdad? Fenomenal. No tengo entonces que contarnos los trucos de que cualquier cosa que vaya con texto Esto lo vamos a poner en comillas y que Windows tiene la peculiaridad de que cuando copiamos un directorio de trabajo nos suele poner las barras invertidas y R lo que las necesita es así. Entonces tener en cuenta siempre esas cuestiones. Esto me invento un poquito cómo puede ser. por ejemplo, ¿quién podría ser esto? Si no es, me va a dar error. Como sí funciona y lo he podido ejecutar, tengo una carpeta que me ha dado documentos, pues se me ha establecido él, ¿vale? Con eso vamos a saber dónde trabajamos. Desde mi perspectiva, siempre os recomendaría que cargases el conjunto de datos con comandos. Por ejemplo, vamos a llamarle data a algo con lo que vayamos a trabajar, ¿vale? y tenemos distintos comandos, que puede ser read.csv, si es que lo tenemos en CSV, etc. ¿Por qué os digo esto? Probablemente muchas veces lo carguéis utilizando el environment que tenemos aquí. Y puede ser, esto no siempre nos da un control total sobre lo que estamos cargando. Entonces, en algunas ocasiones se toman licencias a la hora de interpretar determinadas variables. Desde esta perspectiva es un poquito más robusto, pero sobre todo para cargar Excel, SPSS, pues también desde el environment es un poco recomendable. Entonces, aquí he dado como muchos saltos que sé que más o menos los podemos asumir, pero voy a empezar desde el principio. Lo primero de todo es saber que R sobre todo es una calculadora, R, Python, etc., especialmente R. Es importante que entendáis que aunque últimamente en la empresa se habla mucho de Python, mucho de Python porque se ha puesto muy de moda la inteligencia artificial, el aprendizaje automático, todas estas cositas, desde la perspectiva del análisis de datos, del manejo de los datos y de la estadística, R es un poco más especializado. no digo que sea mejor o peor digo que de forma nativa tiene comandos que están más especializados al análisis de datos de lo que sería país esto no significa que no los tengan muchísimo menos sólo que hay que importarlos desde otras librerías aquí las tenemos de base en el entonces por ejemplo lo primero que tenemos es una es una calculadora como sabéis aquí en la consola todo lo que escribamos se va a ejecutar si yo pongo 3 más 3 me va a devolver un 6 pero si lo pongo que arriba en el script lo tengo que ajustar en concreto para que se pueda utilizar. Vale, pues el siguiente paso que voy a dar, y es para asegurarme que controlamos en determinada medida cómo funciona la estructura de R, es igualmente algo sencillo. ¿Esto qué me ¿Qué valor me va a dar esto? ¿Me da 6 por 5, 30? ¿O me da 15 más 3? Esto es importante. Entonces, ¿por qué digo que es importante? No por entender que la multiplicación va por encima. Lo que yo quiero que vosotros saquéis de esto es que, si no estamos seguros, podemos anidar las operaciones con los paréntesis. Seguro que esto ya lo sabéis, pero esto es importante porque gran parte de lo que es la programación en R va a consistir en añadir operaciones. Y eso es fundamental para entender qué ocurre primero en el centro y qué vamos haciendo más afuera. ¿vale? Digamos que tiene un orden secuencial donde lo que primero ocurre es lo que hay dentro de los paréntesis y cero, y se sigue, ¿vale? Esto es lo fundamental. Entonces, dentro de poder utilizarlo como una calculadora donde tenemos distintos comandos, ya habéis visto que esta puede ser la multiplicación, que esta es la división, si queremos una raíz cuadrada tenemos sqrt, tenemos algunos comandos que nos... Esto se puede hacer todo, se pueden calcular integrales, se pueden calcular derivadas, todo. se pueda hacer. No me voy a meter ahí, es una calculadora. Al fin y al cabo. El siguiente paso es el de tener en cuenta que podemos asignar objetos. ¿Esto qué significa? Si yo digo que A pongo un 5, a todos los efectos A va a ser un 5. No sé con qué estáis trabajando, pero no sé si os ha llamado la atención que yo haya puesto esto así muy rápido. No sé si lo soléis hacer Desde esta perspectiva lo vais haciendo uno a uno, ¿verdad? Para poder establecer esta asignación de forma muy rápida es alt-guión, ¿vale? Aunque os funciona también con un igual, que es una de las pequeñas diferencias que puede haber entre Python y R, es que a R le funciona el igual y esa otra asignación es exactamente lo mismo, mientras que Python va a necesitar el igual. Pero si utilizáis alt-guión se pone automáticamente esta asignación, ¿vale? Al final tenéis que intentar acostumbraros a manejar muy bien el teclado porque eso luego la fluidez de la programación se va a agradecer. Entonces es importante tener en cuenta que estamos asignando a un valor 5 que como consecuencia si yo hago a más 2 me devuelve un 7. A todos los efectos a es un 5. Si hago b y le digo que sea un 3, pues a por b me lo devuelve igual. ¿Vale? Esto es necesario entenderlo porque estos elementos con los que vamos a trabajar y que nos van a ayudar a que sean lo suficientemente generalistas cuando hagamos un informe dinámico, estos valores van a tener un nombre pero lo que va a ir cambiando es esto que ponemos aquí, estos valores. Entonces en muchas ocasiones nos merece la pena crear estos objetos con nombres que nosotros controlamos para que sea generalizable a cualquier conjunto de datos que nos llegue. ¿Vale? Entonces, el siguiente punto que quiero asegurarme que entendemos es que lo que tenemos aquí, seguro que estáis viendo mi environment, esto de aquí es un vector. ¿Qué significa que sea un vector? Es un vector de nivel 1, de longitud 1, pero podría ser más. Entonces, lo primero que es importante tener en cuenta es que yo puedo decir que A no solo va a ser un 5, sino que puede ser un 1, un 3, un 5 y un 7. Esto lo controláis, ¿verdad? En este sentido, para poder crear un vector ponemos una c Y entre todos ellos, pues ponemos comas para separarlos Si yo hago a más uno, he sumado una constante a todos ellos ¿Vale? Entonces, la primera pregunta de todas Si yo digo, si yo os pongo este ejercicio a extraer El número siete del vector a ¿Lo sabéis hacer? Es lo primero que me interesa. Como poco me podríais dar dos respuestas distintas. ¿Cuáles se os ocurren? Digo como poco. Lo bueno de la programación es que es tan personal que hay mil formas de abordar un mismo problema. ¿Cómo extraeríais el número 7 del vector a? ¿Alguna idea? Y sin temor a equivocarnos. ¿No es como hiciste recién vos, profe, con la A y después C y entre paréntesis 7? ¿A, C? No, no. A, el... Lo escribo con la A. Sí, perdón. No, no. No quiero asignar a la A un 7. Quiero extraer el valor 7 de la A. ¿Cómo haríamos eso? ¿Lo sabemos hacer? Lo llamamos con el símbolo de pesos, creo que es así. Esto de aquí, ¿verdad? Vale, ¿por qué estoy poniendo estas cuestiones? Con esto no va a funcionar. ¿Por qué no funciona? Porque estáis acostumbrados a trabajar con dataframes. Eso es algo todavía más complejo a lo que voy a llegar enseguida. Pero todavía esto no puede funcionar. Entonces, en muchas ocasiones vamos a extraer de un data frame, de un Excel, por decirlo así, una columna entera y vamos a querer trabajar sobre ella. Entonces, hay que saber cómo acceder a determinados alimentos. Si no sabemos segmentar, si no sabemos extraer unos elementos en concreto, de acuerdo a un determinado punto de corte, etc., no vamos a poder representar determinados resultados. Entonces, en este sentido, cuando queramos acceder, y esto nos va a servir para todos los elementos de R, cuando queramos acceder a los elementos de un objeto, vamos a poner los corchetes. Como sabemos que es la posición 4, si yo pongo a corchetes 4, me devuelve ese valor. Entonces, es importante tener en cuenta que aquí extraigo distintos elementos. Entonces, ahora os voy a poner la siguiente trampa. Extraer de a los elementos 1, 5 y 7. ¿Sabríais hacerlo siguiendo esta lógica que tenemos aquí? Con lo que hemos estado viendo. Algo que me gustaría que tuvieseis siempre en cuenta para la programación es que todo lo que se ve, desde el principio lo más sencillo hasta el final, es combinable entre sí. Todo. Tenerlo en cuenta. Esa es la diferencia en que vuestro aprendizaje en la programación sea lineal o sea exponencial. Porque las combinaciones de las cosas que aprendéis son infinitas. ¿Cómo podríamos hacer esto en este sentido? Pues si yo pongo aquí un vector que me indique el 1, el 3 y el 4, le estoy diciendo devuélveme las posiciones 1, 3 y 4. Y de hecho me devuelve el 1, el 5 y el 7. Os decía que como poco me podíais decir dos formas distintas. ¿Podríais indicar aquí cómo extraer todos aquellos valores que sean superiores a 5? ¿Eso lo sabéis hacer? Eso puede ser importante. ¿Por qué digo que es importante? Cuando tengáis que redactar un determinado informe, a lo mejor solo queréis sacar los descriptivos. Por ejemplo, vamos a asumir que estamos trabajando con número de ventas. Si solo me quiero quedar con los productos, que son el 10% más vendidos, tengo que saber cómo segmentar eso. si yo aquí le digo a mayor que 5 solo me devuelve el número 7 es el único que coincide con él siempre os recomiendo venir aquí y ejecutarlo por separado porque lo que nos devuelve es un vector de que coincida o no coincida la proposición que le he puesto aquí eso es fundamental entonces gracias a esto perdón, una pregunta ¿me puede recordar cuál es la función de la C en el de arriba, en el de un poquito más arriba? siempre vamos a poner una C y unos paréntesis para crear un vector una lista, no quiero decir lista porque eso tiene un nombre específico y es otra cosa, pero una serie de elementos en su conjunto y los elementos que hay aquí dentro van a ir separados por comas Aquí podemos poner nombres. ¿Qué os parece si ponemos los nombres? Podemos crear un objeto que se llame nombres y ponemos María, ponemos Aurelio, ponemos Juan y Diana. Vale, entonces ahora tenemos un vector que se llama nombres. ¿Cómo podemos acceder al que se llama Juan? Pues yo pongo nombres, nombres, igual, cuando pongamos un igual tiene que ir doble, porque el que es simple es para la asignación, ¿vale? y si aquí ponemos form nos devuelve el case. Entonces, desde aquí podemos hacer muchas proposiciones lógicas. Yo podría poner a ¿Cómo? Una pregunta ¿Cómo concateno en R? O sea, ¿cómo puedo concatenar por ejemplo María, Diana, o sea, María y acá Diana de un vector. Vale, queremos concatenar los dos en uno solo. Sí. Vale. Lo más lógico sería hacer. Fijaos, voy a decir lo más lógico, no lo más óptimo, ¿vale? Si nosotros ponemos nombres y ponemos aquí uno, eso desde luego es María. Si, sin embargo, aquí pongo el último de todos, fijaos, si tenemos un... Si estamos haciendo un informe dinámico, quiero que me digáis cuál es el problema de que para acceder a Diana yo ponga aquí un 4. En que no siempre... Es decir, si quiero acceder al último elemento, no siempre va a tener una longitud 4. Si yo quiero acceder al último elemento, lo más adecuado es poner length nombres. ¿Por qué? Porque la longitud de nombres es 4. ¿Veis un poco cuál puede ser el agón? En la lógica, si yo quiero hacer al primero el 1 siempre me vale Si quiero hacer al último voy a tener que tirar de length O de nRow cuando trabajemos con DataFrames Eso lo vamos a ver un poco más adelante Esto es lo que forma parte de hacer un script lo suficientemente generalista ¿Vale? Entonces si vengo aquí, devuelve Diana ¿Cómo podríamos hacer una concatenación? La más simple sería estas Si yo creo un vector en el primer elemento pongo María y en el segundo pongo Diana, aquí me devuelve esto. Luego existen otras funciones, como puede ser Paste, donde si metemos esto aquí dentro puede ser que me dé error, no. Fijaos, si utilizamos algunas funciones como puede ser Paste, lo puede apuntar todo de golpe para apuntar texto, ¿vale? aunque esto sería relativamente un poco avanzado. Bueno, pues... Vamos a hacer ahora una mezcla. Vamos a suponer que... Claro, es que esto... ¿Habéis visto cuáles son los problemas que podéis tener de NA? ¿Sabéis lo que es un NA? Y los problemas que podéis tener. un NA es un nota valuable, es un valor que da error, ¿vale? Vamos a suponer que A es una secuencia del 1 al 10. Bueno, la voy a poner del 11 al 20. Si lo muestro por pantalla, A es del 11 al 20. ¿Qué es lo que pasa si de repente, porque me han pasado un conjunto de datos y yo tengo que trabajar con él, el valor número 2, en vez de ser un 12, es un... Fijaos, vamos a trabajar con el 20. Con el último de todos. Length A. Ya sabéis que el último de todos es un 20. Imaginaos que en vez de ser un 20 es esto de aquí. Un 2 y una O. En muchas ocasiones obtenemos datos que tienen errores de codificación. Entonces vamos a suponer esto. Yo muestro aquí A y parece que todo es igual. menos el último, en vez de ser un 20, es un 2O. ¿Qué es lo que me está pasando aquí? Lo que me está ocurriendo aquí es que si yo hago A más 1, que antes lo habíamos hecho y le sumaba una constante a todos, ahora tengo un error. Entonces, es importante tener en cuenta este tipo de cosas. Si queremos forzar y asegurarnos de cuáles son la naturaleza de cada uno de nuestros objetos, esto lo podemos forzar al principio, que luego vamos a ver bien un poco. pero yo podría forzar a que a sea as.numeric y entonces va a ser numérico. ¿Cuál es el problema? Este 20 que es un 2o podría ser un número, en realidad nunca. Entonces, al hacer una transformación lo que me está diciendo es que está introduciendo nas y cuando yo ejecuto lo que tengo en a me dice que el último de todos es un na. Así que si quisiese calcular simplemente una media, y esto es importante, hay que tener en cuenta esto, porque si vais a realizar un informe dinámico, solo esto ya os daría problemas y no os ejecutaría. ¿Sabéis cómo calcular la media de un vector? Hay distintos comandos que es importante conocer. Está min, está la desviación típica, podemos calcular cuantiles, podemos calcular la mediana, podemos calcular muchas cosas. ¿Qué es lo que pasa si yo quiero calcular la media de A? Pues me da un NA. ¿Por qué me está dando un NA? Porque hay un valor que falta y no sabe qué hacer. No sabe si simplemente eliminarlo, pero la media es una fórmula. Entonces, en el sumatorio de todos los valores, no lo tengo en cuenta, pero divido entre todos los que son, o divido entre uno menos, no saben lo que hay que hacer. Así que siempre os vais a encontrar en estos descriptivos un NA.RM. Ya sabéis que en Help esto es lo que más ayuda. Si vosotros ponéis aquí Me, vais a poder ver qué es lo que hay por debajo y cuáles son aquellas funciones que os pueden servir de esto. Entonces, a cada uno de los descriptivos que calculéis siempre tenéis que intentar acostumbraros a poner... disculpa, tengo una pregunta eso que acabas de hacer, porque yo tengo esa duda, o sea si hay un glosario de ese tipo de comandos o de los símbolos lo que tenéis que hacer siempre como recomendación mía es, cada vez que utilicéis una función, venís a gel y la ponéis y entonces vais a poder ver cuáles son todas las cosas que se pueden utilizar y cómo Entonces, siempre que calculéis desviación típica, siempre que calculéis descriptivos, es importante tener en cuenta estos sistemas de control al fin y al cabo. Vale, pues estamos trabajando aquí con vectores, pero esto puede ser un poco más complejo. Podemos trabajar con matrices. ¿Qué es una matriz? fijaos, el comando va a ser matrix, va a ser un conjunto de elementos donde nosotros le vamos a indicar el número de filas que queremos en el row, igual a, ¿cuántas filas? ¿quiero 5 filas? pues 5 filas y en consecuencia 2 columnas pues he creado una matriz, una matriz M, que hay que tener en cuenta que cuando las hagáis automáticamente las ordena de base por columnas, os dais cuenta Por eso he puesto una secuencia aquí del 1 al 10, para que sepamos cómo se está ordenando todo. No hace el 1, el 2 a la derecha, el 3, el 4 a la derecha, etc. La rellena por columnas. Sin embargo, esto lo podemos cambiar si ponemos... Fijaos, al final es un poco como os decía, si os venís aquí y ponéis matrix, aquí lo veis todo, ¿vale? aquí. Fijaos, algunas veces os puede pasar también esto. ¿Veis que no me está apareciendo en concreto aquí la que yo quería encontrar? Cuando os pase eso, ponéis aquí una interrogación y ponéis myfiles. Y os lo trae aquí, ¿vale? Entonces, ¿veis que pone...? Bueno, no lo tiene aquí automáticamente. Aquí. ¿Veis que pone by row? Si vosotros ponéis aquí byRaw igual a true, sí que te lo reordena por filas. Entonces, a la hora de que tengáis que ejecutar una matriz, que crearla, tenéis que tener cuidado con eso. Entonces, lo único que quiero con esto, para ir un poquito más rápido, es cómo podemos acceder a estos elementos de una matriz. Pues lo único que tenemos que poner es una coma y funciona exactamente igual como habíamos hecho con los vectores. A la izquierda, referente a filas, a la derecha, referente a columnas. Si yo pongo aquí un 2 y aquí me pongo un 2, me devuelve el valor 4, porque es fila 2, columna 2. Y sobre esto trabajaríamos con todo lo que hemos hecho. Si simplemente pongo aquí, esto lo dejo vacío y pongo la segunda columna, pues me devuelve como un vector, como los que hemos trabajado antes, solo de la segunda. Esto es equivalente a lo que me decíais antes, Juan Antonio. Podríamos poner el símbolo del dólar y acceder a una columna en concreto. Eso va solo para los data frames. Esto es equivalente. Y luego, por otro lado, podemos trabajar con los data frames. Yo puedo decirle que esta matriz sea un data frame. Entonces puedo poner as.dataFrame y la m. Si esto es así, lo vuelvo a tener aquí igual, pero ya es un poco más complejo. ¿Cuál es la diferencia? Las matrices solo permiten un mismo tipo de observación, por ejemplo, todo números o todo caracteres, pero no me permite tener distintos. En DataFrame sí. Entonces, desde esta perspectiva, pues podemos tener, por ejemplo, voy a crear un DataFrame de 0. Voy a llamarle data, voy a poner data.frame y aquí le pongo los nombres, por ejemplo, nombre, igual. y podemos poner todos estos que teníamos ahí. Me vengo aquí. Y puedo poner otro que sea, por ejemplo, edad y me invento un poquito las edades. María va a tener 42 años, Aurelio va a tener 19, Juan tiene 5 y Diana tiene 22. Si nosotros ejecutamos esto, ya podemos ver aquí en el environment que tenemos nuestras distintas variables. Tenemos nombre, que es carácter, y tenemos edad, que es numérico. Sí nos permite distintos tipos de efectos. Ahora es cuando sí podemos trabajar como habéis estado haciendo anteriormente. Ponemos el símbolo del dólar y sí que podemos acceder a ellos. ¿Que yo quiero acceder a los nombres de las personas que tienen más de 20 años? Pues yo puedo venirme aquí a data y claro, yo que quiero acceder aquí en data, fijaos, quiero acceder a las filas, a las filas que cumplan la condición que yo he dicho de edad, ¿cierto? Entonces, lo que hemos dicho antes, vamos a poner los corchetes, lo que hay a la izquierda de la coma, pues es para las filas, lo que hay a la derecha es para las columnas. Si yo pongo aquí data, edad mayor que 20 y ejecuto, lo que me devuelve son aquellos casos que me interesan. Entonces muchas veces queremos un threshold específico para sacar resultados solo de eso. Es así como lo vamos a aplicar. ¿Que solo quiero los nombres? Pues aquí pongo nombre y me devuelve solo los nombres. Si no hago nada, me devuelve esto de aquí. O si quiero trabajar solo con edad, pues pongo aquí edad. Esto también funciona de otra forma distinta, que es de la siguiente. Si yo aquí pongo un 2, porque sé que es la segunda columna, me devuelve lo mismo. Lo primero tenéis que pensar, ¿por qué vais a ponerlo entre comillas si no con un número? Porque en algunas ocasiones cabe la posibilidad de que la indexación en el número de la columna no coincida con el que vosotros trabajasteis al principio. Y eso ya daría en vuestro informe automático unos errores terribles. Y lo vamos a querer evitar. Poniendo el nombre, no nos equivocamos. No nos equivocamos. De hecho, fijaos, voy a intentar automatizar un poquito más de eso. Voy a crear aquí punto de corte y voy a poner un 20. Que esto, a lo mejor, fijaos, voy a decir otra cosa. Punto de corte, la media de data edad. Esto sí sería totalmente automático. Yo no establezco un valor, todo se calcula. Entonces, calculo la media de edad. Ese va a ser el punto de corte, 22. este 20 de aquí, lo sustituyo y esto automáticamente, yo no estoy escribiendo aquí ningún número automáticamente saldría perfecto, oye, ¿cuáles están por encima de la media? calculo el punto de corte, lo ideal sería tener aquí un NA.RM igual a true, por si acaso tuviésemos NA y el punto de corte te lo devuelve automáticamente, ¿vale? si eliminamos esto, nos diría solo María en este caso que nos hemos inventado cumple la condición. Puedo poner mayor o igual. Si estoy poniendo mayor o igual, me saldría también diana en este caso. Entonces esto es una forma de ir automatizando. Si os dais cuenta, vamos creando los objetos fruto de cálculos que hacemos intentando evitar poner los valores tal cual estamos haciendo. Estoy yendo un poquito rápido, pero más o menos me vais siguiendo, ¿verdad? Esto al final creo que lo que necesitáis es lo que necesitamos todos es ir practicando lo poquito a poco de tal forma que escribáis en el rebuen payton con la soltura con la que habláis es un lenguaje y se consigue pero para eso yo practicará vale perdonarme entonces que vaya así un poquito más rápido pero voy a añadir una nueva columna y vamos a la representación visual de los datos fijaos si yo quiero añadir una nueva columna sobre todo poner el símbolo del dólar fijaos que sólo existe nombre y edad pues voy a poner nacionalidad. País. No pongo la tilde por si hubiese problemas. ¿Os dais cuenta? No pongo la tilde por si hubiese problemas. Que los podría haber. Pongo país y lo único que necesito es decir, vale, pues tengo cuatro personas, vamos a ver que aquí data, y vamos a decir que María es de México. Aquí en la tienda no importa. México. Tenemos a Aurelio que puede ser de Nueva Zelanda, España y Estados Unidos. Lo ejecutamos y ya de repente lo que nos encontramos es una nueva. Voy a hacer una cosa, voy a repetir, voy a sustituir uno de estos. Voy a decir que data, país, el último de todos, fijaos como lo voy poniendo todo de forma automática, length. así evito poner el número 4 y sea lo que sea, se me ajusta aquí me va a devolver, disculpad, esto de aquí así me va a permitir devolverme el último que quiero pero sin poner números, recordaos eso, tenéis que intentar evitarlo le voy a poner de nuevo aquí España, ¿vale? para tener dos España entonces, para poder sacar todos los descriptivos y automatizarlo necesito saber cómo, qué tipos de gráficos puedo sacar, ¿vale? Primero de todos ellos, depende del tipo de variable con la que estemos trabajando, podemos sacar unos gráficos u otros. ¿Qué pasa si trabajamos con cuantitativas? Pues si trabajamos con cuantitativas, o fijaos, os voy a enseñar un truquito. ¿Sabéis cómo cargar algunos conjuntos de datos de forma automática? ¿Os suena Iris? No, profe. Fijaos. Data Iris. ¿Veis que cuando pongo data salen unos cuantos? Sí Data iris Fijaos No se ve, pero pinchamos aquí Y tenemos un conjunto de datos que se llama iris Tenemos tipos de especies De flores Y lo que miden son Sépalos, la anchura Y la longitud de los pétalos Y la anchura Entonces vamos a trabajar con esto porque tiene distintas tiene distintas variables que me interesa, son cuantitativas, son categóricas, yo soy un poco más extenso. Si yo hago simplemente un plot de iris sepal length, lo que me encuentro es esto. Parece que no aporta mucha información. Es para cada observación en el eje x su valor en la variable a la que he llamado. Pero eso no me aporta mucha información, me puede aportar un poco más si cruzo. ¿Cómo puedo saber yo la relación que hay entre sepal length, iris y petal length? Lo hago así y de repente estoy viendo la correlación que puede haber entre ambos. Esto se llama scatter plot. Una sola variable cuantitativa también la podemos representar como con su histograma. Yo le llamo aist y pongo iris separenz y me devuelve la distribución de todo esto. Esto ya me está demostrando, está enseñando cómo se comporta esta variable. Pero fue una pregunta. Sí. En el gráfico, ¿yo cómo puedo cambiar el título o los griegos? ¿Cómo se puede hacer? Yo puedo poner aquí una coma, poner main y poner prueba. Y ese es el punto. Para x lat puedo poner serpa length y poner y lat igual de cuero. Perdón. Para aquí. Así. y trabajamos que queremos añadir colores por igual light blue etcétera podemos representar la función de distribución de densidad que tiene la misma forma de esta por ejemplo plot density y así os enseño algunas cositas que no habéis visto sepa el lente y me dice cómo se distribuye. Puedo añadir líneas aquí. Lines, density, readings, petalas. Y me va mostrando. ¿Cómo puedo saber colores distintos? Pues a esta le puedo poner el color rojo. Luego... Actualizaciones saliendo del narrador. Perdón. Y se puede ir añadiendo. Fijaos, aquí os puedo enseñar un poquito más de trucos. ¿Veis que se corta el eje x como consecuencia de la diferencia de escala entre todos? Yo puedo poner aquí xLim igual a que esté entre el 0 y el 0. Y se muestra. ¿Vale? Todos estos son truquitos que podemos ir añadiendo con colores distintos. Luego vamos a ver cómo añadir leyendas, etc. Que lo que quiero representar es una variable categórica, pues para eso puedo presentar un diagrama de barras. No confundamos el histograma con un diagrama de barras, porque todos son barritas, ¿vale? Pero el histograma están juntas, es para cuantitativas. El diagrama de barras es para categóricas, por ejemplo, flor, iris, especies. cuando lo hacemos así me dice 50 setosa, 50 versicolor, 50 virgínica yo puedo darle aquí el color como hemos hecho antes por ejemplo en azul o puedo darle un vector de colores, recordáis que os he dicho que todo es combinable entre sí light blue y aquí le puedo poner orange y vamos jugando bien con esto ya sabemos cómo esos descriptivos mínimos que podría haber en algunas ocasiones vamos a tener que cargar muchas librerías por ejemplo conocéis la librería library site puede ser que no no lo sé a lo mejor si la conocéis site para que nos puede venir bien pues tiene una función que se llama describe describe donde si metemos un data frame nos devuelve automáticamente la media, la desviación típica, la media nato, lo que nos puede ser de interés. Todo eso lo vamos a querer representar posteriormente. No te disculpas, ¿cómo sabemos qué librería sirve para cada cosa? ¿Cómo lo identificamos? Eso se sabe realmente con la experiencia o con la documentación. entonces en este sentido nadie sabe que esto está aquí hasta que busca mejor en librería para representar descriptivos de un data frame entonces vamos poquito a poco conociendo y aplicando entonces con todo esto fijaos que nos quedan 10 minutos pero es fenomenal va a parecer que todo es como de mucha prisa pero vamos perfectos de tiempo porque sé que con esto que hemos visto aquí vamos a saber sin problema ninguno sin problema ninguno dar el salto a lo que es R Markdown, ¿vale? ¿Qué es R Markdown? Fijaos, me vengo aquí, clase unir, Word. Esto es lo que quería que tuvieseis, pero que no pasa nada si no lo tenéis, ¿vale? Esto que nos vamos a encontrar... Bueno, primero os voy a decir cómo construir uno. Solo habría que darle a File, New File, y le damos aquí a R Markdown, ¿vale? Al darle a R Markdown, aquí nos va a decir cuál es el título, la fecha y cómo queremos que una vez que lo compilamos todos y nos los devuelve en un PDF, en un HTML o en un Word, ¿vale? Pues con esto vamos a seleccionar y se nos crearía uno. Fijaos que todo lo que hay aquí son ejemplos, pero dejadme que os enseñe alguna cosa. Esto de aquí no lo tocamos. Es el título, lo podemos modificar. Aquí pone clase, o puedo poner clase del 18, del 12, del 20, 25. O informe semanal. Y ya está. Y va sacando el informe semanal. Lo primero que nos vamos a encontrar, o lo que... Esto lo vais a tener vosotros. Por eso no quiero que cunda el pánico. No lo tenéis justo ahora, pero yo se lo voy a pasar a Luisfer para que lo tenga y os lo pueda distribuir. Esto lo vais a tener. Entonces, lo que me interesa es que a priori sepamos viendo qué hay por aquí. Un chunk, ¿veis que? Permitidme que haga esto un poquito más pequeño. Esto es un chunk, ¿veis que cambia el color? Eso es un chunk, porque aquí estoy escribiendo de forma normal y de repente aquí aplico código. Estoy mezclando, es lo que os decía, como si fuese un documento Word a la vez que escribo. Esto hay distintas formas, podemos darle a source o a visual Visual es un poquito más intuitivo, fijaos Vengo aquí y parece que ya se está leyendo bien Que quiero poner esto en negrita, le puedo dar aquí y sale negrita Que quiero que esté en cursiva, le puedo dar en cursiva Quiero crear bullet points, desde aquí lo puedo hacer ¿vale? Hola, van saliendo, etc. Es como un Word, tal cual, pero lo vamos a mezclar con código, ¿vale? Eso es lo bueno. Entonces, lo primero que tendríamos que hacer aquí es cargar un conjunto de datos. Lo primero que haríamos sería, pues, poner read.csv, quiere decir que esto se llama data, y siempre vamos a trabajar con data. Entre lo que entre, siempre trabajamos con data, con df, o con lo que vosotros queréis. ¿Veis esto que pone aquí de echo? Esto es para que en el informe aparezca el código que colocáis aquí o no. Una cosa es la salida, una cosa es lo que hace el código, y otra cosa es el código tal cual. Aquí arriba, si os dais cuenta, veis que pone echo igual a false. Está para que de base no se muestre el código. Eso hace que el informe sea limpio. ¿Vale? Eso hace que el informe sea limpio. Pero en algunas ocasiones a lo mejor sí queréis que se vea el código. Por eso yo aquí he puesto igual a true. Para que efectivamente salga y lo veáis y lo podáis contrastar. Entonces, dentro de todo esto, igualmente tenemos... Si pongo... ¿Habéis visto que he puesto un solo asterisco y ya me pone Heading 1? Pues aquí puedo poner yo. Eso está aquí, de todas formas, para que lo pongamos automáticamente como queramos. Aquí puedo poner Introducción. Pongar aquí esto, luego poner a lo mejor dos y es un heading dos, es un subapartado Todo esto son especificaciones que podéis explorarlas sin ningún tipo de problema, ¿vale? Entonces, lo siguiente que me interesa, pues aquí podemos cargar un conjunto de datos Que por ejemplo voy a trabajar sobre iris, ¿por qué voy a trabajar sobre iris? Porque esto nos funciona a todos, no tenéis que tener un dataset Esto se ejecutará automáticamente, ¿vale? pero ¿qué es lo que tenéis que hacer? Todo lo que sabéis hacer aquí en un script de forma normal lo vais a ir metiendo en estos chunks de aquí. ¿Cómo insertamos un chunk? Pues o bien le podemos indicar aquí, fijaos que aquí se pueden añadir tablas, se pueden añadir imágenes, code block, Se pueden añadir, si queremos trabajar con R, si queremos trabajar con Python, se pueden mezclar muchas cositas. Pero hay una forma un poco más rápida que es control, alt, i. Lo voy a poner aquí. Control, alt, i. Si eso lo hacemos así nos va a salir automático. ¿vale? Borro esto. Entonces, si yo ejecuto esto de aquí, ejecuto automáticamente solo lo que hay aquí. Vuelvo otra vez arriba. Esto que tenéis aquí, os explico un poco para qué va a servir. Esto es una función que suelo utilizar donde doy una lista de paquetes que sé que tengo que utilizar. Aquí hay muchas. Cuando os envíe esto vais a tener una lista para que sirvan todos. ¿Y aquí qué nos hace esta función? Nos dice, si no está instalado el paquete, instalalo, porque lo voy a necesitar. Esto es una forma de tenerlo automático y le funciona a todo el mundo, porque si yo los tengo instalados, pero vosotros no, a vosotros no os funciona. con esto es un punto de control esa es la clave y si está instalado pues lo cargamos, así que lo primero que ejecuto es esto de aquí ya está, no me ha dado ninguno siempre merece la pena que lo vayáis ejecutando todo antes de que sea automáticamente ahora puedo venir aquí y le estoy dando como factor, ¿sabéis lo que es un factor? perfecto pues especies le doy como factor que con lo que estoy trabajando. Fijaos que todas esas especificaciones, ese formato que le tenemos que dar a nuestra variable, se hace aquí al inicio y lo ideal sería que esto fuese un false. Lo ideal es echo igual a false para que el procesamiento que no tiene que ver con los resultados, no se vea en el informe, básicamente. Siguiente, podemos hacer bastantes cosas. ¿Que queremos poner valores que se vayan ajustando automáticamente en mitad de nuestro texto? Pues aquí tenemos una forma que os he puesto, que básicamente es con estas dos comillas dentro del texto. se pone aquí R, min, con esto se puede trabajar y te va a calcular automáticamente aquí la media, ¿vale? Sobre lo que estamos trabajando. Eso es una forma de poner dentro del texto valores automáticos, aunque no siempre vamos a querer eso. Fijaos, aquí ponemos describeDF, pues entonces lo que de repente aparece de mitad de nuestro informe es una tabla de los descriptivos de mi data frame, sea cual sea. Lo ideal es ir trabajando siempre con el mismo data frame, es decir, tener un informe para cada tipo de tarea que nos están dando. Os presento entonces también lo que es la función cable. Esto viene de aquí. Aquí tenemos... sale de aquí, de este paquete de aquí, ¿vale? Con cable lo que hacemos es representar tablas un poquito más formales. ¿Os dais cuenta que esto parece un poquito más como una tabla Word en vez que esta? Pues entonces, siempre que queréis representar una tabla en este sentido, pues os presento aquí lo que es el formato cable, ¿vale? Aquí se indica el número de decimales que queramos que tengamos, cuál es el título de lo que estamos utilizando. ¿Vale? Eso es un poco la lógica de aquí. Pero, ¿ahí también se puede dejar la gráfica y ya, por último, exportar el archivo en PDF? Eso se podría hacer perfectamente. Eso vamos a ver cómo hacer todo eso ahora un poquito más adelante. Vale, gracias. Sí. Entonces, ¿que queremos hacer un histograma? Pues fijaos, ponemos el histograma y se ejecuta. Y entonces lo tendríamos aquí y se vería automáticamente. Podemos hacer más cosas. Quiero representar automáticamente la matriz de correlación. Fijaos, pues yo aquí genero lo que es mi matriz de correlación. Para sacar la matriz de correlaciones tengo que hacer esto de aquí. Entonces estoy creándolo, lo pongo como un cable y automáticamente me da una tabla de las correlaciones. Más cositas, aquí hay cosas complejas Se pueden hacer los histogramas algo más bonitos que los que hemos enseñado Para eso se tiene que utilizar ggplot No sé si conocéis esa librería Pero es una librería que se utiliza bastante para dejarlo bien Entonces aquí tenéis un script Para que lo podáis adaptar cada uno al gusto Esto es como vuestra base, esto lo vais a hacer vuestro Donde vamos a crear un gráfico del histograma de sepandlens Vamos a crear otro de sepal width, otro de petal length, de las distintas variables que tenemos y los vamos a ajustar todos en uno solo. ¿Cómo podemos representar cuatro gráficos en uno solo? Lo podemos hacer así, de tal forma que le damos al play y los tenemos todos aquí automáticamente en nuestro informe. Aquí podríamos escribir, a continuación se muestran las distribuciones de las variables cuantitativas de X. Entonces, se va a ver este texto e inmediatamente vamos a ver este gráfico con varios que se nos va a poner siempre automáticamente. Los datos en teoría serán cada día distintos y podremos realizar un informe para cada día. ¿Solo con histogramas o también podemos utilizar barras? Se puede hacer de todo. Os pongo más ejemplos que os van a gustar. El siguiente es exactamente igual, pero para esos diagramas de correlación de los que hablaba, los que son scatterplot. scatterplot. Si os dais cuenta, aquí en ggplot, que ya sé que lo conocéis, aquí pone geom histogram, aquí es geom point. Entonces, fijaos qué hacemos aquí. Pues aquí estamos representando sepal length con sepal width, sepal length con petal length, estamos haciendo todas esas combinaciones y además os he añadido una cosa. Oye, ¿cómo se distribuyen estos dos? de acuerdo a mi variable categórica. Pues fijaos, si en color, aquí estamos diciendo que la X es PetalLed, que la Y es PetalWidth, pero si le ponemos color, una categórica, nos la colorea y podemos ver cuál es la distribución, si son separables, si no lo son. Eso da bastante información a nivel descriptivo. Y va a ir siempre actualizándose automáticamente. Ahora, también quiero que seáis capaces de representar otros tipos de datos. Como por ejemplo una serie temporal. ¿Sabemos representar cómo evoluciona un valor a lo largo del tiempo? Puede ser que también os llegue ese tipo de datos Entonces fijaos, aquí os he puesto cómo crear un data frame que sea fecha Pues una secuencia de fecha Donde empieza el 1 de enero del 2024 Y mes a mes, 12 meses, me devuelve una secuencia Fijaos que si me vengo aquí lejos, me devuelve esta vez y le he puesto un valor específico que es un, pues va a tener una exponencial, vais a ver ahora la forma. En definitiva, ¿qué quiero que sepáis de aquí? Que tenéis una variable fecha y una variable con valores. Esto lo generamos, aquí le echamos un vistazo a la forma que tiene. Esto no es necesario, por supuesto, pero es ahora un poco más ilustrativo y aquí tendríamos, por ejemplo, ¿cuál es la forma? De repente sabéis ejecutar, sabéis representar visualmente una serie temporal. ¿Vale? Esto también se nos puede ir actualizando. Luego os he puesto otra más. También quiero que sepáis representar palabras. ¿Vale? ¿Cómo podemos representar palabras? Pues aquí he generado algo automáticamente. Vamos a tener tipos de productos. Auricular en Bluetooth, cafetera expreso, portátil ultraligero y smartwatch deportivo. Nueve de cada uno. Y aquí os he puesto las opiniones para cada uno de ellos, ¿vale? Esto lo vais a tener. Fijaos, ejecuto, porque esto es solo crear un data frame, ¿vale? Esto es solo si yo le doy aquí, dejadme que os dé a DF Opiniones, View DF Opiniones, tenemos esto, ¿vale? No tendría que estar ordenado, no importa. Una vez que tenemos un conjunto de datos así, a lo mejor lo que vosotros queréis es poder representar Pues, oye, ¿de qué se está hablando? ¿Puedo sacar descriptivos de esto? Sí que se puede Fijaos, aquí lo primero que hacemos es, pues para tratar contexto hay que hacer algunas cositas un poco raras Hay que eliminar los números, eliminar la puntuación, eliminar las stop words una stock word son esas palabras que no aportan información, como los determinantes preposiciones, eso no aporta información aquí se limpia un poquito el texto y el comando para hacer una nube de palabras es solo word club donde se le meten nuestras opiniones limpias y se ejecuta, quiero que veáis lo que aparece aquí Profe, en ese código también se remueve los nulls, o sea los campos que no tienen información? Sí, eliminar el white space. Ah, qué pena. Vale, gracias. Entonces, esto es solo para todas las opiniones que tenemos y podemos ver buen, calidad, rápido, pero ¿y esto lo podemos hacer para cada tipo de producto? También. Entonces, os he puesto aquí un ejemplo para que vaya para cada tipo de producto. Para auriculares Bluetooth, otro que vaya para Expreso, esto vosotros lo adaptáis. a vuestro conjunto de datos. Lo único que tenéis que tener en cuenta es que tenéis por un lado las opiniones por aquí y por otro lado el tipo de producto. Con eso lo ajustáis a la vuestra. Ejecutamos y os va a devolver un gráfico con estas distintas nubes de palabras para cada uno de los productos que hay. Entonces, esto es simplemente un ejemplo de todas las que podemos hacer. Quiero que os deis cuenta que aquí a la derecha puse introducción, pues lo dicho, si hubiésemos ido poniendo poquito a poco, lo ideal hubiese sido ir generándolo poco a poco, todos nosotros, paso a paso, ¿vale? Entonces tendríamos aquí todo lo que sería nuestro índice para poder acceder a ello. Una vez que hemos desarrollado, porque con esto que hemos visto aquí he ido muy al grano, Pero es que esto funciona como un Word. Ya veis que aquí podéis el distinto header, es decir, si queréis que sea un título principal, un subtítulo, un sub-subtítulo, etc., para negrita, todo eso lo podemos modificar aquí. La cuestión es, ¿y ahora qué hacemos? Pues para guardarlo simplemente habría que darle a need, que es compilar, le decimos en qué lo queremos, pues en Word. si le doy a ejecutar aquí en Word, se me está viendo en otra pantalla que os lo voy a compartir, ¿vale? A ver... Aquí. Lo podéis ver, ¿verdad? Pues fijaos, todo lo que hemos escrito aparece aquí, esto aparece porque pusimos echo igual a true, pero si hubiésemos puesto en false, esto no habría aparecido nada. Aquí nos aparece nuestra descripción del dataset, pero dijimos que esto se podía ver un poquito mejor con Keyword, y fijaos que nos viene esto en formato tabla, que se puede modificar, aquí se ve un poquito feo así, porque no cabe el suficiente espacio, ¿vale? Pero lo bueno de todo esto es que le podemos dar el formato que queramos. Nos saldría el histograma, la matriz de correlaciones, lo gráfico a continuación se muestra en las distribuciones de variables cuantitativas, se ponen automáticamente, todo lo que hemos estado viendo mezcla lo que es ese word y ese r del que habíamos hablado, ¿vale? Entonces esto es un poco la lógica que va detrás. Fijaos que todo lo que hemos construido, como tiene echo igual a false, no aparece y solo aparecen las salidas que indicamos. Como digo, lo ideal hubiese sido haber puesto texto entre todas estas salidas, habiéndole dado un... describiendo un poco lo que hay. La evolución de la serie temporal. Esto es una forma de sacar todos estos resultados de forma dinámica. Que mañana me entra otro dataset con datos distintos. No tengo que tocar nada. Se me va a ejecutar de nuevo. Os voy a enseñar por último algo que os va a gustar y con eso os tengo que dejar. donde os voy a pasar también, en vez de este que es de Word, hay uno que es HTML. Os voy a pasar estas dos versiones. ¿En qué se diferencian? En nada. Todas son exactamente igual, salvo al final. Como os comenté antes, las tablas dinámicas, os las voy a presentar también. Esto es bastante sencillo. Es Data Table, metéis un Data Frame y de repente os aparece esto aquí, donde, oye, quiero solo las 5 primeras filas. ¿O qué quiero las 10? Pues aquí le damos a 10 y se nos viene a 10. ¿Qué queremos aquí seleccionar? ¿Cuáles son los valores igual a 5.1? Pues selecciono el 5.1 y solo me aparecen los que tienen 5.1 en algún lado. Pues esas cositas que pueden ser un poquito más de interés, ¿vale? Aquí tenemos otro que es para la matriz de correlación y os voy a enseñar uno que os va a gustar. Una de las librerías que tenemos que cargar es Plotly, donde si ejecutamos, todo lo que hay aquí es ir añadiendo histogramas de acuerdo al tipo de la variable categórica que tenemos, ¿vale? Aquí lo único que tendréis que sustituir es estos valores por la categórica con la que estáis trabajando. Ese sí que suele ser relativamente estable a lo largo de los informes que tenemos, porque siempre queremos estudiar, pues, o tipo de flores, o tipo de productos, y siempre suele ir cerrado, o nacionalidades, etc. Aquí tenemos un histograma donde si alguien quiere venir a ver el de Setosa, pues le da aquí. Y ve el histograma de Setosa para Setarler. ¿Qué queremos hacer de versicolor? Pues cambiamos. ¿Queremos virginica? Como digo, estos son scripts que tenéis que vais a ir ajustando un poquito al gusto, ¿vale? ¿Qué tenéis que tener en cuenta? Pues únicamente cuáles son las variables categóricas que tenéis y sustituirlo aquí, ¿vale? Esto, si lo hacemos en Word, va a dar error, hay que hacerlo a HTML, ¿vale? Si lo hacemos a HTML, dejadme que os comparta de nuevo la que se me acaba de abrir, aquí. Podéis ver la verdad, y es exactamente todo lo que teníamos antes, pero en formato HTML. Si aquí se lo vamos a pasar, no le importa que se abra en el navegador, pues le damos a HTML y entonces sí que podemos trabajar, fijaos, con estas tablas dinámicas, donde alguien puede venir aquí y lo hace todo mucho más interactivo. Muy bien, pues esto es como esa introducción a R Markdown. En definitiva, ¿qué quiero que sepáis de esto? Los documentos espero que los podáis tener hoy mismo, que yo se los voy a pasar a Luisfec para que trabajéis un poquito con ellos y los adaptéis a vuestros conjuntos de datos. En definitiva, R Markdown es una mezcla entre Word y R. Va interaccionándose, va intercalándose y simplemente es importante tener en cuenta cuando escribimos y cómo, que sea lo más generalista posible y a la hora de programar, pues seleccionar exactamente los datos que queremos de una forma que no nos dé errores. Es fundamental. Por eso le he dedicado la primera parte de la clase a hablar de cómo extraer datos, de cómo pones puntos de corte, de forma que sea generalista. Porque si no lo hacemos de forma generalista, tendremos errores, tendremos problemas. Creo que eso al final es lo que tiene que ir por debajo. Entiendo que ha sido mucha información y todo así como de golpe, ¿vale? Os voy a pasar igualmente de forma paralela un script en Python, en Google Colab, que hace exactamente lo mismo que tenemos aquí, ¿vale? De tal forma que cuando avancéis un poquito más aprendiendo Python o viendo otro, pues podáis de alguna forma poder hacer esa comparativa y poder adaptarla igualmente, de acuerdo al gusto. Bueno chicos, pues alguna duda por aquí, supongo que muchas, ¿no? Al fin y al cabo, creo que os sentiréis mucho más cómodos, cómodas cuando pongáis las manos en la masa, al fin y al cabo. a ver si a lo largo de hoy y mañana podéis tener estos conjuntos de datos con los que he estado trabajando y ya sabéis que si tenéis algún tipo de duda, de problema o alguna petición extra siempre podéis contactar conmigo, ¿vale? Profe, una pregunta Sí. Esos son los informes que normalmente piden en las empresas donde usted labora, donde trabaja Sí, me he encontrado de todo tipo generalmente pero generalmente quieren un informe Entonces, todo va a depender seguramente del equipo de trabajo en el que estés trabajando desde una perspectiva técnica. Por ejemplo, nosotros solo programamos en Python, pues entonces esto que acabamos de ver en R habría que hacerlo en Python, que es prácticamente similar. que trabajan en R, pues lo van a querer en R y muchos de ellos siempre van a decir porque estás trabajando con otro departamento que te dice pues yo solo quiero que me des un informe descriptivo me da igual de donde salga y solo quieren un documento Word como el que os he enseñado, que pasáis a PDF y que lo quieran ¿Sí chicos? Vale, pues cualquier tipo de duda ya sabéis que estoy aquí para que me podáis escribir espero que os lleguen cuanto antes estos documentos y ha sido un placer conoceros ¿vale? no sé si... muchas gracias muy bien, ya habláis con Luis Fer que sabéis que tenéis este sabéis que tiene este problema técnico que aparentemente no ha podido conectarse aquí con nosotros así que termináis de organizaros con él y le transmitís mi mensaje de que estoy aquí para cualquier cosa que necesitéis, ¿vale? Pues ha sido un placer, chicos. Espero que vaya fenomenal y ya sabéis, os pasaré los scripts y cualquier duda que os salga, me podéis escribir. Sí, por favor, profe, gracias. Sí, por supuesto. Que tengáis muy buen día. Chao, profe, muchas gracias por todo. Adiós a vosotros. Gracias, feliz día, hasta luego. Profe, ¿dónde te podemos escribir? que creo que no entendí, si tenemos dudas. Sí, podéis escribirme a... Voy a poneros aquí. A ver. De pronto usted nos va a dar más clases. Creo que solo tengo con vosotros esta única de aquí. Fijaos, os escribo aquí mi... Os dejo aquí mi correo de la Complutense, aunque tengo uno también de la UNIR, pero no me acuerdo ahora mismo de memoria cómo es. podéis escribirme ahí para lo que necesitéis ¿vale? pues un placer chicos y que vaya todo muy bien ¿se me escucha? sí una duda nada más antes de que se retire perdón pero no lo escucho tal vez ahí me escucha ahora sí Ya, ¿cómo está? Una consulta, ¿verdad? Lo que pasa es que tenía una duda nada más. Como estamos trabajando con este mismo de la actividad 2, una parte de automatización, mi duda básicamente era si, por ejemplo, con R es probable automatizar directamente sin necesidad de, por ejemplo, necesitar una API o algo así para conectarse con Power BI. hay alguna posibilidad, por ejemplo, que esta automatización de datos se realice, por ejemplo, la limpieza en R en mi invento, y esto se automatice para que se vaya cargando solo a Power BI, pero sin necesidad de una API ni algún tipo de conector, digamos, porque, por ejemplo, lo que vi que Power Automate no lo hace, o sea, simplemente es como que puede mover archivos, puede unir, así, pero no logra, digamos, como que esta limpieza automatizarla, ¿no es cierto? Entonces es una automatización directa, digamoslo así. Sí, entiendo a lo que te refieres. Desafortunadamente no te puedo responder. No te puedo responder porque yo con Power BI no he trabajado mucho y no tengo ese conocimiento. Pregúntale esto a Luis Fer y si no sabe contestar, pues siempre puedo explorar un poquito a ver cuáles son las alternativas que hay. Ya, chévere. Eso no me ha dado duda, pero bueno, muy amable y gracias por invitarme. Gracias, pase bien, cuídese. Un placer, hasta luego.

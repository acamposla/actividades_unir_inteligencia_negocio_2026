Perfecto. Vale. Pues bueno, buenos días, buenas tardes, buenas noches, como digo otras veces, pues dependiendo un poco de o bien en qué parte o en qué lado del charco estéis o bien si lo estáis viendo para los que no lo estén viendo ahora mismo en directo. Perfecto. Vamos a seguir con, os recuerdo, un poco de recapitulación. Estamos en el bloque 2. Acordaros que cada dos temas era un bloque y este bloque 2, que trataba de preprocesamiento y modelización de los datos para hacer una buena visualización, pues con este tema acabaría este bloque. Y el objetivo de la clase de hoy es ver cómo aplicar técnicas exploratorias, o sea, para explorar los datos, para que nos permitan segmentar y agrupar de manera visual los clientes o grupos de clientes para identificar patrones en conjuntos de datos complejos. Y básicamente la estructura es los mismos apartados que tiene el tema. Casi si veis yo creo que incluso es exactamente el mismo título que viene en el tema. Y hay un quinto apartado que os quiero enseñar esto que vamos a ver en la clase de hoy, hecho de una manera práctica sobre Power BI. Entonces veremos un poquito esa parte. Yendo a lo que era esa estructura del tema, el 4.1 El 4.1 es el desafío que supone hacer el análisis de datos en entornos profesionales No es un análisis de datos como se haría en entornos más científicos, sino que en entornos profesionales lo que queremos es que las cosas sean visuales y que sean accionables, o sea, que nos permita tomar decisiones. Entonces, un poco el reto, el reto como lo he llamado, el reto analítico dentro del entorno de los negocios, de inteligencia de negocios, es detectar cuáles son los factores, qué factores son los que influyen, pues normalmente en las ventas, en el abandono, en la satisfacción de los clientes, en las distintas variables. cuáles son los factores que influyen en todo eso. Y eso es, analizando los datos, tenemos que poder detectar esos factores. Y en la lección de hoy lo que vamos a ver además es descubrir segmentos de clientes, usuarios, votantes, lo que sea, según el entorno en el que estemos trabajando, con necesidades comunes o necesidades parecidas que nos permitan agruparlos para paquetizar y para hacer una semi-personalización, porque parece que personalización siempre se está refiriendo a uno a uno y, bueno, esto es una personalización, pero en grandes grupos o en grupos homogéneos de consumidores. En realidad lo que estamos hablando es de una combinación clave de técnicas En concreto de modelización de datos, vamos a modelizar datos y hacer un análisis visual exploratorio O sea, cogemos nuestros datos y nos ponemos a analizarlos y explorar esos datos para intentar sacar información de todos ellos, pero siempre de manera visual. Y, muy importante, no solo queremos predecir, que también, y ya veréis que alguna de las cosas que hacemos, no solo queremos predecir, sino cuando predecimos algo, comprender por qué y explicarlo visualmente. O sea, no es decir, pues mira, esto vas a vender un 25% más. Dice, ya, pero ¿por qué? ¿Por qué voy a vender un 25% más? Pues ver cuáles son las variables, los ítems, los factores que han influido en que haga eso y visualmente el poder, valga la redundancia, verlo. Las capacidades que vamos a desarrollar es entender la modelización descriptiva, que es en el fondo esto que estábamos hablando, la descriptiva y la predictiva y todo siempre en un entorno de visualización. Y aplicar análisis exploratorio para descubrir patrones, esos patrones de comportamiento de los consumidores que nos permitan hacer esas personalizaciones o esas paquetizaciones. Y vamos a implementar clustering, o sea, técnicas de segmentación, hacer esos clusters de consumidores y también de reducción de dimensionalidad. Acordaros que cuando veíamos en uno de los primeros temas, es decir, cuando tenemos muchas dimensiones, visualmente es muy difícil representarlo. Entonces, vamos a reducir las dimensiones para poder representarlo y poder extraer conclusiones y extraer insights de manera visual reduciendo la dimensionalidad. Y todo esto lo vamos a ver en concreto sobre las herramientas de Business Intelligence, en concreto hoy vamos a ver con Power BI. Tenía por aquí un ejemplo para comentaros, pero vamos a ver, los ejemplos os podéis imaginar Tenemos una base de datos de clientes, tenemos sus datos de edad, los ingresos mensuales, el gasto mensual Y si han abandonado o no han abandonado el servicio que les estamos ofreciendo Tenemos esa base de datos y lo que quiero es, oye, ¿cuáles son las variables que se relacionan con el abandono? Uno es para entenderlos, puede ser para entenderlos, ¿por qué? Pues para solucionarlos. Oye, es que la gente me abandona o hay una tipología de clientes más propensos al abandono o las variables que influyen en que me abandonen los clientes son estas. Pues bueno, primero puedo hacer un plan de la empresa para ponerle solución. Pero luego también el poder sacar también unos modelos predictivos para que, oye, cuando un cliente se acerque o la predicción sea que me va a abandonar, pues antes de eso puedo hacerle una oferta de retención, algo. Entonces, siempre daros cuenta que es un poco como en los modelos, siempre estamos actuando de dos maneras. Una, con el retrovisor, o sea, mirando hacia atrás en el tiempo para entender lo que tenemos, entender nuestro negocio, nuestros clientes, todas nuestras variables de negocio, lo miramos por el retrovisor. Y eso nos va a explicar muchas cosas. Lo estamos viendo hacia atrás. Pero claro, también lo que queremos es tomar decisiones y cuando tomamos decisiones de cara al futuro, pues algunas decisiones puede ser arreglar lo que tenía mal o aprovechar lo que tenía bien en lo que he hecho históricamente, pero también el poder predecir cómo se van a convertir el mercado, mi entorno, el entorno sobre el que tengo que actuar, mirando de cara a futuro. Voy a intentar, hay varias cosas que estoy metiendo en las presentaciones y para que luego un poco lo entendáis, en los cuadraditos estos estoy intentando poner un poco claves importantes que hay que entender de la diapositiva de turno. Luego veréis también que estoy intentando hacer una especie de checklist o de resúmenes al final de cuáles son los conceptos que hay que tener claros en la lección. Pues aquí es ver el modelo, cada técnica va acompañada, cada técnica de las que vamos a ver tiene una visualización interpretativa y entender los conceptos que hay dentro de las técnicas. No nos quedemos solo en los nombres de las técnicas o alguna cosa así. Es más importante el entender. Si entendéis el concepto, muy probablemente el nombre luego os vaya a salir o vayáis a ser capaces de relacionarlo. O sea, esto no va de, es que sé decir, sé nombrar, nómbrame cinco técnicas. Pues prefiero que seas capaz de contarme qué hace una técnica que me recuerdes el nombre. De hecho, la mayoría, si os habéis dado cuenta, la mayoría de las cosas que tienen términos anglosajones o tal, suelo intentar daros la traducción, por si os es más fácil acordaros conceptualmente, os suelo dar la traducción al castellano, al español, para más o verlo. Y los objetivos de hoy, pues eso, fundamentos de la modelización, ¿cuáles son los principios para la modelización de los dos tipos que os decía? La predictiva, mirando hacia adelante, y la descriptiva, que es mirando hacia atrás. Y orientada a crear visualizaciones que nos sirvan para eso y que nos comuniquen los insights, el conocimiento que sale de nuestros datos de negocio de manera clara. Vamos a trabajar en análisis exploratorio avanzado y vamos a aplicar algunas técnicas fundamentales del análisis exploratorio que nos sirven para identificar patrones entre variables, entre clientes, entre segmentos, ¿vale? para agrupar y generar conjuntos homogéneos o muy parecidos, similares de datos en entornos con datos muy complejos. También, alguna vez comento, para datos complejos también vale para datos no complejos. Lo que pasa es que muchas veces cuando los datos no son complejos, con la simple visualización de unas tablas o lo que sea, pues nos puede valer. Esto nos aporta más, cuanto más complejidad hay en los datos, más jugo les vamos a sacar y más factor diferencial tienen todas estas técnicas visuales. Vamos a ver técnicas de agrupamiento, que son tanto el clustering, o sea, las segmentaciones, el análisis de clústeres, y la reducción de dimensiones, que ya vimos en uno de los, y comentamos bastante con un cierto detalle en alguno de los temas iniciales, como eran el análisis de componentes principales y el TSNE, que luego recordaré exactamente qué era lo que significaban esas letritas. Y todo esto en entornos de Viernes Intelligence, para simplificar datos que en principio fueran complejos. Y visualizaciones interpretativas, o sea, esto integrarlo con visualizaciones que nos permitan interpretar resultados y que nos ayuden a la toma de decisiones, que es en el fondo lo que estamos todo el rato buscando con todas estas técnicas. Y pasamos a la primera de las cosas que os decía, de esos objetivos. La modelización descriptiva. Acordaros, modelización descriptiva, la del retrovisor. es busco explicar el comportamiento actual o los resultados actuales que me están marcando y que me están enseñando los datos en función de las relaciones existentes entre las variables. Esto lo que me permite es, todo esto que ha ocurrido y en el punto donde hemos llegado, ¿por qué ha pasado? ¿Qué es lo que está ocurriendo? ¿Qué es lo que está ocurriendo en mi negocio y en mi entorno de negocio y por qué ha pasado? Y esto es previo antes de ponerme en plan futurologo a predecir el futuro. Primero tengo que entender el negocio para poder intentar luego que me sirva de algo esas predicciones de futuro. Porque si no, pues tendré predicciones, pero realmente va a ser difícil que sea capaz de actuar porque no he entendido de verdad por qué he llegado a ese punto o por qué me puede acabar, por qué me está dando esa predicción. El objetivo de la modelización descriptiva, como decía, es explicar relaciones y patrones históricos entre variables. Eso sería una definición más o menos académica. Y hay una serie de técnicas clave que son las que mayoritariamente utilizaremos. Ahí siempre hay muchas técnicas, pero normalmente lo que haremos es, trabajaremos y os encontraréis con análisis de correlaciones, con regresiones lineales y con el análisis de la varianza. El análisis de correlación lo que hace es medir la fuerza de la relación y el sentido de la relación entre dos variables. Por ejemplo, la satisfacción de clientes con el tiempo de entrega de los productos. Pues si tardo mucho en repartirlos, en entregarlos, la satisfacción del cliente lo más probable es que sea, cuanto más tarde, menos satisfacción. Si crece el tiempo, decrece la satisfacción. Están muy relacionados, con lo cual probablemente tendrán una correlación muy alta, la relación entre esas dos variables. y es correlación porque es una relación mutua. Relación entre esta y esta es correlación. Y el sentido, pues si esta crece y esta también crece, tienen el mismo sentido. La correlación será positiva. Si cuando una crece, la otra decrece o a la inversa, la correlación será negativa. La correlación siempre la veréis estadísticamente, es un numerito entre menos uno y uno. Correlación negativa es eso lo que os decía, cuando una va en un sentido y la otra va en el contrario, positiva es que las dos van en el mismo sentido. Dos variables tienen mucha relación, o sea, tienen una correlación alta cuando se acerca al 1, la correlación Si se acerca al 0 es que la relación que tienen es muy bajita Entonces, cuando veáis tablas por ahí de correlaciones o veáis esto, es que estas dos variables tienen un coeficiente de correlación del 0,98 Es que esos son dos variables que se relacionan muchísimo. Prácticamente sabiendo cómo se comporta una, seríamos capaces de saber cómo se comporta la otra. Esto a veces tiene trampa. Y es lo de la famosa historia esta de diferencia entre causalidad y casualidad, ¿vale? Que se dice. Y creo que en una de las primeras sesiones incluso os hacía comentario de un friki de estos, pero que está muy gracioso o muy curioso, que tiene una web que si buscáis en Google, Spurious Correlations, o sea, correlaciones espúreas, tiene una web donde tiene correlaciones altísimas, Que podrías decir, oye, pues esto me sirve prácticamente para predecir esto otro y que no tiene ninguna relación. Pues yo qué sé. El número de accidentes mortales al montarse en un ascensor correlaciona al 0,98 con el consumo de mantequilla en el estado de Maine. Y dices, ostras, eso no tiene absolutamente ningún tipo de relación. Pues bueno, resulta que por pura casualidad correlaciona mucho. Y hay algunas muy graciosas. O sea, si tenéis curiosidad, os podéis echar un rato echándoos unas risas viendo correlaciones espurias. Pero vamos, no es nuestro caso ni es lo que nos interesa. Es para que veáis que no siempre las correlaciones nos indican algo. Obviamente, cuando estamos trabajando con conjuntos de datos que tienen que ver con nuestro negocio, las variables que estamos midiendo, lógicamente sí tienen relación. El cómo trato, nos comenta nuestro compañero y dice, recuerdo la relación, es que me sale con iniciales, supongo que será quizá, es Francisco José quizá el que lo está diciendo, la relación entre número de piratas y temperatura global. Efectivamente, Nicolas Cage se ve que tiene absoluta pasión por Nicolas Cage, el señor este del Spurious Correlation Y flipáis porque las cosas que aparecen relacionadas con Nicolas Cage son absolutamente peregrinas O sea, tiene mucha, mucha gracia Y Nicolas Cage, bueno, de hecho me consta que Nicolas Cage ha hecho en alguna intervención y en algunas declaraciones y tal ha hecho bromas con esto. Vuelvo al análisis de correlaciones de verdad, no al de cachondeo. Como decía, mide la fuerza y el sentido de esa relación. ¿Y cómo lo visualizamos? Pues se visualiza de dos maneras fundamentales. Un diagrama de dispersión, que es que tengo un montón de puntos y lo que veo es si esos puntos están dispersos o están agrupados. Si están agrupados es que se supone que la correlación es más grande, si están muy dispersos pues no. y la matriz de correlación. Hay veces que simplemente lo que tengo que hacer es poner variables en filas, variables en columnas y ver cada variable de esas, cómo se relaciona con la otra y dame su coeficiente de correlación. Eso muchas veces luego, pues lo que cogen y a lo mejor es que se pueden pintar con un mapa de calor. Es decir, pues si la correlación es más alta de 0,75 o más baja de menos 0,75, ponmelo en verdecito o en azul oscuro y si la correlación es muy baja me la pones en rojo, si está muy cercana a cero, tanto en positivo como en negativo, me lo pones en tal. Bueno, pues con eso visualmente podemos estar viendo las cosas. Y luego también las correlaciones, la experiencia también te dice si una correlación puedes utilizarla, por ejemplo, como variable predictiva de otra. en determinados negocios una correlación de 0.75 está muy bien para utilizarla como variable predictiva y en otros negocios todo lo que baje de 0.9 pues prácticamente te va a inducir a error, pues eso te lo va dando la experiencia ¿vale? Y luego como os decía si estamos con unas variables muy centradas en un negocio, pues normalmente van a tener una cierta relación y no van a existir correlaciones espúreas. Cuando de repente cojo y estoy queriendo predecir las ventas de pisos y de repente cojo y empiezo a meter un montón de variables macroeconómicas de un país, pues dices Oye, ¿el IPC, el índice de precios al consumo, tiene relación con la compra de las casas? Bueno, en principio puede parecer que sí, pero a lo mejor no lo tiene. porque las casas, los elementos con los que intervienen en el precio de la vivienda pues no están medidos por el índice de precios al consumo que no incluye ni el ladrillo, ni el precio del suelo, ni un montón de cosas sino que incluye los productos más o menos de la cesta de la compra o del hogar bueno, pues ese tipo de cosas hay que tenerlo en cuenta Otra de las técnicas, regresión lineal La regresión lineal es un método matemático Estoy seguro que muchos lo habréis dado incluso en el bachillerato O incluso habréis hecho regresiones lineales el propio Excel Pones una serie de datos y puedes calcular su recta de regresión Eso es lineal, efectivamente es que puede ser representado por una recta. La regresión lo que hace es que estima el impacto de una o varias variables, la variable que quiero predecir o que quiero medir cuál es el impacto, la variable que quiero estimar en función de las otras variables. pues yo que sé típico pues quiero predecir las ventas en función de la inversión que tengo en marketing y del y del número de visitas a mi web vale pues la variable dependiente sería las ventas y las variables independientes que me ayudan a predecir pues oye si me suben las visitas a la web me suben y subo la inversión en marketing pues probablemente vaya a tener más ventas bueno cómo se relacionan pues mira tiene más peso la inversión en marketing o no tiene más peso el número de visitas a la web a pues oye voy a incentivar las visitas a la web y pues yo que sé voy a hacer un ahora con la inteligencia artificial todo esto cambia pero voy a hacer un plan de SEO, de SEM y de no sé cuánto. O no, voy a hacer inversión en medios o voy a lo que sea. Con eso lo que tengo es una combinación lineal, que es una variable es combinación lineal de las otras. O sea, las ventas es un numerito. Las ventas sería igual a un numerito, un coeficiente multiplicado por la inversión en marketing, más otro coeficiente multiplicado por el número de visitas a la web. Y esos coeficientes son los que acabas calculando y los que me acaba dando la regresión lineal. Aparte, eso si me acaba dando una recta, puedo tener unos márgenes o unas bandas de confianza a lo largo de esa recta de regresión. y la otra técnica sería el análisis de la varianza en estadística la mayoría de los nombres que se le da a las cosas suelen intentar ser bastante representativos del concepto que hay debajo la varianza lo que hace es que se refiere a la variación de los datos a la información que te da la variación de los datos. Yo tengo una variable, los datos de esa variable varían mucho, poco, regular, se dispersan de una determinada manera, con eso puedo calcular la varianza de esos datos y estudiando, analizando la varianza, me da información sobre tanto esa variable que puedo estar midiendo con su varianza, como cuando tengo un montón de variables, el cómo varíen todos esos datos me da mucha información. Entonces, lo que evalúo, el análisis de la varianza evalúa si existen diferencias estadísticamente significativas entre esa variación de datos, entre grupos y eso acaba dándome grupos de datos que están agrupaditos, valga la redundancia, y que podría decir que eso es un segmento y otro grupo de datos que se da de otra manera, han variado los datos de otra manera. Y eso se puede visualizar de distintas maneras. Pues yo que sé, típico cosa que se hace en análisis de la varianza, pues voy, clasifico a mis clientes en cliente oro, cliente plata y cliente bronce. Esto es muy típico en programas de fidelización. Seguro que lo habréis visto y probablemente incluso le llaman oro, plata y bronce. Luego ya cuando dices, es que los oro ya me dan poco, dices, espérate, vamos a poner el platino y el diamante. Pues eso, pero bueno, tengo los clientes, pues voy a comparar el ticket medio de clientes oro, clientes plata y clientes bronce y con eso los voy a segmentar. Pues los que se acercan dentro de una banda de ticket medio serían de un tipo, serán de otro y todo eso lo puedo tener con el análisis de la variante. Ideas clave que quiero que saquéis de aquí es que la modelización descriptiva se relaciona con explicar relaciones y patrones históricos, No en predecir. Modelización descriptiva, acordaros, el retrovisor. Explicar lo que ha pasado. Explicar con los datos históricos y sacar patrones. Bueno, ya veremos, hay montones de gráficos que se utilizan para este tipo de cosas, ya los iremos viendo. Y luego hay otro tipo de modelización que es la predictiva. En vez del retrovisor, mirando hacia adelante. Vamos a poner los prismáticos o el catalejo o el periscopio o lo que sea. Vamos a mirar hacia adelante. El objetivo de la modelización predictiva es estimar comportamientos futuros a partir de los datos históricos. Esos mismos datos históricos que antes he dicho he analizado para intentar comprender cosas, ahora voy a estimar con el histórico que tengo cómo se va a comportar esto, mi negocio, en el futuro. Técnicas clave, fundamentalmente, dos La regresión logística y los árboles de decisión La regresión logística Y esto es muy importante y lo pongo por ahí Esto además es típica O pregunta de examen o concepto Para utilizar en alguna pregunta de examen No confundáis la regresión lineal Con la regresión logística Las dos son regresiones, pero utilizan cosas distintas. La regresión logística predice variables categóricas. Por ejemplo, el abandono de los clientes. Si mis clientes se van, se dan de baja. Soy una compañía telefónica y la variable que tengo es una variable categórica que tiene dos categorías, que es abandona, sí abandona o no abandona. Tengo esas dos categorías. Vale, pues para una variable categórica lo que acabo teniendo es la probabilidad para cada uno de los individuos o para cada uno de los segmentos. Este segmento tiene una probabilidad de abandono, de darse de baja de la compañía telefónica del 75%. Y de no abandonarlo, en este caso sería de no, pues el 25. Y así para cada uno de los individuos o para cada uno de los clusters. O sea, tengo una probabilidad de esa variable de cada una de las categorías de esa variable categórica. ¿Y cómo se visualiza? Pues hay muchas maneras, pues a lo mejor un simple gráfico de barras con la probabilidad de abandono por segmento, segmento A, segmento B, segmento C o clientes oro, clientes plata, clientes bronce. Pues resulta que la probabilidad de abandono de los clientes oro es más baja. Oye, pues encima facturo el ticket medio, es más alto y tal, pues bueno, pues empezaré a mirar cosas, pues frecuencia de visitas, frecuencia de llamadas, volumen de llamadas, si utilizan más datos o menos datos, si son tal, pues eso lo iríamos viendo. Y también se suele ver y suele visualizarse con mapas de calor, ¿vale? Con la probabilidad, cruzo dos variables y cuál es la probabilidad en el cruce de esas dos variables, cuál es la probabilidad que me da de que los que hacen esto hagan esto otro, ¿vale? Pues a partir de una determinada probabilidad le pongo un colorcito, no sé cuánto, y en ese gráfico, en ese mapa de calor, estaría directamente pudiendo tomar decisiones. Y luego hay, bueno, el gráfico típico es el que os decía, la probabilidad de churn o de abandono según el tipo de tarifa y cruzado con la antigüedad del cliente. Pues ahí podemos estar viendo, porque esas cosas se comportan de maneras muy peculiares. A lo mejor resulta que dices, no, es que los clientes que llevan mucho tiempo y que tienen tarifa alta, tienen una probabilidad alta de irse. Y después a lo mejor dices, hombre, sí, vamos a ver, lleva mucho tiempo y le llevas cobrando un montón de dinero, ese tío está mirando otras cosas. Bueno, pues a lo mejor no, a lo mejor, y esas son las cosas que tenemos que analizar, a lo mejor precisamente dices, mira, con este no corres ningún riesgo porque se ve que o le da pereza cambiarse o es que está muy contento con tus servicios o lo que sea, que a pesar de que sea de los que más te está pagando, el tío sigue desde hace un montón de tiempo. O te puede pasar al revés. Es decir, es que el riesgo de abandono que tengo es muy alto, pues lo que voy a hacer es a lo mejor, como hacen algunas compañías telefónicas, pues mira, tengo que tener mucho cuidado porque a los que llevan mucho tiempo, lo que tengo que hacer es directamente aplicarles todos los descuentos que aplico a los nuevos clientes, se los tengo que dar a los que llevan mucho tiempo. Se los doy automáticamente, aunque no me los pidan. Esto es una cosa también que están haciendo, por ejemplo, las compañías telefónicas lo están haciendo ahora con una cierta asiduidad. Pues ese tipo de cosas las sacamos y ese tipo de decisiones los sacamos de ahí. Árboles de decisión. Los árboles de decisión lo bueno que tienen es que gráficamente nos dan una jerarquía de las decisiones que se toman en el negocio. Entonces, lo que vas a ver visualmente muy fácil es cuáles son las reglas del negocio. Un poquito esa jerarquía, el modelo jerárquico de reglas es si no sé qué, entonces no sé cuántos. Si tiene tal comportamiento, entonces va a tener este otro Si le subo el precio, la probabilidad de no sé cuánto sube ¿Cuál es la ventaja que tiene muy buena de esto? Es que es súper transparente, es muy visual Se llama jerárquico porque son los típicos árboles de decisión O sea, tienes un nodo que es la decisión o el proceso que estás siguiendo y automáticamente qué es lo que pasaría si me planteas esto y puedo tomar dos acciones. Lo bueno que tiene esto es que visto sobre un gráfico es muy fácil entender cuál es el proceso de negocio, es muy transparente y es muy fácil seguir el razonamiento en cada uno de esos pasos, cada uno de esos nodos. Nos permite entonces la visualización, pues un diagrama de árbol Sale de un nodo, de ese nodo salen varios nodos que están a la vez unidos por esa serie de acciones o de decisiones Y cada nodo representa una condición, una condición o una decisión Por ejemplo, para los mayores de 35 años pueden tener ingresos mayores o menores a 1.500 euros. Para los que tienen más de 35 años y tienen menos de 1.500 euros, a estos les ofrezco tal producto. Para los que tienen más de 35 años y tienen ingresos superiores a 1.500, les ofrezco este otro producto. Y eso rápidamente, de un vistazo, estás viendo cuáles son, cuál es la lógica, las reglas lógicas del negocio y de la decisión. Entonces, la regresión logística es muy precisa o mucho más precisa numéricamente. Los árboles de decisión, esa precisión numérica es menos importante, pero en cambio es visualmente muy fácil de entender. Y es muy fácil seguir el razonamiento del modelo paso a paso. Como os decía, y por eso lo he puesto ahí abajo, una cosa que suele generar confusión, la diferencia entre regresión logística y regresión lineal. La lineal es para variables de valores continuos, por ejemplo, las ventas. Yo tengo las ventas, las puedo representar con una recta o una curva de ventas. Y la regresión logística son categorías. Esas categorías que para cada una de esas categorías me da una probabilidad. Y el ejemplo es eso. Abandono, sí, no. Probabilidad de abandono, sí. Probabilidad de no abandono, tal otra. Uno son valores continuos, otros son valores o categorías Y nos da probabilidades Esto es muy interesante Mira, el cuadradito este se supone que adornaba esto y me lo he dejado por ahí bailando Bueno, voy a la siguiente slide Y vamos al análisis exploratorio que lo veréis en muchos sitios como EDA, porque son las siglas en inglés de análisis exploratorio de datos. Es análisis exploratorio de datos que encontraréis en la literatura, como digo, como EDA. ¿Y qué es lo que nos permite esto? Pues descubrir, bueno, lo de inesperado ahí me he tirado un poco un triple. No es tanto lo inesperado como lo no evidente. Las cosas que son evidentes, ya las puedo estar viendo o imaginando de una manera evidente. El análisis exploratorio de datos es el punto de partida para cualquier proceso analítico riguroso. O sea, si vamos a empezar un proceso analítico, tenemos que empezar, nuestro punto de partida es explorar los datos de manera analítica. Y el objetivo es descubrir patrones, relaciones, anomalías. No es, y es muy importante, no es confirmar hipótesis ya fijadas o hipótesis que tienen una cierta evidencia. Por eso hablaba de lo inesperado o lo no evidente. No es lo que se utiliza y mucho cuidado porque esto es una cosa en la que sí se suele caer. Tengo una hipótesis de negocio, bueno, es que los clientes que hacen tal cosa se comportan de tal manera o estos son los que tienen más riesgo de irse. Y entonces me voy a explorar los datos para que me dé la razón. Bueno, pues para eso no es el análisis exploratorio, aunque hay un montón de veces que se comete este error. Este es un error típico. principios claves del análisis exploratorio de datos iteración continua o sea, esto es un proceso iterativo y cada iteración el proceso no es lineal o sea, esto no cojo hago esto, pum, ya lo he acabado voy a lo siguiente, voy a lo siguiente no cuando he explorado los datos y he sacado una determinada información, eso me permite para reformular las preguntas que me estaba haciendo inicialmente o para filtrar. Es decir, oye, pues vale, esto ya... ¿Y cómo se comporta esto? Siguiente iteración. ¿Y cómo se comporta esto a lo largo del tiempo? ¿Y cómo se comporta esto por regiones? ¿Y cómo se comporta esto? O sea, voy haciendo iteraciones que me permiten permite ir aprendiendo más cosas, bucear. Esas son las distintas iteraciones. Según me van apareciendo hallazgos, buceo dentro de esos hallazgos. Otra de las cuestiones es la flexibilidad metodológica. Y vamos a poder, y son las herramientas, la verdad, visuales que tenemos, como el Power BI, el Tableau, etc. Y dentro de todas las herramientas que tiene dentro, pues nos va a permitir adaptarlo a lo que vayamos necesitando un poco con el negocio. O sea, adaptar herramientas y técnicas a los datos y al contexto de negocio. Eso es lo que es la flexibilidad. no hay solo una manera correcta de explorar por eso, si no, si el próximo día os diera resolver la actividad tal, y entonces dices, es que yo no lo he hecho exactamente como el profesor lo ha hecho en clase eso no significa que esté mal, a lo mejor hasta está mejor que lo que ha contado el profesor, porque simplemente habéis sido flexibles y lo habéis hecho de otra manera, habéis adaptado una técnica y la habéis utilizado de otra manera. O habéis utilizado una técnica distinta porque a vosotros os parecía visualmente más evidente o más fácil. Y de hecho esto os lo encontraréis incluso en vuestros TFMs, en vuestros trabajos de fin de máster. Una de las cosas que os piden es, me tienes que justificar por qué has utilizado esta metodología. y las explicaciones y las justificaciones a veces son porque es la que sé manejar mejor ¿vale? hay que intentar que tengan un poquito más de peso y que técnicamente sean un poquito más sólidas, pero hay veces en el mundo de la empresa que las justificaciones metodológicas tienen que ver con eso es que no tenía otra herramienta para hacerlo es que estaba haciéndolo con Excel en vez de con Power BI y el límite de datos que tenía era más pequeño que lo que, pues entonces, lo que tenemos son las que tenemos y las que sabemos manejar son las que sabemos manejar. Eso lo que nos tiene que dar es flexibilidad, no quedarnos atascados en solamente, y sobre todo además esto es, y yo creo que esta frase ya la he utilizado en alguna otra clase anterior, es para el que tiene un martillo todos son clavos, ¿vale? Pues no, como ya sé hacer el mapa de calor, voy a hacer mapas de calor para todo el mundo, o como el gráfico de burbujas me gustó mucho el día de la primera clase voy a hacer todo gráficos de burbujas, hombre, pues no y la otra es el enfoque visual. La representación gráfica es el núcleo del análisis o por lo menos del tipo de análisis que estamos aquí viendo. Hay otras maneras, a lo mejor más estadísticas, más numéricas, más no sé cuánto, pero nosotros lo que queremos es que visualmente seamos capaces de... O sea, que la representación gráfica, el que sea visual y visualmente saquemos conclusiones, eso es lo fundamental para nosotros. Fases típicas del análisis exploratorio. Pues, las fases son la evaluación de la calidad de los datos, que nos sirve para detectar qué valores hay ausentes. es que tengo datos vacíos tengo datos duplicados los datos no son consistentes y eso hay maneras de verlo por ejemplo con histogramas de frecuencia eso es lo que nos acaba dando pues mira, todo se agrupa en torno a la normal al centro, o no los valores que me salen son extremos bueno, eso, histogramas me valen para eso, gráficos de dispersión Dispersión, tablas resúmenes, etc. Y la otra fase sería reducir la complejidad. Empiezo con unos datos muy complejos o con un conjunto de datos muy complejos. Lo que me puede interesar es agrupar categorías, segmento, hago clusters, normalizo escalas, derivo, hago nuevas variables derivadas o que sean combinación de otras y que me permitan que sean más interpretables, ¿vale? Pues ese tipo de cosas. Pues una variable combinada, la velocidad, es espacio partido por tiempo. Pues el espacio que ha recorrido partido por el tiempo. Pues oye, me merece más la pena trabajar con la velocidad para comparar determinadas cosas que trabajar con los kilómetros que ha recorrido y el tiempo que ha tardado. Pues hijo, fíjate que fácil. Así es como se crean muchísimas variables nuevas, muchísimas métricas y muchísimos KPIs. Y un ejemplo, os pondría las incidencias, el conjunto o el dataset de las incidencias de una compañía. Pues primero voy a detecto columnas que tengan muchos huecos vacíos, ¿vale? O que tengan valores extremos y luego, una vez que he detectado todo eso, que me sirve para filtrar, para eliminar, para transformar, lo que sea, pues reagrupo en categorías de productos. y de repente cojo y digo, mira, pues es que prácticamente todas las incidencias las tengo agrupadas en tres grandes grupos y luego tengo un long tail de un montón de cositas pequeñitas que tiene que ver con cosas a lo mejor muy personales del cliente o de tal. Bueno, pues todas esas las agrupo en un otros, que esto es un clásico, esto es absolutamente habitual. Yo creo que no habréis visto ninguna segmentación o ninguna agrupación que no tenga al final ese otros para las cosas. Fundamental de aquí, y por eso lo pongo en ese cuadrito ahí, el análisis exploratorio no está orientado a confirmar hipótesis previas, sino a descubrir patrones inesperados. Si en el examen cae una pregunta que os pida hacer una cosa o vamos a confirmar hipótesis previas, utilizarías la técnica o vamos a utilizar el análisis exploratorio, ¿para qué cosas de estas lo utilizarías? Y digo confirmar hipótesis previa y alguien dice confirmar hipótesis previa, en esa pregunta tiene un peloto. ¿vale? o sea, esto es absolutamente fundamental otra cosa bien distinta es que luego la cabra tira al monte y probablemente en la vida empresarial más de una vez incluso a lo mejor iba a decir, más de una vez veréis que en vuestras empresas se cae en esto y no estaréis probablemente libres de caer incluso vosotros en alguna ocasión en eso ¿vale? de hecho Yo creo que ya os he comentado en alguna ocasión, muchas veces lo que se quiere es que la investigación y los métodos de investigación nos den la razón a una decisión que ya tenemos tomada, o bien que viendo el estudio de investigación o viendo la visualización o viendo el dashboard, yo ya no tenga que tomar ninguna decisión porque la decisión viendo el gráfico ya está tomada. Desgraciadamente o afortunadamente eso no suele ser así. Todo esto te ayuda mucho a tomar las decisiones, pero normalmente no toma las decisiones por ti. Y cuando toma las decisiones por ti es porque era muy evidente. Lo que os decía antes, era como era lo inesperado, que lo había llamado. Normalmente las cosas son inesperadas o como mínimo no evidentes. Visualización para la exploración de datos Estas son técnicas visuales para el análisis exploratorio O sea, seguimos con análisis exploratorio Principales técnicas, pues los diagramas de dispersión Las matrices de correlación y la exploración dinámica Diagramas de dispersión, pues lo que nos permiten es evaluar correlaciones detectar densidades, frecuencias, outliers, o sea datos que se salen de lo normal y normalmente se pueden enriquecer con líneas de tendencias, zonas de densidad, mapas de calor, con todo este tipo de cosas. Las matrices de correlación nos aportan una visión muy sintética de la relación entre variables. Como os decía antes, podemos luego coger y añadirle cosas como colores y nos deja ver un montón de variables de manera simultánea, cómo se relacionan dos a dos y cómo tengo esas relaciones. Con eso puedo sacar mucha información. Y la exploración dinámica son herramientas de exploración visual. Y tenemos pues eso, la exploración dinámica es voy a hacer segmentaciones, voy a poner filtros, eso me va a acabar dando eso, el rascar más o el profundizar más en lo que tenga. ¿Qué es lo que tenemos para esa exploración visual? Pues las herramientas fundamentales que vamos a utilizar va a ser el Power BI o el Tableau. ¿Por qué os pongo esto? Porque ahora veréis que vamos a pasar a un ejemplo, que lo voy a hacer con Power BI, y pero también quiero que tengáis en cuenta y por si lo vemos otro día y por si lo veis también por ahí es que el equivalente a esas segmentaciones dinámicas que vamos a hacer, que es que te hace unas segmentaciones de manera automática el Tableau eso mismo lo hace perdón, el Power BI eso mismo lo hace Tableau con una función que se llama Show Me muéstrame y sugiera automáticamente representaciones adecuadas y cada vez además una de las cosas que ya vimos el otro día y que comentamos es que cada vez le van metiendo más inteligencia artificial, más funciones y tal y cada vez hace más cosas automáticamente, o sea, si de repente te instalas una nueva versión y dices, ostras, si yo estaba intentando hacer esta cosa y ahora resulta que ya no la tengo que hacer porque me la ha hecho él solito Bueno, pues ese tipo de cosas también pasan. A ver, ¿un diagrama es para menos variables que una matriz de correlación? No necesariamente. Una matriz de correlaciones puede tener muchas o pocas variables. Va a depender un poco... No, no realmente. No realmente. No. De hecho, si me apuras, es más difícil sacar conclusiones de una matriz de correlaciones con muchísimas variables. O sea, que casi si me apuras es al revés. Pero bueno, hay de todo como en botica. También dependerá cuáles son esas variables que tienes. Y vamos a clustering, que es lo que vamos a hacer ahora en la práctica con Power BI. El clustering es descubrir estructuras, relaciones que hay entre grupos de clientes o grupos dentro de los datos, cómo puedo agrupar esos datos porque tengan relaciones, similitudes entre ellos. ¿Vale? Veo un montón de datos y no puedo sacar nada, pero dentro de esos datos hay unas relaciones que están latentes, están intrínsecas a esos mismos datos. Eso es lo que cuenta por ahí. Y, básicamente, las técnicas... Bueno, a ver, una cosa muy importante. ¿Por qué hacemos esto o para qué sirven este tipo de cosas? Muchas veces las métricas agregadas de todo el negocio no me muestran toda la historia. Y necesito dividir o separar en grupos con comportamientos similares para poder descubrir y entender toda la historia. Si los clientes de oro se comportan de una manera muy distinta a los clientes bronce, si lo junto todo, me está enmascarando cosas. Esto es lo típico de la estadística. Si yo me como un pollo y tú no comes nada, la estadística dice que nos hemos comido medio pollo cada uno. Pues no, se para. Y que vean que yo me he puesto tibio y tú te has quedado con hambre. dos técnicas principales que además el K-Means que es una de ellas veréis que es K-Means y clustering jerárquico lo he dividido en dos diapositivas pero tienen más o menos la misma estructura para que no os despistéis el K-Means es además de hecho el que utiliza Power BI para hacer clustering Entonces es la que hay debajo de lo que vamos a ver en la práctica. Y es una técnica que nos da, si tengo un grupo de datos, todo ese grupo de datos tiene un centroide, o sea, un centro geográfico. Y entonces la distancia de cada uno de esos puntos al centroide, distancia matemática calculada, eso es lo que utiliza. Si de todos esos datos están más o menos cerca, eso es lo que nos da que tengan comportamientos homogéneos. Eso es lo que en el fondo y conceptualmente hace. Y la visualización son diagramas de dispersión, donde cada clúster tiene un color distinto. Tengo un montón de puntos y unos veré un montón de puntos agrupados y tendrán un color, otro montón de grupos agrupados que tendrán otro color, etc. Y ya digo, pues ya tengo un clúster y luego veré qué es lo que hay dentro de ese clúster para decir, mira, pues es que estos son los clientes oro porque se comportan de tal manera. Agrupo las observaciones según la distancia al centroide. Se utiliza mucho para segmentar clientes o productos o regiones. Y la visualización es el skater plot, que de hecho así es como lo llama al gráfico en el Power BI. Cada clúster es un color distinto e incluso le puedes pedir que te marque cuál es el centroide de esa nube de puntos. y muy importante hay que validar los segmentos os estoy diciendo, son técnicas tanto el ShowMeS como el KMeans que utiliza para unos clusters de manera automática, para una segmentación automática el Power BI, pero luego tengo que ver que esa segmentación que me ha hecho tiene sentido, a veces eso no tiene sentido de ningún tipo ¿vale? y eso es lo que a ver si eso que me ha clasificado y que me ha agrupado tiene una cohesión interna tiene una lógica interna que ese grupo esté relacionado por ejemplo si hemos hecho una clasificación de otros y pretendemos trabajar con los otros y lanzar un producto diseñado para ese otros que tenía un montón de individuos de su padre y de su madre cada uno comportándose de una manera distinta pues probablemente nos llevará a error entonces a lo mejor mejor si son un número controlable o a lo mejor tenemos que llevarlo a otro tipo de análisis quítate el otros y trabaja con los clusters que ya te ha definido, no utilices el cluster otros, ¿vale? esos segmentos tienen que tener significado y tienen que poder entenderse. Y luego la otra técnica es el clustering jerárquico. Esto lo que nos da es un árbol de relaciones entre variables o entre individuos que los voy fusionando en grupos. Eso se llama tendograma. O sea, el clustering jerárquico lo que nos da es un árbol de relaciones que se llama tendograma. Es el nombre técnico para todo eso. Y nos ayuda a decidir el número óptimo de segmentos. Eso lo bueno es que, igual lo que os decía, lo que nos va dando es el clustering. Tengo el conjunto total de los datos. En función de una determinada variable, pues lo divido, por ejemplo, en dos grupos distintos o en cuatro grupos distintos. Ya tengo un nivel, he bajado un nivel en la jerarquía. Y luego dentro de cada uno de esos dos o cuatro grupos, lo que haya decidido, se divide otra vez en otros cuatro grupos. Y cada uno de esos en otros cuatro grupos. Bueno, pues eso lo que me permite en un momento determinado es tomar la decisión de cuál es el nivel, cuál es la altura a la que voy a cortar, cuál es el número óptico mod de segmentos, por ejemplo. Digo, yo soy capaz de diseñar productos a medida para cuatro tipologías de cliente, pero no puedo hacerlo para 16, que sería el siguiente nivel, si otra vez se vuelve a dividir en cuatro. Entonces dices, bueno, pues me quedo en este nivel de la segmentación. O sea, esto lo bueno es que visualmente vas a poder decidir en qué número de grupos lo cortáis. Pues eso es básicamente Y luego la última cosa que queda Es la reducción de dimensionalidad Que esto también hablamos Y de hecho hablamos un poco de estas técnicas Por eso nos va a sonar a nuevo Somos capaces de visualizar muy bien E interpretar gráficos en dos dimensiones Y en tres dimensiones En cuatro dimensiones ya visualmente cuesta bastante, aunque ahora hay herramientas que nos pueden ayudar un poquito, pero cuesta ya bastante y dices, bueno, es que tengo tantas variables o que tengo que reducir la dimensionalidad de todo esto porque si no, no voy a poder tomar decisiones. Uno de ellos es el análisis de componentes principales. Esas componentes son unos factores que son combinación lineal, igual que cuando decíamos lo de las rectas de regresión, que es un coeficiente por mi variable más otro coeficiente por otra variable más otro coeficiente por otra variable. Esos son factores. Esos factores son combinación lineal de variables de las que tenemos. Y esos componentes, esos factores, es lo que al final vamos a acabar teniendo representado. Esto viene fenomenal porque es una técnica lineal, con lo cual numéricamente y con montones de softwares vamos a poder conseguir esto. normalmente en cada uno de esos, de esas componentes principales, en cada uno de esos factores, las variables que lo forman son variables que entre sí no correlacionan mucho, o sea, tienen una correlación bajita y al final acabo teniendo, pues, dos o tres o cuatro, ¿vale? Dos, tres es más o menos lo que se suele intentar, factores que son combinaciones de otras variables, eso lo puedo representar. ¿Cuál es el problema que tiene esto? Interpretar qué hay detrás o qué hay debajo de cada uno de esos factores. Hay gente, yo creo que os lo comenté el día que hablamos de esto, hay gente que son auténticos cracks, ven una combinación lineal de variables y dicen, a esto le voy a llamar simplicidad. Y muchas veces te quedas un poco. Mucho cuidado con los nombres que deis a las componentes principales y a los factores. A veces son muy evidentes y otras veces lo único que hacen es enmascarar lo que hay debajo de esas variables. Pero bueno, esto es muy utilizado, tiene ese, entre comillas, peligro, pero numéricamente es muy bueno, muy potente y además utiliza la variable, o sea, la varianza viene muy bien explicada en esos factores. O sea, matemáticamente o estadísticamente es muy potente y muy fuerte. Y luego hay otra, la otra técnica, que es el T-S-N-E y ahora os recuerdo cuáles eran, cuáles eran las, el significado de esas iniciales. La T es porque lo que utiliza y lo que tiene por debajo estadísticamente es una distribución de probabilidad que es la T de student, que es una distribución de probabilidad muy determinada, que hay un montón de procesos y un montón de cosas que se distribuyen con respecto a esa variable aleatoria, esa función de distribución. Y el S-N-E es stochastic, o sea, estocástico. Neighbor, pues vecinos o, sí, vecinos. Y embedding, ¿vale? El embedding este, la traducción literal sería algo así como incrustado o incrustación, ¿vale? Como eso suena raro de narices, porque si os digo que lo que os voy a explicar es la distribución estocástica, perdón, la incrustación estocástica de vecinos, eso no lo vais a entender. Realmente yo más bien diría que es representación o proyección. Entonces es la proyección estocástica de vecinos o la representación estadística de vecinos, o sea, de variables o de puntos que están muy cercanos. representación estocástica ¿en base a qué? en base a la TED Student ¿vale? representación estadística de vecinos con la TED Student y es una técnica que no es lineal a diferencia análisis componentes principales es lineal con lo cual estadística y matemáticamente es muy potente y esta es no lineal ¿vale? pero lo que sí que nos permite es que nos deja ver de manera más clara las relaciones entre variables, las relaciones de proximidad entre esos puntos de lo que tenemos representado. Es muy eficaz para visualizar clusters con muchas dimensiones. ¿Vale? Pues yo que sé, cosas como el comportamiento digital, el comportamiento digital que tiene cada individuo es de su padre y de su madre y que depende de muchísimas cosas. Pues mi comportamiento digital, pues yo navego mucho por móvil porque tengo una tarifa plana de datos muy potente y que además va muy rápido y además tengo un móvil maravilloso de última generación y no sé qué. Y cuando se te rompe el móvil, tu comportamiento digital cambia completamente. O, por ejemplo, cuando se hace análisis de temas de textos y de lenguaje basado en textos y cosas de estas. es ideal para detectar subgrupos muy finos, o sea, que el análisis de componentes principales que veíais antes, que si te vas más allá de dos o tres componentes principales ya empiezas a tener problemas para interpretar, bueno, pues aquí cuando tienes que afinar mucho más, pues te vale. No es tan interpretable numéricamente, pero visualmente es más fácil de interpretar. Y aquí ya es simplemente, es un poco adelantar lo que voy a hacer. Voy a hacer clustering automático en el Power BI. Y como os decía, lo voy a hacer con Power BI, pero en Tableau, lo que se llama clustering automático, en Tableau se denomina como clustering intuitivo. Bueno, tenía por aquí algunos ejemplos para contaros, pero no me voy a enrollar porque lo que quiero es cerrar un poco la parte más teórica de la lección. que es con un resumen, antes de pasar a ver el ejemplo de lo que hemos visto en Power BI, de cara y como ayuda, por ejemplo, de cara al examen. Y voy a intentar que ya todas las lecciones tengan un poquito estas dos diapositivas que os voy a enseñar ahora a continuación. La podría haber puesto en verde, como os había dicho lo otro. Estas son las cosas que debéis tener claras de este tema. Y si no, pues a lo mejor repasar o mirar la diapositiva. Lo que es la modelización descriptiva, que explica relaciones y patrones históricos. No voy a repetir o no voy a leer lo que tengo en la diapositiva porque es básicamente repetir lo que hemos estado viendo. La descriptiva, la predictiva, acordaros, los prismáticos o el retrovisor, ¿de acuerdo? Que el análisis de datos está orientado a descubrir patrones y no a confirmar hipótesis, fundamental. O sea, esta es la típica frase que os la debéis tatuar. Está basado en iteración, flexibilidad, enfoque visual. Clustering y segmentación tienen dos técnicas fundamentales, que es el K-Means y el clustering jerárquico. y se interpretan con ese tipo de gráficos. La reducción de dimensionalidad, hemos visto dos técnicas, análisis de componentes principales, que es lineal, y el TSNE, que es no lineal, y que lo bueno es que nos preserva las relaciones entre las variables. Y luego, ¿qué es lo que utilizamos para trabajar esto visualmente? Pues el Power BI y el Tableau. Y lo que os decía, uno nos da el Power BI, hace clustering automático y el Tableau lo que utiliza es esa variable show me. Y haceros un checklist. Esto sería un checklist también de cuáles son las cosas, cuáles son los temas. Tiene mucho que ver con la diapositiva anterior. Cada una. La modelización descriptiva explica relaciones y patrones. análisis de componentes principales, esto, árbol de decisión, esto. O sea, un poquito, si sois capaces, esto sería, lo he llamado checklist, pero lo podéis llamar chuleta. Porque no hagáis chuletas porque os las van a pillar por la manera que tenemos de hacer los exámenes. Pero si os tuvierais que hacer una chuleta, esto sería una buena manera de poneros la chuleta. ¿Y qué es lo que vamos a ver en el ejemplo? Vamos a ver un gráfico de dispersión, un scatter plot como esto, en que cada punto es un cliente. Y vamos a poner un gráfico, ese gráfico de dispersión, donde el eje de las X, o sea el horizontal, son las ventas totales por cliente y en el eje de las Y es el número de pedidos del cliente. Y vamos a crear, vamos a decirle a Power BI que nos encuentre clusters de manera automática. Solo ponerlo en los dos idiomas porque a lo mejor alguno lo habéis configurado y lo habéis dejado en inglés o yo mismo he estado trabajando los últimos días en inglés y ahora me lo he puesto en español. Y acordaros que el Power BI lo que utiliza debajo en esos clústeres automáticos es K-Means. Ya os digo, voy a quitar ahora el PowerPoint, pero para que sepáis, en la presentación que ya está colgada, lo que aparece es todo lo que voy a hacer sobre el Power BI. de hecho incluso a lo mejor ahora poniéndome a hacer en el Power BI me despisto con alguna cosa, selecciono mal una variable o lo que sea y a lo mejor me pierdo en alguna relación o en lo que sea, pero si seguís los pasos que os voy dando en el PowerPoint los iréis viendo, son exactamente los mismos pasos que voy a ir siguiendo en lo que os quiero enseñar Y que lo que van a hacer es lo que he dicho aquí, lo que he dicho en la práctica. Vamos a hacer esta representación gráfica. Pues efectivamente me voy y ahora mismo estáis viendo ya mi Power BI, ¿no? ¿Estáis viendo en pantalla mi Power BI? Sí, se ve, sí Ok, perfecto Vale Pues entonces Cosas que voy a ir haciendo Pues lo primero de todo Ahora alguno va a aprovechar Porque voy a hacer alguna cosa De las que tenéis que hacer para la práctica Pero bueno Como al final hemos tardado en ver cosas Pues bueno, eso que os lleváis Y tampoco quedan muchas horas. Pero bueno, si a alguien le sirve, tampoco me importa. Cargamos nuestra base de datos. Está en Excel. Adventure World Sales. Para que no haya despistes y digáis, en el mío me sale otra cosa y no sé cuánto. Cojo, lo cargo. Voy a coger, sabéis que la diferencia es que en unas tengo las tablas y en las otras son los Excel. Eso es lo que diferencia. Veis que todo lo tengo como prácticamente tengo Customer y Customer Data. Date y DateData Product y ProductData Me voy a coger solo Las Tablas y no me voy a coger Los Excel de datos Y acordaros, cojo todos esos Y le doy a Transformar datos Ok Pues ya estamos Este ya veis que Él se pone a hacer un montón de cosas Él ya solito Ok, pues lo primero que tengo que hacer es verificar que los datos fundamentales... ¿Es posible que esta vista tenga previa? No lo voy a actualizar. Vale. Es posible que vosotros incluso aquí ya tengáis unos datos, pero bueno, lo que debería hacer es verificar que las columnas, como mínimo las columnas clave con las que voy a trabajar, pues estén en los formatos correctos. Pues empiezo por Customer, Customer ID, Customer Key, tengo este menos uno, pues podría quitarme ese menos uno y lo quito. El resto parece más o menos en orden, son códigos postales, un identificador de cliente, unos cuantos, pues fuera. También podría no haberlo quitado, si os hace mucho esto. Pero bueno, en las fechas podría también estar viendo, bueno, ya veo que la mayoría de las fechas las tengo por ahí ya puestas de manera correcta. Producto, vale. Tengo aquí los productos. Vale, pues por ejemplo veo que los precios los tengo por aquí. Bueno, tampoco me haría mucho daño, pero lo voy a poner como sé que son moneda, pues lo voy a poner en formato moneda con los dos decimales habituales. Esto ya está, este ya está. Reseller, no hay ninguna cosa por aquí rara. Voy a Sales, que esta es la más importante, porque acordaros que lo que quiero hacer es representar precisamente las ventas. Entonces, en esta tengo que tener especial cuidado. Pues a ver, las fechas. Tengo Order, Date, Key. Esta la voy a poner en formato fecha. Aquí la tengo. Esta otra hago lo mismo. Lo pongo en formato fecha. Este de por aquí también. lo pongo también en formato fecha si tengo por aquí estos aquí tenía precios unitarios he dicho que los iba a poner en formato moneda vale el descuento lo voy a poner en porcentaje creo que No utiliza descuentos. Vosotros probablemente conocéis mejor la base de datos porque yo no estoy con la actividad. La habéis trabajado más. O sea que si veis que estoy dejando de hacer o estoy haciendo alguna cosa por ahí rara, también avisadme. Profe, el único comentario es que como cambiaste el formato de fecha a las claves que posiblemente puedan interconectarse con la tabla de date, pues toca ir a la tabla de date. Muy probablemente. ¿Lo he cambiado? Ah, amigo. Pues muy probablemente pueda haberlo fastidiado. Vamos a verlo. Voy a hacer la prueba y si no vuelvo para atrás. ¿Vale? order date key sí, porque esa era buena bueno, espérate vamos a hacer una cosa ok vale muy buena muy buena observación porque no son fechas sino que son claves. Precio único de desconto. Aquí también lo pongo en moneda. Moneda. Y moneda. Y ahí en alguno, porque puede ser que en alguno haya puesto también el data key. Customers key. Date. Month key. Vale, aquí tengo month key. Full date. Month. Ok. Data key, efectivamente, lo necesito para unirlo. De hecho, en date no lo había cambiado. muy buena porque si no vete a saber que me hubiera salido vale, las órdenes de ventas y los territorios, pues vale, ahí lo tenemos y una vez que he hecho, no voy a hacer más transformaciones, vale, una vez que acabo con esto le doy a cerrar podría haber creado variables tienes que dar otros pendientes que no se han aplicado Pues voy a decirle que los descarte Ah no, es que me está calculando esto De narices ¿Vale? Veréis que él ya automáticamente Ha hecho algo ¿Vale? Vemos que Y además de hecho Si nos vamos aquí A la vista de modelo Tengo Ah, mira, ¿ves? Aquí tengo Una de las cosas que me habría hecho Si hubiera cogido las fechas, podría haberlo relacionado. Me hubiera parecido directamente que él lo hace automáticamente y eso es una de las diferencias. de hecho, mira, voy a hacerlo y voy a transformar los datos voy a ver qué es lo que Data Key, vale, el único que no tengo que cambiar es el Data Key ah no, pero claro, los otros están todos con Do Data Key, Order Data Key Es que quiero precisamente que me relacione con eso y que me lo haga automáticamente porque quiero que lo veáis. Porque establece las relaciones de manera directa. Vale, espérate. Creo que me voy a... Me voy... Ahora date aquí, tú date aquí. ¿Me voy a atrever? ¿Puedo intentar cargarlo sin hacer transformaciones? Ahí es cuando se relaciona de manera directa ¿Con o sin hacer ninguna transformación, dices? ¿Y lo habéis hecho sin hacer ninguna transformación? Al momento de cargarlo, sí, pero ya luego cuando se relaciona No, pero no siempre Tú puedes hacer cambios de transformación Y lo importante es que las dos claves que vayas a unir Estén en texto o en número eso es lo ideal siempre es que la tabla calendario la conviertas en una tabla calendario porque así como está cargada que es bajo una tabla Excel no sirve para hacer inteligencia de tiempos eso es pues tan fácil eso es ya verás Vamos a darle aquí Está recalculando Y voy a ver qué relaciones tiene No, pues no me las he hecho tampoco Pues entonces paso Paso de hacerlo y entonces las voy a hacer a mano Nada, no hay olvidaros de esto y voy a establecer las relaciones a mano. Vale. ¿Cómo se hacen? Porque aquí directamente lo que me aparecería es que es lo que quiero lo que quiero es que me aparezca la tabla sales que es la que realmente quiero relacionar y me aparezca relacionada con los demás de hecho, si vierais sería una cosa como esto directamente, no sé exactamente cuáles son las que he tomado pero con el ejemplo antes, con las variables que había combinado te acaba dando que la tabla de sales directamente no me aparecía relación con date o sea que el date me daba igual en el ejemplo que estaba trabajando entonces efectivamente voy a poner ¿Vale? Y entonces, ¿cómo establezco las relaciones? Me voy a Sales, ¿ok? Y para crear una relación le doy a... voy a coger el Customer... ¿Dónde está Sales? Aquí está. Voy a empezar a trabajar con Sales. El Customer Key lo voy a relacionar con el Customer Key de la tabla de Customer. O sea, la clave de cliente. Aquí está. Se me va de la pantalla. El Customer Key lo relaciono con el Customer Key de aquí. Me toma aquí, le doy guardar y directamente veis que me ha establecido ya una relación entre ellas. Exactamente igual puedo ir con cada uno de los demás. Con producto, por ejemplo, el... Espera, que no lo veo. Pues product key me lo llevo a... ¿Dónde está producto? A con product key. Y aquí lo tengo relacionado. Siguiente, pues, producto, fecha, reseller. Reseller key, reseller key. Vale. ¿Qué tengo por aquí? El sales order. Sales order line key. Lo relaciono así. Ok. Y con SalesTerritorio, vale, así lo relaciono. Ok. Y incluso me puedo atraer con el DataKey. ¿Dónde está? DataKey, DataKey, DataKey. Vale, tengo DueDataKey, orderDataKey. Y claro, lo puedo relacionar o con una o con otra de las variables, pero no sé si relacionarlo o no, para no irme tanto del ejemplo y que luego no acabe viendo. pero bueno, voy a... Pues ya tengo estas relaciones que de hecho esto puedo moverlo de otra manera. Voy a poner aquí el sales y me pone por aquí todas las relaciones que tengo. Voy a intentar que se vea en un solo pantallazo. más o menos lo tenemos aquí este se me iba lo voy a poner por aquí ok, pues tenemos ya cuáles son todas esas relaciones eso es lo que es lo que se llama, lo que se denomina el modelo en estrella y bueno, pues vemos, pues a ver el costumer, las ventas el costumer key el Customer Key vale bueno no voy a ponerme a comprobar porque si no me como la hora tengo todas esas relaciones las tengo todas hechas y que es lo siguiente que tengo que hacer, quiero crear tres medidas, que es lo que voy a representar luego gráficamente voy a crear una medida que sea las ventas totales otra medida que sea el número de pedidos y otra que sea el valor medio por línea de pedido. ¿Cómo se hace eso? Pues me voy a la vista de informe y aquí tengo todos los datos, aquí a la derecha. En todos esos datos lo que estoy trabajando es con las ventas, con sales. ¿De acuerdo? Pues entonces me pongo aquí y me pongo encima de ventas y le doy clic al botón derecho. Y le digo que quiero una nueva medida. Y automáticamente aquí lo que me deja es para editar cómo pongo esa medida. Para ir más rápido, como tengo, voy a irme aquí porque las tengo ya escritas y así no tengo que escribirme porque como me... A ver, esto, la manera de escribir aquí es lo que hablábamos, es el DAX. Esas maneras de escribir las cosas. Tengo y efectivamente ahí escribo. ¿Cuál es mi primera medida? Pues las ventas totales. Las ventas totales, que es la suma de sales amount. Esa es la variable que tengo. Estaba comprobando que no me había equivocado. Pues por ahí lo tengo y veis que aquí a la derecha me aparece una cosita con una calculadora que pone total sales. Acabo de crear una variable nueva. Quiero crear otra medida. Otra medida que había dicho que era... Aquí, nueva medida. Me vuelve a aparecer aquí el editor de DAX y le voy a decir... No, porque acabo de poner la misma, total sales. ¿Vale? He copiado, he copiado. Que es, lo que quiero es que me diga el número de ventas. ¿Vale? Número de ventas totales. ¿Vale? ¿Y cómo quiero que me calcule ese número de ventas totales? Pues que me cuente cuántas ventas distintas hay. ¿Y qué me tiene? Pues el de lo que tía, sales order line K, cuántas distintas hay. Bueno, pues con esa le doy a Enter. Ah, ¿me la había creado ya? No, sí, ahí la tengo. Order Count. ¿Veis que también me la ha creado aquí con la calculadora? Y había dicho que la otra era el promedio de ventas. El promedio de ventas por cada orden. Que es el promedio de ventas, quiere decir, es el valor promedio de las ventas. Doy una nueva medida y la pongo aquí. ¿Ves? Le voy a llamar promedio de ventas por orden y eso es el resultado de dividir el número total de ventas por el número de órdenes. ¿Vale? Y eso es lo que me da el promedio. Ok, pues con esto ya tengo creadas estas. Medida, order, tal. Ya me he creado las tres medidas. Perdonad. Ok. Vale, las tengo. Bueno, podría estar comprobando. Voy a tirarme, a lo mejor no las he creado bien porque he escrito algo mal o lo que sea. pero para no consumir más tiempo lo voy a hacer. Entonces, a ver, ¿qué es lo que quiero hacer? Quería poner en el eje de las X las ventas totales, que es este total sales, en el eje de las Y es el order count y luego lo que quería poner es las ventas totales, es lo que quiero representar. Vale, pues pongo las ventas totales. Vale, espera, ah, mira, la estaba viendo ahí. Ok. Bueno, aquí. Vale. Pues, bien, bien, bien, tengo aquí las relaciones. Ok. Vale. Vale. Entonces, ahora lo que me voy es a buscar lo que quiero representar. Y lo que quiero representar es el gráfico ese de gráfico de dispersión, que es este simbolito. De hecho, en la presentación veréis que pongo hasta el simbolito para que no tengáis que buscar. Porque además, de una versión a otra cambian los símbolos. Es muy puñetero. Del gráfico de dispersión no, pero por ejemplo este, que es de la segmentación de listas, sí que ha cambiado de una versión a otra. Le doy a gráfico de dispersión, que es el que quiero hacer. Y veis que me crea aquí un hueco directamente. y lo que hago es aquí coger y digo en el eje de las x podría arrastrarlo aquí al eje de las x, pero si yo cojo directamente es muy listo y si cojo total 6 me lo pone en el eje de las x, el order count que era el otro que quería en el eje de las y lo cojo y me lo selecciona y este promedio lo pongo y directamente pues no, no lo quiero en tamaño, Esto lo quiero en valores. Esto es. Ah, bueno, tamaño. Pues bueno. No, no es tamaño. Lo estaba haciendo bien. Y... Ah, bueno, espera. Que no es de medida. Ah, bueno, claro, claro, claro. Espérate. Espérate. Espérate, que esto no lo he creado bien. Vale. Total sales. Bien. Order count. Bien. Tal vez informes. Tal, tal, tal. Eje de reproducción. Tamaño. Debajo. Ta. Vale. es que tengo esta yo creo que la he creado mal esta variable a uno a dos Ah, vale, sí la tengo aquí, la estoy viendo. Divido total 6 por order count. Estoy espeso hoy, ¿eh? Vale. Precio unitario, tal, tal, tal. Y el average sales. ¿Vale? Ah, vale. Vale, vale, vale. ¿No? Ah, joder. No, pero me da error. No sé por qué me da error. No he debido establecer alguna relación rara. De todos modos, bueno, como veo que me paso ya nueve minutos, lo tengo, como os decía, está exactamente hecho con las relaciones en el esto, ¿vale? Y con lo que tenéis que utilizar, ¿vale? Entonces, esto era el aspecto que teóricamente tenía que tener lo que acabo de hacer, ¿vale? En valores tengo que tener... Claro, he puesto el customer key. Estoy llevando una métrica a los valores en vez del customer key. ¿Dónde tengo customer key? Customer Key claro, estaba intentando llevar una métrica esto es no, pero ahora espérate que ahora no me ha puesto esto cambia la dispersión sí, sí, sí, tengo que volver a empezar eso es y entonces tengo total 6 total 6 order count y Customer Key esto es ¿No? ¿Y eso? Si me lo acaba de hacer. Total sales, order count. Profe, puede ser que el total sales no se está en formato de número. Puede ser. Cuando pone el primero, el primero que es total sales ya da error en la gráfica. gráfica. Ah, pues eso es que está mal creada la variable. Eso es que está mal creada la variable. Ahí dice ver detalles. Y ahí podemos ver qué es lo que pasa. Sí. Total sales, sum, sales, sales, amount. Profe, pero ¿no sería más bien crear una columna o utilizar la columna que ya tenemos? No, no, no. Es exactamente eso. Lo que pasa es que debo estar, debo haber creado mal la variable. Y por eso no me lo está... No, la variable no es numérica. Sí, sí, la variable claro que es numérica. De hecho, está sumando en las ventas, la cantidad de ventas, que sí que es numérica. Y de hecho, lo que está haciendo es una suma. Eso está bien. Otra cosa es que le haya llamado mal a la variable. ¿Vale? Que eso tendría que comprobarlo. Tendría que ir a mirar las columnas y mirar si he nombrado mal a la variable. ¿Vale? Porque de hecho, es lo que os decía. he hecho exactamente lo mismo lo que pasa es que quizá he debido escribir mal la variable que la tengo por aquí, tenía sale 6 amount, bueno en principio no debería ser distinto quizá lo mejor es que porque he estado y por eso lo he puesto de las dos maneras porque no tengo claro si el order count era con este o con 6 order number, que también había por ahí. Yo creo que probablemente es eso. Y me está cogiendo este número mal y por eso no me saca el otro. Y como luego divido una entre la otra, probablemente este no sea número. Esta, el order count, no lo he creado mal. No lo he creado bien. Como os decía, para no liaros y no teneros más rato esperando, lo que sale es exactamente este gráfico. ¿Vale? Y le cogéis directamente y le dais ¿vale? a la le dais al botoncito de que os calcule ¿veis? aquí exportar tal, le dais a buscar clusters automáticamente y él automáticamente clasifica los clusters muy probablemente este cluster es rarito ¿vale? si analizarais este cluster este que tiene por aquí estos muy agrupaditos y estos están dispersos, ese clúster es rarito. ¿Pero por qué? Porque yo he hecho una cosa en este y es que cuando dices que busque clústeres automáticamente, él te pregunta, te da la opción de que tú marques cuál es el número de clústeres que quieres. Y yo le he dicho que me haga cuatro clústeres. Si no, tú le puedes decir que él, ves que lo tengo por aquí, Del ejemplo, lo que he hecho, le he dicho que cree cuatro clusters, mientras que de la otra manera le puedes decir automáticamente créame tú los que consideres oportuno, que yo para mí es lo recomendable, salvo lo que os decía, que tengáis muy decidido el número de productos que tenéis y entonces obliguéis vosotros. y con eso es lo que estaría esta es la presentación que está ya colgada o sea que miraré por curiosidad cuál es exactamente, me he debido equivocar al copiar el nombre de una variable y con eso me estaba dando error la sintaxis, pero todo el resto todos los pasos están bien hechos o sea no tengo absolutamente ninguna duda Lo que estaba es intentando reproducir Y por eso me lo había hecho así Para hacer exactamente los mismos pasos Para no tener que estar comprobando Sintaxis y cosas de estas ¿Vale? Pues oye, disculpad que me he pasado Me he pasado casi un cuarto de hora Y debe ser tantísimo O sea que no me extrañaría que hubiera un montón de compañeros Que incluso nos hubieran abandonado ¿Vale? Pues muchas gracias por vuestra atención y el próximo día corregiremos la actividad. ¿De acuerdo? Gracias. Venga, muchas gracias. Hasta luego. Buenas noches. Buenas noches.

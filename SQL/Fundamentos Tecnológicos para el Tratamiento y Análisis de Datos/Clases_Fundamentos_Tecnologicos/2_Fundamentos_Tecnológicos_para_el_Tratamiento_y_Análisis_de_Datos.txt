Empezamos. Bien, buenas tardes a todos. Bienvenidos a la segunda sesión de Fundamentos Tecnológicos para el Tratamiento de Datos. Básicamente, bases de datos relacionales, como ya os había comentado. Y bueno, en la sesión de hoy, que va a ser de una hora, vamos a hacer diversas cosas, ¿vale? Lo primero, vamos a seguir con el tema 1, ¿vale? Es decir, con la parte de introducción a las bases de datos. vamos a ver los conceptos teóricos más importantes, ¿vale? por encima, pero vuelvo a insistir, siempre vamos a darle prioridad a la parte práctica por lo tanto veremos los conceptos y después precisamente en el tema 1 ¿de acuerdo? vamos a hacer un ejercicio, un ejercicio que a su vez va a tener exactamente la misma estructura o el mismo desarrollo que el de la actividad 1 que vais a tener que entregar, ¿de acuerdo? Y adicionalmente, una vez que terminemos la clase, os comentaré que en la plataforma he subido dos ejercicios voluntarios, ¿vale? De cara a la semana que viene, que los corregiremos, que estarán enfocados también a lo mismo que este ejercicio de aquí. Es decir, con lo que vimos la semana pasada, o en otras palabras, las claves. Si recordáis, la semana pasada nosotros vimos el concepto de clave, que básicamente, si nosotros tenemos diferentes tablas dentro de una base de datos, la manera de relacionar la información es precisamente mediante esas claves. ¿De acuerdo? Por una parte teníamos la clave primaria, ¿de acuerdo? Si recordáis, hace referencia a la manera de identificar de forma única cada uno de los registros dentro de una tabla, ¿vale? Y después está la clave ajena, que es la clave primaria de una tabla asignada en otra como clave ajena para establecer la relación, ¿vale? Y esa relación o esa cardinalidad irá definida por los requisitos de la propia base de datos, o en otras palabras, por los requisitos de la empresa. ¿De acuerdo? Pero bueno, antes de empezar con toda la parte más de docencia Si habéis revisado los forros, la semana pasada os puse aquí en dudas generales ¿Vale? Un forro nuevo que hace referencia a instalación de SQL ¿De acuerdo? Aquí básicamente lo más importante es que hay unos vídeos en los que yo compartiendo pantalla os muestro la instalación de SQL Server y MySQL en mi ordenador, ¿vale? Destacar que aparte de estos vídeos, si os vais a documentación, instalación SQL, veréis que hay dos carpetas, una para MySQL y otra para SQL Server, ¿de acuerdo? Aquí hay unas guías, ¿de acuerdo? Donde se explica más o menos igual que en los vídeos, ¿de acuerdo? y las dos bases de datos, o mejor dicho, la base de datos que tenéis que restaurar hasta el momento, que es la de AdWords, este bug es de SQL Server, y este script que está dentro de un archivo RAR para MySQL. Es decir, no instaléis la base de datos que viene en el enlace dentro de la propia guía, porque ya no sirve, ¿vale? Tiene que ser esta. Por lo tanto, entre estos recursos y el foro, ¿vale? tenéis los pasos que tenéis que seguir para instalarlo en vuestros ordenadores. Os recuerdo que si el ordenador es corporativo, posiblemente no tengáis permiso administrador, por lo tanto os sugiero que lo hagáis con vuestros ordenadores propios. ¿De acuerdo? Adicionalmente, comentaros que estos instaladores que salen en el vídeo y en las guías suelen ir cambiando, ¿vale? Es decir, que cada mes y medio o dos cambian la interfaz. Ahora, por ejemplo, el problema que suele pasar con SQL Server es que no os deja avanzar porque está seleccionada la opción de instalar extensiones de Azure. No hace falta. Al momento que os salga, lo desclicáis y os permite seguir. Ahora, con MySQL, en la guía y en el vídeo se explica que hay que instalar la parte de Developer. Igualmente la han cambiado. Ahora lo que tenéis que hacer es seleccionar la opción de Full Mode. ¿De acuerdo? Pero igualmente si tenéis alguna duda, alguna pregunta también, sobre todo los que a lo mejor no podéis estar toda la clase o incluso no podéis asistir, es fundamental que reviséis las sesiones, ¿vale? Es decir, si ahora mismo dejáis pasar la asignatura y la retomáis en enero, os va a costar muchísimo seguir en esencia. lo que pone en la guía, efectivamente es decir, el Workbench es lo que nos permite que está aquí, consultar la base de datos ¿vale? pero que igualmente hay que instalar también el servidor, ¿vale? pero en esencia con el instalador genérico, ¿vale? se instalan ambas cosas, si habéis instalado y una de las no están, pues no os dejará obviamente hacer nada, por lo tanto, intentad hacer la full installation, ¿vale? De MySQL. Bien, antes de empezar con la parte de la clase, ¿alguien tiene alguna pregunta, alguna duda? ¿Todo claro? Sí, ¿no? Vale, perfecto. Pues seguimos con la parte teórica, ¿vale? Voy a pasarlo por encima como siempre para darle prioridad a las partes prácticas. No lo sé, SQLog no lo he utilizado nunca, pero os advierto, si queréis utilizar una herramienta que no sea MySQL o SQL Server, yo no os puedo dar soporte, porque las bases de datos están diseñadas para MySQL o SQL Server. Si vais a utilizar otra, lo más probable es que no podáis instaurar AdWords ni ninguno de los scripts que os voy a dar más adelante que son los scripts de tablita más pequeña vale por lo tanto si vosotros por vuestra cuenta queréis utilizar otro como poder podéis hacerlo pero yo no prometo que sea exactamente lo mismo que lo que estamos viendo en clase bien volviendo al tema en cuanto a la parte de la base de datos relacionales vale y hablando precisamente de la instalación de SQL Server o MySQL están los que se denominan sistemas de gestión de base de datos, ¿vale? MySQL, SQL Server, Oracle, etc. ¿Vale? Básicamente, el sistema gestor de base de datos no es la base de datos en sí, porque el gestor puede estar controlando varias bases de datos que están relacionadas o que ni siquiera lo están, ¿vale? Es decir, tiene independencia frente a las diferentes bases de datos que se controlan. Ahora bien, todo ese GVD se divide en dos niveles, lógico y físico. Físico lo vamos a olvidar porque nosotros somos analistas BI y no somos desarrolladores, por lo tanto no vamos a configurar ninguna parte del setup, la configuración más compleja de los gestores de bases de datos, ni de las propias bases de datos en sí, es decir, tampoco las vamos a crear. pero sí que vamos a acceder a la parte del nivel lógico, ¿por qué? porque ahí es donde físicamente nosotros vamos a escribir el código para obtener los datos y la información que necesitamos la cual estará pues obviamente guardada en qué? en entidades barra tablas, atributos barra columnas y tuplas que son básicamente los registros, ¿de acuerdo? ¿De acuerdo? Sí que es cierto que esta división nunca ha sido, o sea, es relativamente poco desde que es así porque cuando se creó la primera vez, una primera estructura similar a esta fue la ANSI Spark, que en vez de tener dos niveles tenía tres, porque el nivel lógico se dividía a su vez en dos partes, externo y conceptual. el externo hacía referencia a algo muy específico dentro de la empresa que a día de hoy también se puede seguir viendo como puede ser la parte de ventas, la parte de recursos humanos, la parte de producción es decir, son zonas de la empresa que tienen varias tablas que están interrelacionadas eso no quiere decir que no se puedan conectar entre las diferentes estructuras externas pero si las juntamos todas y lo vemos todo como un mapa tendríamos el conceptual, que en esencia es el que a nosotros nos interesa ¿Vale? Por lo tanto, nosotros desde el nivel lógico, los usuarios, vamos a interactuar con esa parte conceptual. Y en cuanto al nivel físico, la parte más técnica, hablando de desarrollo de base de datos o desarrollo de los servidores, no es trabajo nuestro. ¿De acuerdo? Eso una de dos. o ya viene con una configuración base, ¿vale? Como por ejemplo, cuando nosotros instalamos SQL Server o MySQL en nuestros ordenadores, hay una configuración base, ¿de acuerdo? O que ya directamente la parte de IT se encarga de configurarlo de la manera correcta, ¿vale? Por lo tanto, como os decía, tenemos el SGVD que puede manejar varias bases de datos, ¿de acuerdo? Nosotros, a nivel lógico, podemos acceder a ellas mediante ese código, ¿de acuerdo? Y todo lo que ocurra por detrás, que realmente no lo podemos ver, es que el SGVD busca entre los diferentes niveles, sobre todo en el lógico, para devolvernos la información que le estamos solicitando y que efectivamente lo que estamos escribiendo en el código tiene unos resultados en términos de datos. ¿De acuerdo? Después, en cuanto a los modelos de SVD, hasta llegar al relacional se han pasado por el jerárquico en red Pero vuelvo a insistir, a día de hoy, prácticamente en todas las empresas hay bases de datos relacionales Como he dicho, RP, CRM, etc. ¿De acuerdo? Y la parte de ventas, obviamente Entonces, nosotros en esta asignatura nos vamos a centrar en los SVD, las bases de datos relacionales que su propio nombre indica de que se basa en el concepto de relación. ¿Relación de qué? Entre tablas y entre los datos. ¿De acuerdo? Por lo tanto, esta parte teórica, como digo, voy a por los puntos claves y vamos a ver lo que realmente importa. ¿Vale? Que es seguir practicando el funcionamiento, cómo funciona en esencia toda la parte del movimiento de los datos y ya la semana pasada empezamos con las claves y hoy vamos a seguir. ¿De acuerdo? Si os vais al tema 1, a la página 24, veréis que hay un ejercicio que básicamente consiste en que yo os doy una serie de tablas y una serie de atributos y vosotros tenéis que inventar cuatro registros para cada una de esas tablas. ¿Vale? Después identificar cuál de ellas es la clave primaria, ¿de acuerdo? Y después asignar esas claves primarias como ajenas en función de las circunstancias que se están pidiendo para esa base de datos, porque obviamente cada empresa puede operar de una manera diferente, aunque sí que es cierto que en términos generales suele ser muy parecido. ¿de acuerdo? por lo tanto, adicionalmente os comento de que este ejercicio su estructura y su modelo de desarrollo va a ser igual que el de la actividad 1 ¿de acuerdo? la cual explicaremos la semana que viene ¿de acuerdo? por lo tanto, para empezar para este ejercicio no nos hace falta ni SQL Server ni nada sino simplemente una hoja de cálculo donde nosotros vamos a crear simplemente las cuatro tablas y les vamos a dar los valores que nos piden, ¿vale? Tienen que ser un total de cuatro registros. Y una vez hecho esto, lo siguiente es que vamos a identificar las claves primarias. Por ejemplo, el equivalente a la vida real que lo vimos la semana pasada, la clave primaria en esencia, ¿qué nos permite hacer? si lo extrapolamos a la vida real, es decir, el equivalente en la vida real de la clave primaria, considerando que cada uno de nosotros somos una fila, ¿qué sería? Es un código único de identificación. El DNI. Exacto, sería el DNI y el posaporte similar. Por lo tanto, ese código único, como comenta el compañero, tiene que quedar reflejado. Ahora, en la tabla de fábricas que se propone, tenemos número de fábrica, nombre y provincia. Entre estas tres, ¿cuál, viendo por encima, sería la clave primaria? El nombre El nombre El número, yo creo El número El nombre, daros cuenta que una fábrica puede tener incluso el mismo nombre ¿Por qué no? Está en la misma provincia Es decir, tiene que ser algo que lo identifique de forma única Y hemos visto que en las bases de datos, ese DNI o ese pasaporte Suele ser un código identificativo o un ID que en este caso efectivamente sería el número de fábrica. Ahora, en concesionarios tenemos el nombre, el código, la ciudad o el director. Ya mismo, por ejemplo aquí, ciudad, hay dos que están en Sevilla, es decir, ciudad no puede ser una clave primaria. El director simplemente viene en el apellido, que dos personas pueden tener el mismo, por lo tanto tampoco nos vale. Y finalmente tenemos que el nombre, que ya hemos dicho que incluso se podría repetir. Por lo tanto, a modo un poco de descarte, realmente, ¿cuál sería aquí la clave primaria? Eso es, el código, ¿verdad? Bien, después tenemos coches, tenemos identificador, marca modelo, nombre del modelo, modelo, color y precio. Por ejemplo, aquí el precio puede ser una clave primaria. no, porque realmente puede haber coches que tengan el mismo precio entonces lo mismo, lo más probable es que tenga que ser un código en este caso, identificador marca modelo y finalmente tenemos a los clientes tenemos nombre y apellidos, que ya sabemos que se pueden repetir hay dos personas que se pueden llamar igual código postal, que es básicamente el distrito y el número de cliente quedando aquí, pues de una manera que el número de clientes sería la identificación Ana Libre pregunta, la placa del coche, ¿no? Es decir, la matrícula Depende, o sea, sí, la matrícula identifica un coche físico, ¿vale? Pero si ahora te digo, este coche de aquí, ¿vale? Es un tipo de coche ¿Qué pasa? El tipo de coche es el modelo Pero eso no quiere decir que sea un coche en particular, pueden ser varios Eso es algo que veremos hoy también, ¿vale? Porque hay que diferenciar muy bien cuando hablamos de tipología o cuando hablamos de unidades físicas, ¿vale? Pero bueno, ahora que llegamos a eso. Bien, como os decía, una vez que tengamos las claves primarias, tenemos que asignar esas claves primarias en las tablas correspondientes como claves ajenas, ¿de acuerdo? Y en este caso, pues tenemos tres condicionantes, ¿vale? El primero es que los concesionarios obtienen coches de una sola fábrica. Si recordáis, la semana pasada vimos que entre dos tablas la relación no es unidireccional, no es de fábrica a concesionario, sino de fábricas a concesionarios y de concesionarios a fábricas, siempre hablando de un registro en particular. de acuerdo y haciendo o delimitando esa relación obtenemos la cardinalidad de la relación entre esas tablas por lo tanto si ahora con esta restricción nosotros vemos que una fábrica vale una fábrica a cuántos concesionarios le va a proveer coches a un solo concesionario o a muchos concesionarios muchos a muchos la verdad no tenía sentido que una fábrica pues sólo mandase coche a un concesionario bien en este caso de fábricas a concesionarios es uno a él ahora por otro lado un concesionario de cuantos de cuántas fábricas puede recibir coches pero ojo siguiendo con lo que nos pone aquí entonces un concesionario recibe de uno o de varios de uno de uno de uno verdad que esto obviamente no tiene por qué ser la vida real vale vuelvo a insistir esto lo estamos haciendo un poco de manera más simplista para ir pillando un poco el tranquilo vale más adelante pues ya veremos lo que es la realidad entonces si nosotros tenemos 1n y 11 ergo tenemos una cardinalidad general de 1 a n. ¿De acuerdo? Si recordáis, nosotros la semana pasada dijimos que había una manera de saber mediante la cardinalidad cuál es la clave ajena. Pero antes de recordar esa parte, ahora mismo os pregunto. Tenemos fábricas y concesionarios. ¿Cuál sería la clave ajena? el número de fábrica en concesionario o el código de concesionario en fábrica. Es decir, ¿cuál de estas dos opciones sería? Escribidmelo si queréis por el chat, porque si lo vais a decir todos a la vez, al final no lo vamos a escuchar. ¿Cuál sería? Simplemente decidme, código o número. Es decir, ambas no pueden ser, Verónica. tienes que elegir una ambas nunca pasará ¿vale? algunos dicen número algunos dicen código ¿vale? ¿cómo lo podemos saber? pongámoslo a prueba con los datos ¿vale? imaginad que esta fábrica más NASA ¿vale? le manda coches a estas dos fábricas. ¿Vale? Es decir, se cumple, ¿no? Una fábrica provee coche a varios concesionarios. En este caso, Mandasa, que es la 98, se lo da, o mejor dicho, le manda coche a estos dos. ¿Vale? Entonces, si ponemos el número, tiene sentido. Ahora, ¿qué ocurre si lo hacemos al revés con el código? Sabemos que Mandasa se lo manda a estos dos. Y hemos dicho que esto no lo podemos hacer ¿acordáis, no? entonces, ¿qué nos queda? si queremos que sea conjuntamente, habría que poner aquí 498 321 y pasaría esto ¿esto sería correcto? se duplica la información o triplica claro, se puede triplicar, etc. y además, la clave primaria ¿qué pasa aquí? aquí, técnicamente, hay una duplicación esto bien no está vale por lo tanto esto no está bien es decir no podemos poner el código en fábrica sino que tenemos que poner el número de fábrica en confesionarios de acuerdo todo el mundo lo ve si con otras palabras siempre que tengamos 1 a n nosotros debemos fijar la clave primaria del 1 como clave ajena en él es decir aquí el 1 que es fábricas pues el número de fábricas debe ir como clave ajena en concesionarios. ¿Sí? Profe, ¿puedes repetirlo, por favor, esa parte? Siempre que tenemos definida ya la cardinalidad, que lo hemos visto, que es 1n, la clave primaria del 1, que en este caso es la clave primaria de fábricas, se asigna como clave ajena en el n. En este caso, el nombre de fábrica, la clave primaria del 1 se asigna como clave ajena en n que es concesionarios y eso siempre es así pero para ello tenemos que tener claro cuál es la relación entre las tablas vale y siempre es una clave decir no tiene sentido poner esto aquí y poner aquí el código hay que optimizar siempre y dice donde está la cadena de muchos va a la clave ajena una entidad que tiene la calidad 1 eso es y si hubiese más de un concesionario a que te refieres con que hubiese más de un concesionario es decir imagínate autogarrido sólo recibe de aquí vale después estos dos reciben de aquí y éste recibe de aquí porque me lo estoy inventando pero se cumple es decir como mínimo recibe de una fábrica ¿Vale? O sea, perdón Una fábrica distribuye Como mínimo un concesionario Pero pueden ser varios, es decir Puede ser uno, puede ser dos, puede ser tres O puede ser cuatro ¿Vale? Con la MN Ahora llegaremos, ¿vale? Estamos con la 1N, no os preocupéis que vamos a llegar ahí ¿Vale? No os preocupéis, de hecho lo vemos ahora ¿Ok? Entonces, nosotros tenemos Una parte, aquí 1N vamos con la siguiente relación, ¿vale? pero ojo, lo que os decía antes cuando hablamos de producto o servicio similar tenemos que tener claro la tabla que estamos mirando a qué hace referencia en este caso, estamos hablando de unidades físicas, como por ejemplo una compañera ha dicho que tiene su matrícula Diana, lo vamos a volver a ver, ahora otra vez, ¿vale? con otro caso ¿ok? que va a ser similar igualmente, por ejemplo, si no te ha quedado claro como esto se va a acabar yo también os sugiero, si no os queda muy claro que yo aún así los pregunto, intentad volver a ver la sesión para verlo porque tampoco, más que nada para que no aburra a los demás, tampoco de estar repitiendo siempre lo mismo 5 o 6 veces bien, por lo tanto vamos con otro caso, y a ver si para que te quede claro Diana, a ver si es 1N1 en este caso, como os decía el tipo de los productos ¿vale? hay que tener claro si estamos hablando de unidades físicas como por ejemplo, dice una compañera que tiene su matrícula el coche, es un coche como tal que se yo un Toyota Camry que tiene matrícula 7896 eso es una unidad física pero por otra parte está el tipo de producto el tipo de coche que sería un Toyota Camry ¿vale? que es un tipo, pero hay muchísimas unidades físicas todo el mundo me sigue bien ahora en este caso vamos a considerar que son precisamente unidades físicas imaginemos que cada uno de estos coches tiene una matrícula vale es un coche como tal no un tipo entonces nos dice que los concesionarios venden coches entonces vamos a ver cuál es la cardinalidad un concesionario cuántos coches puede vender únicamente uno o puede vender uno o más varios varios no tiene que se abre o sea abrir un concesionario y solo vendan un coche y después lo cierran lo que van a hacer efectivamente vale Vende varios coches Ahora bien, un coche Un coche físico con su matrícula y demás ¿Por cuántos concesionarios Puede ser vendido? No anunciado Anunciado puede estar en muchos Pero vendido lo que es la venta Un solo concesionario Exacto, ¿por qué? Porque estamos hablando de una unidad física, de un coche Este coche, tal cual Tiene su matrícula, etcétera Bien, entonces tenemos 1 a n y a 1 y 1 1 entonces cuál es la cardinalidad eso es 1 en diana para que como tú has contado antes para repetir como veis estamos aquí otra vez con 1 n vale ahora sabiendo esto tenemos que asignar la clave ajena y que hacemos especificamos el código de concesionario como clave ajena en coches o el identificador marca modelo como clave ajena en confesionarios escribirnos por el chat escribimos lo que echar porque como hay veces que al fin todo he visto dos a la vez se solapa ponerlo en el chat es decir o el idm o el código francisco y dicen que es este aquí ¿Vale? Algunos dicen que es el código, vamos a comprobarlo igual que lo hemos hecho antes Sabemos que un concesionario, por ejemplo, este de aquí, ¿vale? puede vender varios coches, ¿no? Pues supongamos que este coche es vendido por este concesionario y este también por el mismo Es decir, un coche, un concesionario, pero un concesionario, varios coches. Ahora bien, si lo hacemos al revés, decimos, vale, 498 vende el 14 y el 35. Pero ¿qué ocurre? No lo podemos poner así. ¿Qué pasaría? Que habría que hacer esto. Y esto estaría bien. no se vuelven varios del mismo código entonces no está bien es incontro escenario va a tener varios coches por lo tanto esto no vale no estaría bien entonces efectivamente hay que especificar para cada coche una clave ajena de código de contusionario para que saber de dónde bien vale y para volver a decir esto del 1n os pregunto en esta relación entre concesionarios el coach y coches el 1 que es concesionarios o coches cuando hablamos del 1n 1 es con sección de sesión a iza y el n es coches y que hemos dicho nosotros utilizamos la clave primaria del 1 de concesionarios y la asignamos como clave ajena en n, que es coches, con otras palabras, el código de concesionario como clave ajena en coches. ¿Sí? ¿Claro? Sí. bien ahora lo que me decíais que ocurre porque esto no suele es decir esto no suele ser la verdad vale no es tan fácil mapear las unidades físicas pero imagina que en vez de que sean coches unidades físicas que sean coches como tipología de producto vale es decir lo que hemos dicho antes está el toyota camry con su matrícula que es una unidad física y está el tipo de producto Sí, sí, ahora vamos a clientes, no te preocupes, es que quiero terminar con el producto. Está el Toyota Camry con su matrícula, que es un coche, y está el tipo de producto Toyota Camry, que hay muchos concesionarios que lo venden y hay muchas unidades físicas. ¿Sí? ¿Todo el mundo ve la diferencia? En otras palabras, una cosa es el inventario y otra cosa es la tipología Bien, pues supongamos, en este caso, que no aplica el ejercicio Sino que es aparte, para explicar Esto, en vez de ser unidades físicas, es tipología ¿Vale? Entonces, un concesionario, ¿vale? ¿Cuántos tipos de coches puede vender? No unidad de físicas, tipos de coches. ¿Uno o varios? Varios, ¿verdad? Es decir, puede vender, pues, este de aquí, este de aquí, etc. Uno va. Ahora, un tipo de coche, ese Toyota Camry que siempre decimos, ¿por cuántos concesionarios puede ser vendido? Tipo de coche, no una unidad física. Varios, varios también. Eso es, varios, porque es tipología. Unidades físicas puede haber en varios concesionarios, ¿vale? Y aquí, en esta relación entre las dos tablas, es cuando llegamos a lo que antes ha comentado que uno de los compañeros o compañeras al NN, es decir, muchos a muchos, ¿vale? esto no debe de existir en una base de datos relacional está prohibido no cumple con los requisitos de integridad entonces esto hay que darle una solución y ahora os pregunto qué solución le daría el código del producto puede ser muy bien ha dicho una compañía inventario no una tabla intermedia que conecte las dos muy bien con verónica no lo que está diciendo y también lo ha dicho jean sebastián es decir no estamos hablando inventario inventario es un concepto muy complejo vale y a nosotros la manera de romper ese muchos a muchos nos hace falta una tabla intermedia una tabla pívot vale porque para relacionar esas claves pero sin que incurramos en ninguna de aplicación quien me pone un ejemplo de una tabla pensar en lo más básico cae en un negocio la tabla más básica que hay cuáles cuando se vende algo eso es la tabla que de ventas o pedidos por ejemplo vale pedidos ventas entonces nosotros aquí vamos a tener el código de pedido puede ser 12 13 14 15 vale y en cada pedido que va a haber una intersección entre concesionario y coche por ejemplo código de concesionario 354 vale vende el coche 85 pero también el coche 85 lo puede vender el 321 vale pero además el 321 aparte del 85 también vende el 35, ¿vale? y que después el 354 puede vender el 14, ¿de acuerdo? entonces ¿qué ocurre? tenemos la tabla intermedia con su clave primaria y estas dos que serían claves ajenas y mediante la combinación de esas claves ajenas se crea otra tabla, en este caso de pedidos o ventas, donde tendrá también su clave primaria que básicamente será ¿qué? la intersección entre dos ajenas ¿de acuerdo? y aquí con esto si romperíamos el 1N ¿por qué? porque un pedido siempre tendrá un concesionario pero un concesionario tendrá varios pedidos o de otra manera un pedido siempre tendrá un tipo de coche pero un tipo de coche estará en varios pedidos Es decir, la relación entre concesionarios y pedidos es 1N y entre coches y pedidos también es 1N. ¿De acuerdo? Y con esto se elimina el muchos a muchos. ¿Sí? ¿Todo el mundo lo ve? Más o menos. A ver, vale, vamos a repasarlo. Por ejemplo, el pedido 12. ¿Cuál es el concesionario que interviene en el pedido 12? ¿Cómo se llama? Auto Garrido. Exacto, 354 es Auto Garrido, ¿verdad? ¿Y qué coche se vende en el pedido 12? Taurus. ¿Verdad? Y ahora os pregunto, ¿hay algún otro pedido de Autos Garrido? Sí ¿Cuál es? El 15 ¿Y qué coche vende en el 15? ¿El 85, el Taurus o vende otro? Otro ¿Otro? Es otro ¿De acuerdo? Como veis, es decir Un concesionario Vende varios coches Por ejemplo, el 354 vende el 85 Y el 14 Y a su vez, el mismo tipo de coche El 85 es vendido por dos confesionarios, 354 y 321. Esa es la relación N-N. Pero ¿qué ocurre? No podemos directamente con las tablas base juntarlas. Nos hace falta una tercera tabla donde mapear todas esas posibilidades y esa tabla es la de ventas. Y cada interacción entre esas dos tablas genera una clave primaria. Una interacción única. ¿Sí? ¿Mejor? De todas maneras no os preocupéis esto habrá más ejemplos que vamos a ir haciendo pero como veis, esto puede pasar y la manera de hacerlo es que tiene que haber otra tabla más ¿Vale? En este caso, como alguna vez he dicho, tabla de bigote que yo lo suelo decir tabla intermedia No, no, como que no el NN se rompe, Aurelio Porque nosotros no estamos relacionando estas dos tablas directamente. La relación entre concesionarios y coches es NN, pero no, en términos de base de datos, no la relacionamos directamente, sino que su relación pasa por una tercera tabla. ¿vale? esa tercera tabla es la que al ser claves ajenas sí que se pueden mapear de diferentes maneras pero cada interacción entre cada registro de concesionarios y coches queda registrado como una interacción nueva en este caso un pedido está prohibido, si esto en una base de datos bien diseñada no debe estar ¿vale? siempre tiene que haber 1 a n o 1 a 1 ¿vale? perfecto a ver, también una cosa, esto en ciertos productos en los cuales yo he trabajado y que después me han cargado los datos en una base de datos relacional Catalina, te voy a silenciar ¿vale? porque es que tienes abierto el micro entonces hay herramientas que la diseñan de tal manera que después es difícil extraer los datos y formar una base de datos medio relacional y que suelen tener estas cardenalidad es nn me ha pasado a mí por ejemplo con salesforce pero bueno que igualmente se puede solucionar vale ok por lo tanto también que quede claro vale está coches o productos como tipología y comunidades físicas unidades físicas yo precisamente lo pongo aquí pues para que esta diferencia pero es algo bastante complejo todo el tema inventario demás entonces lo veremos si acaso al final ya la señora cuando está estamos con sql bien ok bien perfecto pues vamos con el último que es el de los clientes que vuelvo a decir los clientes compran un coach pero que esto no es la realidad vale simplemente lo tengo hecho así para el ejercicio para ver todas las cardinalidades posibles sí sí claro sería de hecho ya ha subido dos que habla que de ellos pero que estos tipos de ejercicio vaya a tener por lo menos creo que 445 vale los que vais a poder practicar esto y darle una buena vuelta antes de que empecemos con las propias bases de datos de escribir código porque sin entender bien esto con ejemplos básicos después meterse a hacer consultas una base de datos real con muchos registros es un infierno literalmente bien como os decía nos queda la última parte que es los clientes compran un coche esto no es la realidad un cliente puede comprar los coches que quiera pero como atributo académico lo vamos a hacer así vale supongamos que un cliente sólo puede comprar un coche entonces volviendo a que los coches son físicos vale son unidades físicas no lo que hemos hecho aquí sino que son unidades físicas vale si francisco este ejercicio está en el temario bien un coche una unidad física para esta matrícula de demás a cuántos clientes puede pertenecer esto sí sería la vida real es decir un coche está a nombres de cuántas personas de una de una no es decir sólo hay una persona que es propietaria por papeles de este coche entonces por otro lado un cliente cuántos coches puede tener pero según lo que nos dice aquí que vuelvo a decir no es la vida real pero aquí nos dice qué 1 exacto, con clientes solo puede tener un coche ¿vale? bien, entonces aquí, viendo la cardinalidad que nos sale, no nos sale ni 1N ni NN, sino nos sale 1 a 1 ¿vale? que es el tercer tipo de cardinalidad que hay entonces, ahora yo os pregunto que no, te quedas un poco refriado con las gargantas Y ahora pregunto, ¿cuál es la clave ajena? ¿Identificador, marca, modelo o número de cliente? ¿Qué pensáis? Me daría igual cualquiera de los dos. muy bien cualquiera de los dos, es decir, cuando hay una cardinalidad uno a uno, podemos optar por uno o por otro ¿vale? yo por ejemplo voy a optar por mantener esta ¿vale? podemos asistir, la propia lógica de coche cliente no es la vida real ¿vale? pero en este caso supongamos, con un hipoteco caso que sí es uno a uno ¿vale? entonces yo que ocurre voy a asignar no ambas vale no voy a poner y dm aquí y aquí el número de clientes voy a elegir simplemente una porque ya con una es suficiente cual pues la que queramos de acuerdo y con lo tanto con ello obtendríamos ya la relación es decir estaría creada técnicamente la base de datos sus relaciones para albergar la lógica de la empresa para llegar aquí yo lo tenía ya ha hecho relleno, que son con otros datos, con otras relaciones, es decir, todo esto sigue igual, pero los datos van cambiando. Y ahora, un poco para practicar, ¿vale? Yo os pregunto, mira, te voy a dejar aquí a la izquierda, voy a preguntar, ¿cómo se llama el cliente que ha adquirido su coche y ese coche viene de la fábrica de Alfasa? ¿Cómo se llama el cliente? es decir, el coche, el cliente tiene que estar relacionado con esta fábrica, es decir, ha pasado por algún concesionario, ha comprado algún coche y tiene un nombre. Entonces, ahora nosotros tenemos que mapearlo, porque te cuenta que al fin y al cabo la base de datos es lo que hace, te relaciona la información. Entonces, el cliente que ha comprado un coche, el cual viene de esta fábrica, ¿Cómo se llama? Daniel. Muy bien. Daniel Rey. Perfecto. ¿Cómo lo sabemos? Sabemos que la fábrica que me dicen es Alfasa, que es la 54, ¿verdad? ¿A qué concesionario le manda coches? Que veamos aquí. A uno que es autogarrido, que es el código 354, ¿verdad? Nos vamos ahora a coches. ¿Qué coche estaba en el concesionario 354? El Daun Es el 85 Y el 85 Es el coche comprado por Efectivamente, Daniel Rey Vale Ahora pregunto, con los datos que hay ¿Y de esta fábrica? No, o mejor todavía, vamos a hacerlo al revés De Francisco Rodríguez ¿Vale? ¿El coche que le ha comprado? ¿De qué concesionario viene? Francisco Rodríguez ¿Se terremotó? Muy bien Es decir, Francisco Rodríguez Que es cliente 4567, ¿qué coche ha comprado? El 24 El 24, que es este dáster ¿De qué concesionario viene? Del 321 ¿Qué es ese terremotor? ¿Y de qué fábrica viene? mandas a mandas a ver si no no eso es muy bien como veis todo al final está aislado y ahora pregunto cuál es el nombre del concesionario que ha vendido dos coches sabría decirme lo el 321 que es ese termo ton eso es vale si os fijáis sólo hay uno que haya vendido dos coches porque está aquí duplicado estos datos porque los ha inventado pero en esencia lo más importante aquí es que podemos hilar toda la información que realmente es lo que hacemos a diario en las empresas pero esto tiene que estar estructurado de esta manera y de una manera limpia y que las restricciones de cardinalidad se cumplan de acuerdo ok este ejercicio igualmente está aquí explicado redactado para que pues también lo podéis revisar ahora bien sí claro dime ama perdón que no hace puntadas y tenéis dudas dime pregunta con esas tablas que están en este momento en este excel las cuales se encuentran con catenadas eso se puede montar pues en el programa de es que todo cualquier base de datos con la que vosotros trabajáis o descargáis o recibís un Excel, es que no sé, obviamente no sé cada uno de qué trabaja, ¿no? Pero de una manera u otra recibís en Excel información, ¿no? Es decir, de columnas y filas. Entonces, claro, en función de lo que pedís, básicamente son estas tablas que se combinan y os devuelven el resultado filtrado en base a lo que pedís. Es decir, esto ya existe. La información que recibís es de estructuras como esta. Que vosotros, cuando recibís los Excel, viene de esto no es que haya un enorme excel donde esté toda la información no es excel en el motivo caso de que exista viene de una base de datos relacional y así es como está estructurada hay diferentes tablas que van generando registros y están interrelacionadas vale es decir que esto ya existe existe en el 99% las empresas ok sí y esto es lo que nos va a enseñar a montarlo en el programa no montarlo no yo os voy a enseñar cómo consultar esto lo que ocurre claro claro yo lo que lo que pasa que es que lo estamos viendo con ejemplos como para diseñar esto pero no con la finalidad de enseñar sino que vosotros entendáis qué es lo que ocurre por detrás para que ahora cuando nosotros empezamos con el código de sql vale decir por ejemplo código lo que pasa que aquí no tengo no tengo gran gran parte por eso por ejemplo una consulta básica aparece toda esta información esto es una tabla pues voy a enseñar que mediante código podéis diferentes tablas seleccionadas diferentes tablas combinarlas y obtener la información que queréis esa es la finalidad última no es diseñar esto este no es nuestro trabajo de analistas de datos o viajes vale nuestro trabajo es escribir el código obtener la información que queramos filtrada y con los campos que necesitamos pero para eso tenemos que saber qué es lo que está ocurriendo por detrás que básicamente es esto y sabiendo cómo funciona tema de claves primarias claves ajenas como se relaciona la información hace que sea mucho más fácil después trabajar con código para extraer esa información vale gracias el profe sin problema perfecto entonces vamos a seguir practicando esto vale yo os voy a subir este excel resuelto por ese decirlo para que lo tengáis igualmente os lo subiré aquí en documentación vale pero al ser una parte que está en el temario lo pondría aquí en diapositivas vale ahora bien de cara a la semana que viene y es algo que ha preguntado una compañera si os vais a documentación aquí hay una carpeta nueva que he creado que es ejercicio voluntarios aquí una parte hay un excel y hay un enunciado de acuerdo el enunciado, que es este de aquí, básicamente, como decía, es la misma estructura que de la actividad 1 que vais a tener que entregar. ¿Y qué es lo que hay que hacer? Exactamente lo mismo que acabamos de hacer ahora. Yo os digo que hay ciertas tablas con ciertos atributos, vosotros inventáis unos valores con sentido para cada una de las tablas, con cuatro registros por cada tabla es suficiente, identificáis la clave primaria y asignáis las claves ajenas en función de lo que os piden, en las restricciones. Por ejemplo, los clientes compran en una única tienda, cada tienda almacena todos y cada uno de los productos, los productos son comprados por clientes, un cliente puede comprar uno o más productos, etc. Por lo tanto, la semana que viene corregiremos este ejercicio. Si os da tiempo a plantearlo, bien, si no, pues no pasa nada la semana que viene lo haremos y lo corregiremos ahora bien también hay otro excel chiquitito que este si os recomiendo que lo hagáis de cara a la semana que viene que es simplemente yo pongo diferentes casos con tablas no están relacionados entre sí con una restricción y vosotros tenéis que asignar la clave ajena este pues se hace bastante más rápido por lo tanto prefiero que hagáis este y el otro lo hacemos la semana que viene ¿de acuerdo? y como ya os he comentado están ya subidos aquí en ejercicios voluntarios ¿ok? ¿dudas? ¿preguntas? yo profesor una pregunta ¿hasta cuándo hay plazo para ya tener instalado el SQL Server y MySQL? lo que decían más o menos empezaremos un segundito que el calendario dentro de tres semanas vale es decir esta ha sido la sesión 2 en la sesión 5 vale es cuando empezaremos ya con el código como tal por lo tanto lo suyo sería que lo tuvieseis pues antes de esa fecha para esto muchas gracias sin problema paulina pregunta se debe enviar a los plataformas en la plataforma de estos ejercicios no todo lo que sea voluntario vale es que lo simplemente lo vamos a corregir no tenéis que subirlo a ningún lado los únicos que se entregan son las oficiales que son tres vale y del primero hablaremos la semana que viene vale esto no esto simplemente lo que son voluntarios lo hacéis por vuestra cuenta y los corregimos la semana siguiente decirme quién más tiene dudas ¿no? ¿todo claro? bien, vuelvo a insistir ¿vale? en el hipotético caso imaginad que puede pasar que estéis un poquito todavía intentando encajar las piezas no pasa nada, ¿vale? es normal seguimos haciendo ejercicio seguimos practicando ¿vale? y poquito a poco de tanto darle vueltas, acaba saliendo ¿vale? y más después cuando estemos ya con SQL, también practicaréis, etcétera etcétera, pero también tened en cuenta que normalmente cuando estáis trabajando, toda la información que os mandan viene de esto, de esta estructura. Es decir, en alguna parte de vuestra empresa fijo que está esta estructura. Lo que vamos a ver es que de esa estructura básica, mediante código, obtenemos la información que queremos. Sí, dime, Ana Lisbeth, dime. Sí, profe, en caso tal de que pues cuando ya las clases pues tengan mucho más, mucha más información y se requiere una clase de refuerzos que acá por ejemplo, aquí en Colombia se le dicen tutorías, allá es posible Tutorías individuales que yo sepa no nunca la hemos dado, ¿vale? Pero por eso también os digo es importante el foro, ¿vale? en el fondo no puede decir, oye, tengo esta consulta que estoy escribiendo, no me sale la respondemos y las clases de refuerzo y las clases normales como las de ahora, cuando llegue el momento también que ya tengáis dudas, bueno, igualmente siempre digo, si hay dudas me las preguntáis siempre podemos robar un poco más de tiempo, no me importa, si tenéis dudas las vamos a resolver en clase, pero ya lo que es tutoría como tal no, ¿vale? no os suele decir, de estas tutorías individuales Sí, sin problema ya no os preocupéis, ya no vamos a mostrar nada más los que queráis salir, podéis salir, no tenéis duda, sin problema, y los que tengáis duda, pues sin problema, decidme Disculpa, yo solo una consulta para ver si me lo tengo claro, en los tipos de cardinalidades vimos tres, una N N a N y una 1 en la primera asignamos una clave ajena que proviene de una clave primaria en la NN bueno, realmente sí, sí, vale en la NN creamos una clave y nosotros asignamos una clave por medio de una tabla pivot, se podría decir claro, exacto que es donde obtenemos de otra fuente de información, ahí lo que hacemos es imagínate las dos tablas que veíamos antes que tienen su clave primaria, que no podemos asignar claves entre ellas directamente y de ahí se crea una tabla nueva donde sí puedan interactuar pero como claves ajenas y se crea una clave primaria para cada interacción entre esas claves correcto y en la 11 es donde podemos elegir una u otra exacta efectivamente ok perfecto muchas gracias sin problema genial alguien más si yo una pregunta bueno estaré encima de este nosotros tenemos que instalar sql y mysql no importa la versión no la visión da igual si más antigua, más, en principio eso no suele dar problemas listo, gracias sin problema ¿alguien más? ¿no? igualmente, también os digo, en el foro podéis si tenéis dudas, imaginad que no suben ahora, las podéis en el foro eso sí, si es algo de la instalación, recordad siempre de hacer una captura de pantalla para que yo pueda tener un poco de contexto que es lo que está pasando, ¿vale? pero que igualmente, si es algo ya muy difícil que ni por arriba ni por abajo sabemos cómo hacer, pues ya también lo intentamos ver en la clase si tenemos que robar un poquito más de tiempo pues cogemos un poquito más de tiempo en la clase y listo no pasa nada, ¿vale? y nada, pues si no hay más dudas si os parece lo dejamos por aquí, ¿vale? la semana que viene seguimos con el tema de las claves, de hecho haremos estos ejercicios voluntarios y seguramente alguno más y poquito a poco, pues como veis iremos avanzando hasta que ya dentro de un par de semanas empecemos con ese cuero, ¿ok? así que nada, pues deseo todos una muy buena semana de acuerdo y nada nos vemos la semana que viene ok cuidado mucho feliz tarde

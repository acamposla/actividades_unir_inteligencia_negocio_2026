Bien, buenas tardes a todos, bienvenidos a la quinta sesión de Fundamentos Tecnológicos para el Tratamiento de Datos y bueno, en la sesión de hoy pues ya vamos a empezar con SQL como tal, ¿de acuerdo? Por lo tanto, en la sesión de hoy de una hora lo que vamos a hacer es ver las funciones básicas y principales, algunas de ellas, obviamente no todas ni mucho menos, pero sí que vamos a ver las que son las primordiales, podríamos decir, para que estén en la información. ¿De acuerdo? Por lo tanto, antes que nada, como ya os he comentado, nosotros no vamos a empezar directamente con Android Shortboards, porque es una base de datos enorme, con muchas tablas y es un poco lioso. Entonces, lo que vamos a hacer es primero trabajar con pequeñas tablitas que yo os voy a ir proporcionando. ¿Vale? ¿Cómo puedo instalar yo esas tablas? Pues si os vais a documentación y os vais aquí a la carpeta de scripts, que es una carpeta nueva, y aquí vais a ver cuatro archivos, dos de MySQL y dos de SQL Server. Pues obviamente en función de la herramienta que tengáis instalada, pues utilizáis una o utilizáis otra, ¿vale? Ahora bien, imaginaos que tenéis SQL Server, os descargáis estos dos, si es MySQL, estos dos. bien, una vez hecho esto yo ya supongo que vosotros pues tenéis ya instaladas las herramientas ya sea SQL Server o ya sea MySQL que de hecho, mirad, lo voy a abrir de nuevo y así lo hacemos todo desde el principio ¿vale? yo me descargo los archivos y ahora por ejemplo, en SQL Server voy, inicio el programa ¿vale? Me conecto y restauro Add-on-Shootworks. Es decir, esto es lo que tenía Scala derecho. MySQL. Lo mismo. Lo inicio. Workbench. Y ya tengo también Add-on-Shootworks instalado. Ojo, lo que os decía. Cuidado que el script que tenéis que descargar, ¿vale? Es decir, que tenéis que restaurar, son los que están en las carpetas de instalación de SQL. es decir, o es este de aquí, el archivo RAC para MySQL, o este para SQL Server. Bien, una vez que ya tenéis los programas instalados, descargáis estos archivos, y lo único que tenéis que hacer es, que yo los tengo aquí, ¿vale? Por ejemplo, tabla tema 3, tablas de Mario SQL Server, lo abro aquí, ¿vale? Este código no vamos a entrar de momento, que es lo que está haciendo, y simplemente aquí ejecutamos. Y os tiene que salir este resultado. Básicamente, lo que hace es crear cinco tablas. Con ejecutar una vez es suficiente. Es decir, las tablas se van a quedar guardadas. Si después cerráis SQL Server y lo volvéis a abrir, las tablas seguirán ahí. Si lo ejecutáis más de una vez, os saldrá un error. ¿Por qué? Porque obviamente, si queréis crear de vuelta una tabla que ya existe, pues no os dejará. En MySQL es lo mismo. abro tema 3 tablas temario mysql y simplemente ejecutó una vez y se me crean las tablas aquí una vez más si vuelvo a ejecutar me saldrá un error porque porque las tablas ya existen ok bien por lo tanto eso es lo primero que vais a tener que hacer pero no hace falta que lo hagáis ahora vale lo podéis hacer después de la clase dicho esto vale vamos a empezar vale y de hecho vamos a empezar un poco con la diapositiva hasta el momento nosotros hemos ido pues viendo las tablas son los datos simplemente en excel no por ejemplo tablas como estas la de alumnos que no se ha visto pues de clientes productos etcétera vale sabemos que una tabla se compone de tres elementos vale los atributos o columnas filas los registros y los propios datos vale bien ahora nuestra función como analistas de datos vale no es modificar la información simplemente consultarla de acuerdo y para ello nosotros tenemos tres funciones principales bueno antes de antes seguir con ello hay una parte de lenguaje sql definición de datos que nos vamos a saltar de momento vale vamos a ir a las consultas es decir en el tema 3 técnicamente empezaríamos aquí lenguaje de consulta página 14 vale y para consultar la información que en la base de datos hay tres funciones principales vale select from y web vale el select es donde nosotros especificamos qué atributos queremos de la tabla vale por ejemplo en esta tabla de aquí nosotros tenemos nombre de alumno de mi nombre de alumno fecha nacimiento lugar esos son los atributos vale y es lo que se especifica en el select en el front especificamos de qué tabla vienen esos atributos vale y el web lo que nos permite es filtrar a nivel de fila de acuerdo pero vamos a hacerlo de la manera práctica vale por ejemplo de las tablitas estas que hemos creado de las cinco hay una que es la de asignaturas por lo tanto si yo me vengo aquí y especificó select asterisco asterisco hace referencia que me devuelve todos los atributos y específico from y el nombre de la tabla y ejecutó obtengo la información de las asignaturas que está almacenada en esta tabla ¿vale? como veis no devuelve todos los atributos y todos los registros, porque no estoy filtrando nada, ni atributos ni tampoco estoy utilizando el web para filtrar los registros ¿vale? ahora bien, imaginad que yo no quiero todos los atributos o todas las variables, solo quiero algunas de ellas, pues en vez de el asterisco, simplemente escribo los nombres de esos atributos como por ejemplo, nombre de la asignatura y, qué sé yo, la especialidad. ¿Vale? Si yo ejecuto esto, como veis, ya no me devuelve todos los atributos, solo los dos que yo he pedido. Por ejemplo, también, imaginad que yo quiero los años que hay presente en la tabla de asignaturas. ¿Vale? Los años en los que se imparten esas asignaturas. Como veis, me devuelve todos los registros automáticamente, los nueve que hay, ¿vale? Pero, ¿qué ocurre aquí? Aquí hay duplicaciones, técnicamente. En otras palabras, nosotros tenemos 9 registros pero valores únicos, ¿cuántos hay? 2 2, ¿verdad? 2019 y 2020 Ahora imaginad que yo, pues no quiero que se me repita dice, yo solo quiero los años, quiero que sean únicos Para ello, después del select, especifico distinct ¿vale? que nos sirve para devolver valores únicos Como veis ahora, me devuelven el 9, me devuelve 2, porque quita duplicaciones. ¿Vale? Y ahora una pregunta. Si yo aplico el distinct a toda la tabla, ¿me saldrán los 9 registros? Es decir, todo, ¿o me saldrán menos? ¿Qué pensar? Los 9 registros. ¿Por qué? Un ID único. Muy bien. Efectivamente. Como dice Verónica, es decir, me devolvería todo. ¿Por qué? Porque tenemos la clave primaria. La clave primaria ya es de por sí es única. ¿Vale? Entonces, si yo hago un disting de toda la tabla, me devolverá lo mismo. Que se lo aplico como si no. Pero si yo, por ejemplo, hago un disting de curso, ¿vale? ¿Cuántos registros me van a salir? Viendo los datos. 4. 4. Efectivamente. ¿Vale? Bien. Seguimos. Tabla de asignaturas. ¿Vale? Supongamos que nos dicen, oye, yo quiero el listado de asignaturas, quiero todos los atributos y un listado de aquellas que solo se imparten en 2019. es decir estas de aquí ¿vale? para hacer eso yo no tengo que filtrar a nivel de atributo, tengo que filtrar ¿a qué? a nivel de fila, y ya hemos dicho que para filtrar a nivel de fila tengo que utilizar el web ¿vale? y el modo de Hopper Andy es el siguiente especifico el atributo en este caso quiero filtrar por año y le digo que sea igual a 2019 vale si yo ejecuto esto como veis efectivamente ya no me devuelve los 9 registro me devuelve solo lo del año 2019 imagínate mente que sea igual que lo que sea distinto de 2019 que pasará me devolverán todos los años que no sean 2019 que en este caso sólo es un que sería 2020 vale si yo le digo que el año sea mayor igual qué pasará pues puede volver en este caso todo porque sólo hay estos dos años pero se le digo que sólo sea mayor que 2019 no te volverá sólo 2020 es decir esto es aritméticamente o de lógica como por ejemplo si trabajásemos en excel cierto sí bien fijaros qué año año no es número entero es decir es un número de trimestres un número pero por ejemplo especialidad especialidad no es un número verdad es que texto de texto es decir yo aquí para manera de filtrar sería igual pero nosotros el dato que es canal a texto no lo podemos tratar como si fuese un número, es decir, si yo pongo especialidad igual a base de datos, ¿vale? y ejecuto, me da error ¿por qué? porque las cadenas de texto tienen que ir entre comillas simples, ¿vale? las comillas que están en el teclado al lado del cero ahora sí, si yo ejecuto esto fijaros, no me devuelve nada pero realmente sí que está, ¿qué ha pasado? ¿por qué no me devuelve nada? está mal escrito base eso es, lo cual nos conlleva al siguiente razonamiento, cuando filtramos por algo tenemos que estar seguros de que hemos escrito de la forma correcta, ¿vale? ahora sí, si ejecuto, efectivamente me aparece base de datos ¿vale? puede aplicar lo mismo distinto de base de datos y me devolverá todas las otras especialidades. ¿Ok? Y ahora os pregunto, ¿yo puedo hacer esto? ¿Que sea mayor que base de datos? ¿Creéis que tiene sentido? Algo me devuelve, pero base de datos, a diferencia de un número, ¿qué ocurre? Es una cadena de texto. No tiene un orden predefinido, un orden lógico. ¿vale? entonces aquí por ejemplo mayor o igual o menor o igual ya no nos vale, igual o distinto de, sí ¿vale? pero mayor o igual o menor o igual no, voy a ejecutar la tabla entera de nuevo ¿no? pues imaginad que ahora nos dicen en vez de una condición que hemos visto condición del año por ejemplo que sea igual, mayor que, distinto menor que o cadena de texto, igual o distinto de, y ahora nos piden en vez de únicamente un filtro o una condición, nos piden dos. Como por ejemplo, que el año sea 2020, entonces especificamos año igual a 2020, pero adicionalmente queremos que la especialidad no sea otros. Para ello, hacemos lo siguiente, especificamos la primera condición, especificamos and y especificamos la otra condición especialidad distinto de otros ejecutando esto efectivamente si nos fijamos el año 2020 ha funcionado y la especialidad no es otros ok, es decir en el web nosotros podemos poner todas las condiciones que necesitemos. ¿Ok? Ahora, imaginaos si yo digo aquí que sea distinto de 2020 y distinto de otro. Y ejecuto, y me sale esto. ¿Está bien? Sí. Fijaros, el año es distinto de 2020 y la especialidad no es otra. Pero ojo, si yo hago esto, que sea igual a 2019 y la especialidad distinto de otros Perdón, año 2020 Perdón, año 2019 y que sea igual a otros No me devuelve nada ¿Por qué? Porque para el año 2019 no hay ninguna especialidad que sea igual a otros Lo cual nos lleva también al siguiente punto Ojo, cuidado con las condiciones que especificamos, que tengan sentido, pero que también puede pasar que lo que estemos buscando no exista. ¿Ok? Hemos visto, para cada número, para cada cadena de texto o incluso combinar ambos. Ahora, por ejemplo, siguiendo un poco con la misma lógica. Imaginad que nos dicen, oye, quiero los datos de la asignatura gestión de proyectos de inteligencia de negocio. ¿Cómo lo hago? Un poco de repaso. Nombre, es decir, primero indico qué atributo es, igual, y al ser una cadena de texto, tengo que poner comillas simples y especificar gestión de proyectos de inteligencia de negocio. negocio vale y fijaros ejecutó y no me devuelve nada porque el asunto por eso es ojo vale lo que ha dicho también hace un momentito cuando hablamos de canadá de texto tenemos que ser muy muy precisos por ejemplo aquí había una tilde hay que mantenerlo ¿Y en ese caso también distingue mayúscula de minúsculas? Cuando escribimos el propio código, a SQL normalmente le da igual, si yo pongo en minúsculas o asignatura, todo en mayúsculas está bien pero cuando hablamos de cadenas de texto, como por ejemplo en los filtros en este caso, yo iría con cuidado hay algunos sgbd que lo hacen bien y otros que no pero ante la duda, lo ideal es que lo pongáis exactamente o sepáis, mejor dicho, exactamente que es lo que estáis buscando. Claro, no lo digo en el cuidado de nosotros cómo escribirlo acá, sino porque si a lo mejor tenemos una base tan grande, pues no hemos visto cada uno de los objetos de la base para saber si está escrito en mayúscula o en minúscula, la primera de cada palabra en mayúscula. Imagínate que, por ejemplo, están los nombres de asignaturas, pero se repiten porque están en otra tabla. ¿Cómo lo haríamos? bajo mi punto de vista yo haría un distinct de la asignatura para ver si se repite o similar utilizo copio el valor y lo pego pues si lo tengo que reutilizar por ejemplo pero que realmente con sql se puede hacer ya hemos visto podemos incluso ejecutar toda la tabla descargarlo en excel o simplemente hacer un distinct en la asignatura comprobar que todo está bien ya a partir de ahí filtra vale sí que más arriba donde usábamos el distinct es si yo pongo dos campos por ejemplo a n muy buena pregunta curso me va lo que me va a devolver es las parejas distintas verdad efectivamente fíjate por ejemplo 2020 vale curso 3 se repite porque porque tengo 2010 y 9 2020 efectivamente sin problemas alguien más sí profe yo es que estoy probando la sql así pues en interacción con la clase y resulta que cuando pongo select y from me dice que hay un error, entonces no sé si es que no he seleccionado la base de datos, no la tengo ahí abierta. Es verdad que no lo he comentado, pero por ejemplo el SQL Server tenemos que estar pendiente que aquí esté puesto Adunchubo 2017, intenta cambiarlo Olga, a ver si ahora te funciona. Y en MySQL es un poco lo mismo, es decir, en MySQL tiene que estar en negrita, en negrita dicen que base de datos está, porque efectivamente fijaros si yo me voy a otra base de datos vale por ejemplo test y ejecuta asignatura esa tabla no existe ahí o aquí por ejemplo si yo cambio a test también vale y ejecutó esto me da error por ejemplo este es el error que te da holga algo similar a esto si tal cual nuevamente porque no estamos en la base de datos correcto vale si pongo la base de correcta ejecutó ya funciona ok vale pero se vea pronto si se vive vale anali que tiene una buena pregunta oye puede utilizar el or sí imagínate nosotros tenemos asignatura que de hecho íbamos a eso ahora mismo tengo la tabla asignatura vale y nos dicen oye yo quiero los datos de las asignaturas que sean del curso 1 o del curso 4. Hemos visto que nosotros podemos utilizar AND, es decir, una condición y otra condición. Pues efectivamente yo le puedo decir que aplique o una u otra es decir curso igual a 1 o curso igual a 4 vale ejecutó y efectivamente funciona, ¿vale? Funciona, ¿no, Olga? Vale, perfecto. Esto, pero fijaros, cuando yo digo curso 1 o curso 4, ¿vale? No estoy diciendo del curso 1 al 4, sino o 1 o 4. ¿Estamos hasta ahí? Sí, ¿verdad? Es decir, si yo hago esto, estas dos consultas son lo mismo son lo mismo o no pues efectivamente no, porque en el primer caso yo estoy diciendo que sea curso 1, curso 4 y en el segundo que sea del 1 al 4 es decir, es un intervalo el OR bueno, el OR no, perdón mucho cuidado con lo que estoy seleccionando también ¿vale? ¿qué ocurre? el OR al igual que lo acabamos de ver ¿vale? yo os prohíbo usarlo, no podéis utilizar OR, cuando termine el master sí, o a menos que yo os pida específicamente que lo hagáis en vez del OR ¿vale? hay una función que es mucho más o sea que hace lo mismo pero induce a menos errores que es IN, ¿vale? Es decir, en vez de utilizar O, especificamos IN y entre paréntesis el conjunto de datos por el que queremos filtrar, que en este caso es 1 y 4, ¿vale? Ejecuto y efectivamente lo tengo, ¿vale? ¿Veis la diferencia entre el igual y el IN? El igual o distinto de es para un valor, ¿vale? El IN es para un conjunto de valores. Entonces, en vez de utilizar OR, vamos a utilizar IT. ¿Vale? O si lo que llego es descartar, es decir, devuélveme todas las asignaturas que no sean del curso 1 o 4, yo especifico NOT IN. Lo de IN, no. fíjate si yo me voy a MayaSQL bueno, a ver, ahora funciona también el OR es algo muy muy peligroso, ¿vale? hoy no vamos a ver ningún ejemplo de ello pero que la semana que viene o la otra, sí el OR puede hacer que cometamos un error a la hora de obtener los datos ¿vale? Pero bueno, es este, lo tenemos la semana que viene. Pero eso digo, en la asignatura, a medida que yo diga lo contrario, utilizamos in o not in. ¿Vale? Nofe, una consulta. Ahí cuando vos pusiste or y nos tira los cursos 1 y 4, si ponemos and, ¿no tiraría lo mismo? Muy buena pregunta Lo que dice María Lefina Es decir, imagina, yo tengo aquí la tabla de asignatura Y yo le digo Oye, quiero filtrar que el curso sea 1 Y el curso sea 4 ¿Qué pensáis que pasará? No está blanco porque no No existe No existiría Sería contradictorio ¿Por qué? Porque SQL Con el web lo que hace es Primero voy a esta fila, oye, el curso Es 1 el curso es 1 el curso es 1, ah, el curso es 1 vale, este lo devuelvo, es decir, va por cada registro ¿qué ocurre? si le especificamos esto, le decimos oye, el curso es 1 y el curso es a la vez 4 es decir, es mutuamente excluyente, ¿vale? el código tiga el código de SQL funciona pero lo que está haciendo es mutuamente excluyente, porque le está diciendo que a la vez sea curso 1 y a la vez sea curso 4 ¿vale? cuando solo tiene un curso, ¿vale? entonces lo que pasaría es que no nos devuelve nada ¿ok? muy buena pregunta María, porque es que esto hay veces que se me olvida explicarlo pero realmente es una buena manera de ver también cómo funciona el antielo Alejandro lo que dice, ¿qué pasa si quieres anidar AMP y OR, es que ahí es donde vienen los problemas ¿vale Alejandro? es decir, ahora mismo porque estamos con lo básico pero la semana que viene, como vamos a ir practicando todo esto, habrá por ejemplo una consulta que yo os pida, que podemos utilizar OR pero también hay que utilizar AMP, y ahí es donde vienen los problemas, ¿vale? pero lo veremos la semana que viene. Puedo cambiar la información ¿qué quiere decir? en la tabla, Ana, es decir modificar algo de aquí del propio dato ¿te refieres a eso? es decir, por ejemplo que esta asignatura en vez del curso 3 es el curso 2 ¿eso es a lo que tú te refieres? nope primero, porque ese no es nuestro cometido ¿vale? nosotros consultamos la información no modificamos nada las tablas cuando nosotros escribimos este código lo único que hacemos es consultar vale nosotros como analistas no vamos a modificar nada vale porque primero porque no vamos a tener permisos vale si nos dan acceso así que sería como reader vale y lo segundo cambiar algo en la base de datos es muy peligroso pero que es muy peligroso. ¿Vale? ¿Sacar el promedio? Eso sí. ¿Vale? Es decir, por ejemplo, la media de créditos. Eso lo podemos hacer en una consulta y calcularlo. Eso sí. Cálculo sí. Obviamente no lo vamos a hacer hoy, pero sí que lo vamos a ir haciendo. ¿Ingesta de datos? ¿A qué te refieres, Alejandro? ¿De recibir datos? No. Es decir, la asignatura se cierra en consultas. En aprender SQL para consultar. No para modificar, que veremos algo, pero simplemente para lo que sepáis y nada más, es decir, practicar el código para obtener información para obtener el dataset que nosotros queramos ¿vale? ¿podemos mezclar dos bases de datos en una búsqueda? Sí Jorge, podríamos, ¿vale? por ejemplo conectar dos tablas de dos bases de datos diferentes, siempre que la clave lo permita se podría, ¿vale? gráficas en SQL no, nosotros os lo digo desde perspectiva de lo que yo trabajo que soy analista BI, ya lo sabéis yo utilizo SQL para preparar y limpiar los datos y ya después los cargo en Power BI que suele ser lo más normal o en R, ¿vale? SQL, daos cuenta que no es R no es Python, no es Power BI esto es un gestor de bases de datos aquí están los datos sueltos en tablas nosotros escribimos código para obtener la información pero no para analizarla esto es como si fuese preprocesado ¿vale? sí y no depende, lo más normal es que sí yo por ejemplo intento limpiar todo y preparar mis consultas o mi código ya limpiándolo todo y ya después una vez que obtenga el resultado cargarlo en Power BI o en R ¿vale? que es lo normal ¿vale? intentar limpiarlo todo a nivel de SQL porque daos cuenta que aquí nosotros no vamos a modificar nada, lo único que hacemos es escribir un código que se computa y nos devuelve unos datos que nosotros podemos pues importar en, que se yo, en Power BI, en R, etc ¿bucles? se podría, ¿vale? si que es verdad que nosotros no lo vamos a utilizar para nada, en este caso pero podríamos hacer más que bucles, podríamos utilizar parámetros, etc pero como no existir, eso queda bastante lejos es decir, de momento vamos a quedarnos con saber cómo utilizar el código cómo combinar tablas, cómo centrar bien el cálculo, etcétera, etcétera, y iremos practicando como podéis, se puede, pero para, por ejemplo cuando hay muchas de estas cosas que me preguntáis me las preguntáis por la posibilidad o porque necesitáis hacerlo, porque no es lo mismo, posibilidades hay muchas pero no os centréis en ello, tenéis que centraros en qué os hace falta SQL. Por ejemplo, en vuestras empresas, cuando, creo que lo hablábamos el primer día, cuando recibís un Excel de IT con unos datos específicos, ellos puede tener lo que hacen es esto. Hacen un código y os mandan la información. Jorge me pregunta, ¿Profe, un SAP u otro ERP nos trae un equipo a limpiar y buscará la imprevía? Efectivamente. Yo trabajo mucho con Salesforce. Porque imagínate, a mí ingeniería de datos, lo que me hace, me descarga las tablas de Snowflake aquí, yo me hago de Snowflake de Salesforce, yo me hago mi vista específica para algo y después la importo en Power BI efectivamente Alejandro yo lo que suelo trabajar con vistas, concepto que también veremos, pero no el primer día de clase pero al final de la ESO sabremos cómo crear vistas, ¿vale? ¿Cuándo se separan las tablas en diferentes bases de datos? depende del contexto, Alejandro es decir, imagínate, si tengo una base de datos que tiene los datos de Salesforce y otra que tiene los datos de Microsoft Dynamics, no lo vas a tener en la misma base de datos, no tiene sentido, las tendrás por separado, el número de clientes imagínate pues se ha hecho de tal manera que sea el mismo, pues podrías conectarlo efectivamente María si tú haces toda la empieza aquí Power Query después no te hace falta, y además en Power Query hay veces que es un poquito como decirlo un poquito feo y tarda cuanto antes haga todo el procesamiento más cerca de la fuente, más rápido trabaja todo el proceso al final ¿vale? yo digo, desde mi experiencia yo tengo las tablas yo trabajo con SQL, trabajo con Snowflake ingeniería me hace el landing de las tablas originales, yo a partir de ahí escribo el código, la información que necesite, lo guardo en una vista en un portabago BI, como un ejemplo ¿vale? Pero no nos vayamos tan lejos todavía, ¿vale? Vamos a centrarnos en el código, ¿vale? Es decir, las próximas siete semanas, centrémonos en aprender esto. No lo que se pueda hacer con esto, porque eso, una vez que nosotros avancemos lo suficiente, en las últimas clases, podríamos perfectamente hablar de ello sin problema, ¿vale? Pero de momento, centrémonos en el código, entender qué es lo que hace y qué es lo que no hace, ¿vale? Y tener en cuenta que esto, aún así, es lenguaje de programación. Es decir, hay que pensarlo todo de una manera un poco cuadrada, como suelo decir. ¿Ok? Bien. Nos habíamos quedado en el IN. ¿Verdad? IN o NOT IN. Entonces, mejor que LOR, ¿vale? Vamos a utilizar IN. Ahora, esto, por ejemplo, ya hemos dicho, es que sea mayor o igual que 1 y menor o igual que 4 ¿vale? no es lo mismo que esto esto por ejemplo, María que antes preguntó esto sí tiene sentido, es decir, que el curso sea mayor que 1 o menor que 4, pero aquí, ¿cuál es la diferencia entre estas dos consultas? una es, como he dicho, o 1 o 4 conjunto de datos y esto es un intervalo Del 1 al 4, es decir, el 2 y el 3 están ahí. ¿Vale? Entonces nosotros podemos hacerlo de esta manera. Pero lo más útil sería utilizar between entre 1 y 4 y todo lo que haya de por medio. ¿Vale? Es decir, estas dos opciones serían equivalentes. También os animo que utilicéis el between. No vaya a ser que aquí la líes. ¿Vale? ¿En orden? ¿Qué sentido en orden? ¿Qué te refieres, Ana? De orden Es decir, cada vez que te ejecutes, ordenarlo Por alguno de estos atributos Sí, o sea, digamos Ahí dice curso 2 1, entonces que me los traiga 1, 2, 3, 4 Ajá Sí, hay una función Y esa función va al final, después del web Verá que aquí Bueno, mirad, voy a poner el web que el año sea 2019, ¿vale? Para que no sea más sencillo. Y después especifico... Especifico el campo por el que quiero ordenar y si lo quiero ordenar de manera ascendente o descendente. Si pongo ASC, me lo trae de manera ascendente. Si lo pongo... Sí, así lo está... Es descendente. Es como en el Excel cuando nos vamos a ordenar from A to Z o from Z to A. Pues igual. ¿Vale? pero sí, se puede ¿vale? Yo puedo pedir por ejemplo que me traiga la tabla sin alguno de los campos, o sea, sin alguna de las columnas por ejemplo, tráigame la tabla pero sin el año o sin la especialidad Ah, dices tú, tráeme todo a excepción de algo, ¿no? A todo a excepción de algo Eso en SQL Server no sé si funciona en Snowflake, en la herramienta que yo trabajo, sí lo que pasa que aquí no estoy seguro de que lo han implantado, pero en el peor de los casos imagínate que quieres todo menos especialidad, pues por desgracia vas a tener que escribirlo manualmente aunque seguramente pues esto va avanzando en el término de la propia herramienta y seguramente haya alguna función, también es verdad que mi SQL del año 2022 que seguramente no lo tenga, pero buscarlo, que posiblemente pues ya lo hayan incorporado lo que os he comentado, en Snowflake que es el sector con el que yo trabajo si se puede hacer pero aquí ahora mismo no sabría si es otro sgd vale si queréis podéis buscarlo no flex se llama porque también hay como cursos gratuitos de sql si no recuerdo mal si dime veronica en el profe al edipo nos va ordenando por numéricamente una variable, pero si quisiera ordenar en orden alfabético ¿cómo sería? Pues imagínate el curso, bueno, vamos a especialidad ¿qué pasará si yo hago esto? Ah, ok, pensé que pronto era otro código diferente Ah, ya, listo. No, lo único es que cambias el campo y como este caso no es numérico, pues lo que va a hacer es básicamente ordenarlo de forma alfabética ok, listo, gracias ok, más dudas antes de que sigamos vale, hemos visto número entero, o por ejemplo curso, no, y cadena de texto pero nos queda otro tipo de dato más ¿vale? que es fecha ¿de acuerdo? en la tabla de asignatura no tenemos fecha, pero en la tabla de alumno, sí ¿de acuerdo? ¿qué ocurre? ¿cómo funciona fecha? fecha es una mezcla entre número entero y cadena de texto ¿por qué? porque yo puedo decir que la fecha de nacimiento sea mayor o igual que 1975 03 15 ¿pero qué ocurre? si ejecuto esto SQL no me entiende ¿por qué? porque fecha tenemos que especificarla como si fuese una cadena de texto pero funciona como un número entero es decir, si yo aquí le digo que la fecha de nacimiento sea mayor o igual que 1975 15 de marzo del 75, lo entiende a pesar de que es una cadena de texto o si le digo que sea menor o igual o incluso si le especifico un between es decir, realmente funcionar, funciona como si fuese número entero, ¿por qué? porque las fechas pues tienen un orden establecido ¿vale? imagínate, entre 70 y 75 ejecuto y me aparece, ¿vale? entonces, aunque nosotros lo especifiquemos como canalla de texto puede utilizar la lógica que cuando utilizo con número entero ¿ok? entonces está el número entero canalla de texto y fecha Que la funcionalidad es un poco combinación de los otros dos. Bien, ahora, volviendo a la tabla de asignaturas. ¿Vale? Si veis aquí, la tabla como tal, toda, veis algo raro, algo que de hecho ya hemos mencionado en las clases pasadas en Excel. los nulls? Eso es. Muy bien. Recordemos que los valores null ¿vale? No quiere decir que tenga datos, es decir, que el dato directamente no existe. Por eso, por ejemplo, aquí aparece en SQL 0 que anda amarillo, o en MySQL ¿vale? Aparece así, null, como subrayado en negro. ¿Por qué? Porque en esencia null no es un valor, ni es un cero, ni es nada. Y la manera de tratar con ellos es diferente. Es decir, imaginad Que yo digo que el profesor id sea igual a nulo. Si yo ejecuto esto, no me aparece nada. ¿Por qué? Porque si yo utilizo igual, distinto de, in o similar, estoy dando por hecho que voy a filtrar por un dato. ¿Verdad? Pero ¿qué hemos dicho? Null no es un dato, no es un valor, no es nada, está vacío. entonces para filtrar por los nulos hay que hacerlo de otra manera y se hace especificando is null se me devuelve a los valores que son nulos o is not nulo quitando los valores nulos vale es la única vez que nosotros utilizamos is o is not de acuerdo pero fue una pregunta como yo puedo validar cuántas tablas hay es que no sé digamos está la tabla alumno está la tabla la otra tabla asignatura está 5 hasta el script vale están de todas maneras no hace falta de momento las otras pero están aquí vale es decir por ejemplo si hago select from de alumno que está lo hemos visto asignatura tenemos visto computador está aquí profesor y matrícula igualmente al principio lo que haré es que seguir guiando y diciendo el nombre de las tablas más adelante cuando yo crea de base de datos con ejercicio pues si vosotros los que vais a tener que mirarlo, ¿vale? Bien, ¿ok? Entonces, los nulos hemos quedado que no son valores, entonces hay que tratarlo de una manera diferente, is o is not, ¿vale? Y ya por último, para terminar por hoy, imaginad que nosotros queremos filtrar, ¿vale? Pero no sabemos el valor exacto de lo que estamos buscando. en otras palabras imagínate nos dicen oye quiero el listado asignaturas que contenga la palabra datos vale si mirando ahora mismo el nombre de las asignaturas cuántas asignaturas contiene la palabra datos 3 seguro No, cuatro Eso es Pero imagina que nosotros tenemos aquí Un millón de registros Y nosotros efectivamente queremos filtrar Que nos busque La palabra datos Para ello hay una función Y esa función se llama Live Que nos permite Buscar, no el valor exacto Pero buscar un valor dentro De out y en este caso vamos a buscar datos ¿qué ocurre? que nosotros no podemos simplemente especificarlo así porque si utilizamos el like tal cual parecido al igual y no hay nada que se llame datos entonces si queremos buscar que contenga la palabra datos tenemos que especificar al principio y al final un porcentaje este porcentaje lo que hace es darle a la entrada de la SQL que ahí hay caracteres me da igual cuáles al principio y al final, pero en alguna parte, me tiene que buscar la palabra datos. Entonces, si yo ahora ejecuto esto, efectivamente, como hemos dicho, ¿qué ocurre? Me devuelve cuatro registros. Ahora bien, supongamos que le dije, no, es que tiene que empezar por la palabra datos. Entonces, quito el porcentaje y le doy a entender a SQL de que la primera caracteres es datos. Si yo ejecuto esto, obviamente no aparece nada. ¿Por qué? Porque no hay ninguna que empiece por datos. Pero, ¿y si termina en la palabra datos? ¿Hay asignaturas que terminen en la palabra datos? Sí. Tres. Tres. Datos, datos y datos. ¿Vale? Entonces, lo más normal es que busquemos que contenga. Si ponemos esto independientemente, si empieza, termina o está en medio. entonces con el like me permite buscar ahora si son más palabras porque te hace si son más palabras en este caso no nos queda otra que utilizar por vale que sea datos o por ejemplo que yo que sé que contenga y ya vale me aparecen más porque aquí ya en algunas palabras está con el like sí que nos quedaría otra que utilizar por ojo mirar lo que acabo de hacer aquí he puesto dos guiones lo que he hecho ha sido comentar vale se vuelve a ejecutar esto si comentó una parte el código es que ya no aplica en la ejecución pero una consulta a instrucciones utilizando web nombre y luego vuelve siempre hace el atributo nombre y que indica que tengo trato es decir yo podría no colocar en la segunda atributo que sea nombre sino que por ejemplo ponga especialidad y ahí me trae que del atributo nombre tenga la palabra datos pero en especialidad también tenga datos o sea el nombre de los datos y por ejemplo no decir especialidad light también datos no vale quedaría así porque por ejemplo datos este en este caso la especialidad no tiene datos pero tiene datos, pero aquí fijaros nombre no contiene datos pero contiene datos en especialidad efectivamente Este profe pregunta, y en ese caso justo del ejemplo que puso ahorita ¿ahí si es mejor opción poner el or o hay alguna forma de anidar con el in, la función light? No, por desgracia cuando hablamos de light, al ser una función un poco especialita, no, es decir in no nos lo permite es decir, si nosotros tuviésemos exactamente lo que estamos buscando, pues sí podríamos subir, pero en este caso no para el like, la única manera de hacerlo es con oro ¿vale? gracias vale, María, ah, bueno, María, lo que tú me has preguntado lo de los comentarios, no lo de esto, es decir como decía, si os fijáis si yo pongo dos guiones justo antes de esta parte del código este código ya no aplica, porque lo conseguirá como comentario, ¿vale? en MySQL creo que es igual pero tiene que algún espacio vale efectivamente funciona igual vale bien como decíamos el like también existe su contrapartida no es decir devuélveme todas las asignaturas que no contenga la palabra datos de acuerdo igual se podrá utilizar ahí y el land verdad en función de la lógica que se quiera buscar el ansi claro por ejemplo dice oye no quiero que sea datos pero por otra parte no quiero que tenga más de cinco créditos por poner un ejemplo no por específico créditos mayor o igual que 5 y ahora llama parece en 4 porque la tenía de cuatro y medio ha desaparecido no os preocupéis porque con esto realmente nosotros vamos a practicar muchísimo es decir, la semana que viene no os voy a mandar ningún ejercicio voluntario mandaré otra cosa, pero ya la próxima semana sí que os mandaré, es decir os subiré un script igual que tenéis aquí y una serie de consultas que yo voy a pedir y vosotros vais a tener que practicar ¿vale? pero como os he dicho hoy es el primer día es decir, hoy hemos ido a lo básico y al fin y al cabo pues poquito a poco iremos subiendo el nivel ¿vale? pero quedaros con que select from where es lo fundamental ¿vale? es decir, eso va a estar presente en el 100% de vuestro código, siempre, ya utilicéis después unos filtros o otros, lo vais a tener que hacer, toda consulta empieza con un select from ¿vale? entonces, de cara a la semana que viene que sí que es verdad que no hay no he puesto, no vais a tener ninguna actividad opcional todavía ¿vale? pero si vais a partir de la página 14 veréis que aquí tengo diferentes consultas como metido en cuadraditos, ¿vale? que podéis seguir ejecutando simplemente también, pues, para probar, etc. ¿vale? hasta la página 17, ¿vale? consulta más de una tabla es algo que veremos la semana que viene pero estas pequeñas consultas, pues, las podéis ir haciendo ¿de acuerdo? otra cosa, lo que hemos hecho ahora hoy en clase no os voy a compartir el script, ¿vale? es decir, los primeros dos o tres semanas no lo voy a compartir ¿por qué? porque quiero que vosotros mismos lo escriba y se lo ejecute jce no vais a romper nada vale no tengáis miedo simplemente por ejemplo mañana no ponéis la clase la ponéis más rápido para que no está escuchando toda la hora pero a la vez de lo que yo he ido haciendo hoy pues hacerlo por esta cuenta porque porque yo que le perdáis el miedo porque es como que lo veis en la pantalla dice vale esto es sencillo pero después a la hora de la verdad si os ponéis solo hay veces que después pues os agobiáis, sabéis si voy a romper algo, etcétera, etcétera. Entonces quiero que preciéis un poco por vuestra cuenta. Y aparte, no tengáis miedo, ¿vale? No vais a romper nada. O sea, no vais a romper ni vuestro ordenador, ni mucho menos. Y aparte, sí, es que no podéis hacer nada a la base de datos tampoco. Es decir, no la podéis destruir ni nada. Por lo tanto, sin miedo. Si os sale error, pues lo investigo y ya está, ¿vale? Por eso digo que quiero que ejecutéis todas estas pequeñas consultas que hemos hecho hoy y la del tema 3 de la página 14 a la 17 que creo que son 4 o 5 no son más pero simplemente pues para eso para ir un poco a poco pues acostumbrando a sql de acuerdo y obviamente como ya os he dicho esto es el principio vale llegaremos bastante lejos incluyendo vistas etcétera y también pues diré un poco y perspectiva también como yo trabajo de esto un poco de todo en ese aspecto de acuerdo así que nada pues un placer como siempre vale os deseo a todos una muy buena semana no vemos la semana que viene cuidado mucho hasta luego gracias profe gracias

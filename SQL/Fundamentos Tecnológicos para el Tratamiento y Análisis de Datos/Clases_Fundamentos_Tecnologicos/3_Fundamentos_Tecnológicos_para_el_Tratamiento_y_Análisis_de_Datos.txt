Vamos a grabar y empezamos Bien, buenas tardes a todos Bienvenidos a la tercera sesión de Fundamentos Tecnológicos para el Tratamiento de Datos y bueno, en la sesión de hoy, que va a ser de una hora básicamente lo que vamos a hacer es corregir las actividades voluntarias que os propuse la semana pasada es decir, el Excel, este que está viendo pantalla y la actividad que es similar al del temario, que hicimos la la semana pasada y que igualmente la estructura es similar a la actividad 1 que vais a tener que entregar, ¿de acuerdo? De esta actividad al final de la clase pues también hablaremos, ¿de acuerdo? Lo más probable es que no haya tiempo a empezar el tema 2, pero no pasa nada, como siempre os digo, mi finalidad es que practiquemos la parte más práctica, que en este caso pues son las claves, ¿de acuerdo? De cara a preparar nuestro desembarco en SQL, que como os comenté, será en la semana número 5. Adicionalmente, al final de la clase os comentaré que voy a subir dos archivos más, voluntarios, de cara a la semana que viene, en la cual igualmente seguiremos practicando todo el tema de las claves. ¿De acuerdo? Antes de empezar, ¿alguien tiene alguna duda, alguna pregunta? Si me habéis escrito por los foros, os responderé entre hoy y mañana, seguramente ya mañana ¿De acuerdo? Y en términos generales, lo que sí os pido es que si me habéis puesto algo en el foro en cuanto a SQL, os contestaré Y lo mismo, tened en cuenta que empezaremos la semana 5, ahora estamos en la semana 3 y en la semana 5 pues empezaremos con toda la parte de práctica ya de SQL como tal, ¿de acuerdo? Lo que es meternos en el barro a escribir el código, que una vez más insisto que lleguemos desde lo más básico hasta lo más complejo. Bien, ¿no hay dudas de momento? ¿Nada? ¿Todo bien? Vale, perfecto. Pues vamos a corregir primero este ejercicio chiquitito de claves, ¿vale? Os recuerdo que los ejercicios los tenía aquí disponibles en ejercicios voluntarios, en documentación, ¿vale? Y en este ejercicio básicamente vamos a practicar lo que ya vimos la semana pasada, es decir, cuando tenemos X tablas, lo más normal es que sean 2, ¿vale? Esas tablas se tienen que relacionar de alguna manera, y la manera de establecer dichas relaciones es a través de las claves, ¿vale? Es decir, cada tabla tiene su clave primaria, pero para establecer la relación debemos mover una como clave ajena en la tabla de destino. ¿De qué depende cuál de las dos claves? Por ejemplo, en este caso elegimos, pues, en base al mapeo y a la descripción o la restricción que plantea la propia empresa. Bien, os recuerdo que estos ejemplos que estamos viendo, algunos no son la vida real como tal, ¿vale? Son ejemplos muy simplificados, pero no os preocupéis que a medida que vayamos practicando más, nos acercaremos a la vida real. Bien, por lo tanto, empezamos. El ejemplo 1, ¿vale? Como digo, aquí hay dos tablas presentes y tenemos una restricción, ¿vale? De esta restricción tenemos que sacar básicamente las cardinalidades, o mejor dicho, pues las relaciones, esa relación bidireccional que existe entre dos tablas, ¿de acuerdo? y aquí nos especifica que un producto, ¿vale? Forma parte de una categoría. Fijaros, la semana pasada vimos, ¿no? Que hay tres tipos de cardinalidades entre las tablas, ¿no? Tenemos el 1-1, que es poco común pero existe, el que abarca prácticamente toda la base de datos, que es el 1-N, ¿vale? 1 a muchos. Y finalmente está el muchos a muchos, que no se permite en la base de datos y para solucionar ese mucho a muchos, lo que hacemos es depender de una tercera tabla, de una tabla intermedia. Bien, por lo tanto, aquí en este caso, entre productos y categoría, nos da parte de la restricción. ¿Por qué? Porque la otra, por lo conseguido, la podremos sacar. Es decir, un producto forma parte de una categoría. Es decir, producto, una categoría. ¿Cierto? Aquí tenemos la primera relación que será 1 a 1, que es lo que nos está diciendo. Entonces, en términos normales, a una categoría, ¿cuántos productos va a pertenecer? ¿Puede pertenecer uno o puede pertenecer varios productos? si por una parte eso es, si por una parte tenemos 1, 1 lo más normal es que la otra parte sea 1 a n, es decir aquí pues tenemos la clásica cardinalidad de 1 a muchos, y si recordáis, la semana pasada dijimos que hay una regla para esto y es que nosotros siempre asignamos la clave primaria del 1 como clave ajena en n. ¿De acuerdo? Y basándonos en esa lógica, aquí ¿cuál sería la clave ajena? ¿El id de categoría se pondría en productos o el id de productos en categoría? La primera opción. El id de categoría en productos. Eso es. Muy bien. ¿Por qué? Supongamos, ¿no? Es decir, no hace falta suponer porque está aquí resuelto es decir, nosotros tenemos que un producto siempre va a pertenecer a una categoría por ejemplo, este de aquí a la categoría 25 pero por otra parte a una categoría que en este caso es la 25 pueden pertenecer varios productos ¿cierto? que en este caso estos dos esto es bastante fácil viendo aquí sobre todo el primer ejemplo que solo tenía dos registros ya con eso daba un poco la pista Ahora bien, vamos con el siguiente, ¿vale? Tenemos aquí dos tablas, coche y mecánico Realmente, aquí daría igual si estamos hablando, en este caso específico, si estamos hablando de tipología o inventario, ¿vale? Por lo tanto, aquí, entre estas dos tablas, nos dicen que un mecánico puede tener asignado más de un coche Es decir, nos dice una parte de la restricción Un mecánico va a tener, ¿cuántos? Varios coches, es decir, 1N, ¿cierto? Mecánico va a revisar, en este caso, o tiene simplemente asignado varios coches. Ahora bien, un coche, ¿cuántos mecánicos va a tener asignado? Uno. uno efectivamente porque si fueran muchos tendríamos una nm y no estaría bien entonces efectivamente es uno decir un coche va a tener un mecánico pero un mecánico tiene varios coches entonces aquí sabiendo esto cuál es la clave ajena y de mecánico en coche hoy le de de coche es mecánico. Mecánico en coche. ID mecánico. ¿Qué mecánico en coche? Mecánico. Muy bien. Todo el mundo lo ve, ¿verdad? Es decir, nosotros tenemos aquí claro de que un mecánico va a tener varios coches asignados, entonces el ID de mecánico tiene que ir como clave ajena. Con nuestro ejemplo que siempre ponemos, ¿no? La clave primaria del 1 se asigna como clave ajena en N. Es decir, que aquí el 1 es el mecánico, por lo tanto, efectivamente, se asigna como clave ajena en coche. Por ejemplo, estos dos coches, ¿cómo se llama el mecánico que tiene asignado el BMW y el Toyota? ¿Cuál es su nombre? Juan. 28, pero su nombre, efectivamente, ¿cuál es? Juan. Juan. Perfecto. Bien. Claro, hasta el momento, sí, bien. Uy, a esto se me ha colado. Vamos con el 3. ¿Vale? Aquí tenemos una tabla de libro y una tabla de autor. Y nos dice que un libro es escrito por un solo autor. Entonces, esa relación de libro-autor, ¿cómo es? ¿1 a 1 o 1 a n? un libro un autor o varios autores uno, ¿verdad? uno a uno entonces, si en la primera parte tenemos el uno a uno, el autor ¿cuántos libros puede tener asignado? ¿uno o varios? n n, ¿verdad? varios, es decir, puede que algunos escriban uno, pero pueden escribir en esencia varios bien, es decir, una vez más tenemos la cardinalidad de 1N bien, entonces ¿cuál es aquí la clave ajena? ¿idea autor en libro o idea libro en autor? idea libro en la segunda decirme simplemente la clave ¿qué crees que es la clave ajena? idea autor idea autor en libro muy bien es decir es el idea autor el libro por ejemplo en este caso qué persona escribe econometría 1 y 2 cómo se llama rocío rodríguez 457 efectivamente rocío rodríguez que otra persona según vemos aquí en los datos ha escrito dos libros cómo se llama la otra persona Luis Valencia Eso es, si nos fijamos aquí base de datos y estadística, 4, 5, 8 ¿Qué es qué? Luis Valencia Profesor, yo tengo una duda Es decir, no siempre o sea, siempre se cumple lo de lo de que el 1 y el n es decir, que la clave principal va a ser ajena en la n en este caso, ¿cómo sería el planteamiento de esa clave ajena? o más bien en el anterior. Sí, vamos a ver los dos, no os preocupéis. Por ejemplo, aquí tenemos coche mecánico, ¿no? Sí, señor. Un coche, un mecánico. Un mecánico puede tener varios coches. Es decir, aquí hay una relación 1-L. ¿El 1 quién es? De estas dos tablas, ¿quién es el 1? ¿El mecánico o el coche? El coche. El mecánico. El 1 es el mecánico. Porque un mecánico puede tener varios coches. Entonces, la clave del 1, que es el id mecánico, la asignamos como clave ajena en n, siendo n coche, ¿vale? Y aquí, en este caso, en el 3, ocurre lo mismo, tenemos libro y autor, ¿verdad? Un autor, varios libros, ¿verdad? Entonces, la clave primaria del 1, que es el autor, la asignamos como clave ajena en n, que es libro. ¿Sí? Sí, señor. ¿Queda más claro? Sí, sí, señor. Perfecto. Pero de todas maneras, como te comentaba, esa regla siempre es así. Clave primaria del 1 se asigna como clave ajena en n. Y la dificultad ahí está en entender cuál es 1 y cuál es el n. Bien, fijaros, aquí ya no tenemos dos tablas, tenemos tres, y a su vez tenemos dos restricciones. Una es la misma que hemos hecho hasta el momento, es decir, y de autor como clave ajena. pero ¿qué ocurre? aquí tenemos otra tabla que participa directamente en esta relación que es el editor del libro y nos dice que un libro es escrito por un autor un autor escribe varios libros y por otra parte vemos que un editor edita varios libros entonces ahí tenemos un N y al revés sería que un libro es editado por cuantos editores si un editor edita varios libros un libro es editado por un editor bien, y siguiendo esa premisa que ha dicho, acabamos de explicar ¿qué hacemos ahora? especificamos id libro aquí como clave ajena especificamos id editor como clave ajena al autor o especificamos id editor como clave ajena al libro y de editor muy bien que si os fijáis la relación entre autor y editor con libro es prácticamente la misma ¿verdad? solo que la función que hacen respecto a ese libro es diferente ¿sí? ¿de hecho? ¿puedo tener dos claves ajenas en una en una misma tabla? Por supuesto, por supuesto. Es decir, en una tabla siempre va a haber una única clave primaria, ¿vale? Aunque ya veremos más adelante que eso es entre comillas, porque una clave primaria puede ser una combinación de dos claves. Pero claves ajenas no hay límite, ¿vale? Es decir, puede haber las que se necesiten para conectar los datos, ¿vale? Y de hecho, fijaros, libro hace función de tabla intermedia, porque ¿qué ocurre? Si nosotros quisiésemos relacionar autor y editor directamente, estas dos tablas, ¿podríamos? No. ¿Vale? Y libro es lo que nos permite indirectamente establecer la relación entre estas dos tablas. Es decir, funciona como una tabla intermedia para la relación entre autor y editor. ¿Lo veis? ¿Sí? ¿Sí? claro bien quedaría así por ejemplo base de datos ¿quién es el autor? Luis es decir, autor 458 Luis ¿quién es el editor? de base de datos 7, 8, 4 Sara Sánchez efectivamente ¿lo veis? claro ¿no? profesor y si solo quisiéramos relacionar o sea en este caso la tabla autor y editor ¿sería una N a N o 1 a 1? efectivamente que es lo que yo acabo de comentar es decir, si quisiésemos relacionar autor y editor, un autor ¿con cuántos editores puede estar relacionado? directamente con varios, ¿por qué? Porque técnicamente las relacionas a través de libros. Y lo mismo, un editor podría estar relacionado con varios autores porque edita varios de sus libros. ¿Vale? Así que efectivamente, como dice el compañero, es decir, libros funciona como una especie de tabla intermedia para el caso si quisiésemos relacionar autor y editor. ¿Ok? ¿Sí? Bien, seguimos, nos quedan dos ejemplos muy interesantes. Fijaros, aquí tenemos dos tablas, libro y persona, ¿vale? ¿Y qué ocurre? Un libro es escrito por una persona y es editado por una persona. Que, ojo, puede ser la misma persona o diferente, ¿vale? Pero la cuestión es que aquí, ¿qué ocurre? Tenemos dos tablas, pero ¿cuántas relaciones tenemos aquí? Tenemos libro y persona, pero tenemos dos relaciones en esencia. Libro y persona en cuanto la persona escribe el libro y libro y persona en cuanto la persona edita el libro. Por lo tanto, tenemos un total de dos relaciones, pero solo tenemos dos tablas. entonces qué pensáis reflexionar cómo podríamos establecer esa relación de qué manera y tendríamos que crear una tabla intermedia no tabla intermedia no porque no es una relación en él solo hay estas dos tablas no podemos tener ninguna tabla más y hay que hacer cumplir esa restricción que no se especifica ahí ¿Las personas del editor y el escritor? No, es decir, para un libro habrá un editor y habrá un escritor. ¿Puede ser la misma persona? Puede, pero lo más probable es que no lo sea. ¿Podríamos tener en cuenta la editorial? Esperad, porque se ha apuntado. María, dime. Tendría en cuenta la editorial, pero la editorial está... No, no, no, no. Solo hay esto, ¿vale? Solo hay esto. Es decir, no podéis incluir ninguna otra tabla. Poner dos veces id de persona. Muy bien, muy bien. Francisco, que has levantado la mano, dime, dime. El alejante pero preciso se me adelantaron con la respuesta. Efectivamente sería que el id de persona sea la clave ajena, pero sería dos veces. Como autor, dí conmigo. muy bien, muy bien los dos. Es decir, o también como dice María, es decir, nosotros tenemos solo dos tablas, pero ¿qué ocurre? Podemos relacionar de dos maneras diferentes en función de la relación que estamos especificando. Es decir, incluimos una vez y de persona, pero en referencia al autor. ¿Vale? Y después volvemos a incluir esta misma clave, pero como editor. Eso no quiere decir que tengan los mismos valores. No. De hecho, lo más probable es que sean diferentes. Por ejemplo, Econometría 1. ¿Quién lo ha escrito? El escritor. El maestro. Antonio. Antonio. Eso es. Es decir, Econometría 1, el autor es 635. que es Antonio ¿y quién es el editor? Javier Javier Maestre Paulina, dime Sí, buenas tardes es una consulta como se pone dos veces la misma clave cuyo nombre es ID persona y al momento de implementarlo no sé, a SQL o al MySQL ¿hay algún problema? porque creo no lo ha usado mucho pero creo que se le pone el mismo nombre de que está originalmente en la tabla que sería la y persona hay algún problema y de aumentar la parte de autor y editor o como se los dice no vale te refieres que si nosotros estamos en un torno sql no y que no se repita y de persona como dos veces no sin saber si es autor o editor si eso básicamente en todo entorno sql que ya diga más adelante en toda base de datos en una misma tabla no puede haber dos atributos con el mismo nombre entonces qué ocurre normalmente asignan la clave de y de persona por ejemplo para autor y después le ponen un alias a esta columna es decir por detrás y de persona y se le especifica un alias de y de persona autor por ejemplo es muy común se hace es más común de lo que creéis. Y lo mismo para el paredito. Sí, Diana, gracias. Nada, sin problema. Es que tengo una pregunta. Pues yo entro un poquito después. No sé si ya lo había dicho. No te preocupes. No he entendido, o sea, la tabla no me decía que ese autor era de ese libro. Entonces, ¿por qué se asignan esos...? Vale, tú te refieres de por qué aquí es 635 y aquí es 633. Eso es que en la tabla no decía que correspondía de ese listo es simplemente porque yo los ha asignado vale decir esto en la vida real está asignado asignado más a la empresa pero aquí en este excel es porque los ha asignado yo para poder tener como el ejemplo claro efectivamente porque venga definido yo estoy que define realmente esto no estaba pensando pero no no pero no te preocupes esos correspondían a ti es una pregunta normal o sea yo también me lo plantearía si a mí me dice esto es así y lo mandó mal preguntarse por qué es decir, sí, sí, pero es básicamente porque soy yo el que asigna estos valores pero de cara a poner los ejemplos ¿vale? Gracias. Sin problema ¿ok? Entonces, como decía tenemos la misma clave, se asigna dos veces, pero precisamente para eso para mapear ¿por qué? Ahora me diréis, oye ¿por qué no se hace como se ha hecho aquí? ¿no? Es decir, dos tablas diferentes habrá veces que en alguna base de datos sea así, pero en otras sea así. ¿Vale? ¿Qué ocurre? Esta manera de hacerlo, fijaros, es más eficiente en términos de almacenamiento. En vez de tener dos tablas, solo tengo una y defino sus relaciones. Es decir, en términos de espacio dentro de la base de datos y de almacenamiento y de procesamiento, es más eficiente. ¿Vale? ¿Pero qué ocurre? Pues eso depende de cómo se diseña la base de datos. Son ingeniería quien decide esto. No nosotros, ni mucho menos. dime David, sí, dime es decir que en ese orden de ideas la persona que escribe un libro no puede ser la misma que lo edite para que no se repita la información o si se podría no, depende, a lo mejor imaginaros yo simplemente aquí porque no lo he hecho de esta manera pero imagina que pues a mí una persona escribe y edita ¿vale? ¿eso de qué dependerá? pues precisamente de las restricciones dentro de la empresa por así decirlo es decir, por la empresa diga oye no, en esta tabla la manera que trabajamos es que nunca un autor y el editor es la misma persona para un libro es decir una audita y otro es el que escribe y no pueden solaparse pero eso depende eso depende pues de la propia base de datos que en esencia depende pues de la lógica de la empresa vale un libro 6 todo claro todo el monolo ver si os fijáis esto y esto es lo mismo la única diferencia el tema de las tablas porque el resultado pues es el mismo bien pues vamos con el último ejemplo vale aquí solo tenemos una tabla y nos dice que un empleado es dirigido por un empleado Es decir, clásico, ¿no? De que un empleado siempre tiene un jefe. ¿Sí? Entonces, ¿qué ocurre? Nosotros aquí tenemos que establecer esta relación, pero solo tenemos una única tabla. ¿Qué pensáis? ¿Cómo podríamos gestionarlo? Es decir, yo necesito en el fondo crear la jerarquía El ID empleado se vuelve también clave ajena ¿Puedes repetir eso, Cristian? El ID empleado se vuelve también clave ajena en la misma tabla Pero variada, para que pueda tener lógica Efectivamente, efectivamente Es decir, tenemos la clave primaria que asignamos dentro de la misma tabla como clave ajena. Esto es lo que se suele denominar como relación reflexiva, es decir, que una tabla se conecta consigo misma. Esto también es muy típico, sobre todo en estos casos, en la base de datos, cuando hablamos de recursos humanos y de los empleados, ¿vale? Está presente en todas, ¿de acuerdo? Es decir, nosotros sabemos que un empleado siempre va a tener un jefe, un manager, y un manager va a tener asociado a varios empleados, ¿verdad? Entonces, ¿qué se hace? Y de empleado se vuelve a asignar aquí como manager Por ejemplo, ¿quién es el jefe de Javier? ¿Quién es el manager de Javier? Juan Antonio Mil uno, que es Juan Antonio ¿Verdad? ¿Y quién es el jefe de Juan Antonio? No se muestra Hasta ahí no tiene No tiene Pero yo podría regresar a la otra ¿En qué, perdón? ¿Pero qué dice? ¿Podría, digamos, decir que el jefe Juan Antonio se vea Efectivamente, es como que Exacto, exacto, es decir Realmente todos sabemos que Dentro de una empresa, al fin y al cabo es jerarquía ¿No? Es decir, al fin y al cabo Es una pirámide hasta que llegas al CEO, presidente O similar, entonces, podríamos decir que Juan Antonio es el CEO, en este caso ¿No? Y a partir de ahí, pues va Hacia abajo, entonces, claro, esto pues Hace falta mapearlo dentro de la base de datos y se hace pues con la misma clave pero asignándola como clave ajena y fijaros aquí juan antonio tiene un dato o no lo tiene porque especifica nul y ojo nul no significa que el valor sea un espacio o un cero vale nul quiere decir que no existe valor vale no es lo mismo que haya datos, que no haya datos. Null es que no hay datos. Si hay un cero o un espacio, hay datos. ¿Vale? Esto es importante. Ahora mismo no, pero cuando estemos con SQL sí, es decir, nosotros vamos a tener que saber cómo tratar con los nulos, porque son especiales en ciertos casos. ¿Vale? ¿Sí? ¿Claro? Sí, pero bien. Perfecto. Vale, pues vamos con la actividad voluntaria, ¿vale? Que os vuelvo a comentar, esta actividad voluntaria que está subida en la sección de archivos y básicamente consiste en lo mismo, claves, ¿vale? Pero a su vez, la estructura de esta actividad es igual que de la actividad 1 que vais a tener que entregar, de la cual pues hablaremos ahora en cuanto terminemos esta, ¿vale? En esencia, ¿qué hay que hacer? Al igual que hicimos la semana pasada, abrimos un Excel de cero, ¿vale? Y yo aquí os doy una serie de tablas, ¿vale? Os digo, ventas, clientes, tiendas, productos y centros de distribución. Y os doy sus atributos. Pero ojo, no os doy los datos. Los datos los tenéis que inventar, proporcionar vosotros, ¿vale? Con cuatro registros por tabla es suficiente. Por ejemplo, como he hecho yo. ¿Vale? Tabla de ventas, cliente, tienda, productos y centro de fabricación. Le damos unos valores y ahora identificamos las claves primarias. Ahora, en ventas, ¿cuál es la clave primaria? Y ojo, aquí hay trampa. ¿Cuál es la clave primaria aquí, en la tabla de ventas? La factura. ¿Con transacción? ¿Es que qué es? ¿Factura o transacción? En la vida real, ¿vale? En la vida real esto no es una tabla, son dos, ¿vale? Lo que se llama header y detail En la vida real podemos pagar varias facturas en una transacción No, al revés Sí, claro, entonces un giro y giras y pagas varias facturas. No, no, no, no, no estamos hablando de eso. Estamos a ver, a ver, imaginad que nosotros hacemos un pedido en Amazon, no sé, Amazon, cualquier tienda online, ¿vale? Que es el ejemplo que suelo poner. Y vamos a comprar un bolígrafo y un cuaderno, ¿vale? Bien, nosotros vamos a Amazon, compramos un bolígrafo y un cuaderno ¿cuántas facturas tenemos ahí? o pedidos, facturas o pedidos vamos a hablar como si fuera la vida real, técnicamente no es lo mismo pero vamos a hablar como si fuera lo mismo ¿cuántas facturas o pedidos tendríamos? tres ¿facturas? o sea, hemos realizado un pedido ¿no? en el pedido de Amazon hemos pedido un boli y un cuaderno todo va en el mismo pedido entonces ¿cuántas facturas tenemos? dos una una factura una factura, un pedido una factura, dos pedidos no, no, pedido como tal es uno porque ambas cosas te llegan juntas es decir, factura y pedido, como ya os he dicho consideramos los sinónimos ¿vale? es uno el que hemos realizado. Pero ahora bien, ¿cuántos productos tiene? Dos productos. Dos diferentes, tres unidades. No, tres no, dos, hemos dicho. Un bolígrafo y un cuaderno. Dos productos. Perdón, perdón. Es decir, me refiero a dos que... Un producto... Dos unidades distintas. Sí, sí, eso es a lo que me refería. Es decir, un bolígrafo y un cuaderno. Es decir, dos productos diferentes, ¿verdad? En esencia tenemos una factura, ¿no? Un pedido con dos productos. Pero esos productos dentro de la factura funcionan como qué? Como transacciones. ¿Cierto? Entonces en la vida real, como os diría, tenemos facturas, pedidos o en inglés que está presente en toda base de datos es lo que se llama header ¿Vale? Que es en esa tabla la clave primaria factura y ahí cada registro es un pedido, una factura y que está conectado a transacciones es decir, en qué se compone ese pedido de esa factura que ahí puede haber 3, 4, 5 líneas ¿vale? que son, pues en este caso productos ¿vale? ¿qué ocurre? yo aquí esto, para simplificar, que por ejemplo en este caso creo que lo he hecho al revés, o he complicado la vida, lo he juntado que esto no es la vida real, ¿vale? pero para simplemente decir, solo tenemos una tabla de ventas para no preocuparnos, entonces claro, aquí es donde metí esta trampa para confundir, es decir, si nosotros tenemos, imaginad, transacciones y facturas, la clave primaria va a ser transacción, ¿por qué? Porque transacción es, como hemos dicho antes, en cada periodo puede haber varios productos, entonces aquí técnicamente sería clave primaria transacción. De hecho, en la actividad voluntaria de la semana siguiente, sí que ya os las divido, ¿vale? Que ahora, que después lo veréis Que en vuestro caso es mucho más fácil Como estáis acostumbrados ya pues a trabajar Ya sois de bastante experiencia Claro, esto suena raro Es normal, ¿vale? En la siguiente actividad ya veréis que está dividido Como tiene que ser en la vida real Bien Después, cliente, ¿cuál es la clave primaria? Sencillo, ¿no? El código El código No hay muchas posibilidades Es decir, un cliente se puede llamar igual, el código postal, o sea, el distrito puede ser el mismo y obviamente hay muchas personas y muchas empresas. Bien, en tienda, la ciudad, tipo... Oigo tienda. Oigo tienda. Como veis, las claves primarias son relativamente fáciles de identificar. En productos, que ojo, aquí volvemos a que es tipología de productos, ¿vale? Olvidemos inventario. Tipología de productos. ¿Cuál es la clave? efectivamente y ya porque esto es un poco para el nombre de fábrica eso es igual bien ahora ya tenemos las claves vamos con las restricciones vale la voy a pegar aquí para que sea más fácil y nos dice vale los clientes compran en una única tienda ojo esto una vez más no es la vida real vale un cliente puede comprar cualquier tienda pero esto con motivos académicos en este caso específica de que un cliente sólo puede comprar una única tienda o está asociado a una única tienda vale entonces aquí tenemos dos tablas verdad cliente y tienda y nos dice los clientes es decir un cliente en particular compra sólo en una tienda que tenemos ahí qué cardinalidad De 1 a 1. 1 a 1. Bien. Entonces, por otro lado, ¿una tienda solo va a tener un único cliente o va a tener varios? Varios. Varios, obviamente. Varios, varios. Entonces, tenemos aquí un qué, 1 a n. ¿Sí? Bien. Si hemos dicho que la clave primaria del 1 se asigna como clave ajena en N, ¿cuál es la clave ajena? ¿Código de cliente? Código de tienda. Código de tienda sobre cliente. Código de tienda. Muy bien, muy bien. Efectivamente, como decís todos, es código de tienda. ¿Por qué? Por ejemplo, imaginad, estos dos clientes, Francisco e InfoSL, pues pertenecen a una única tienda. Así cuadraría, es decir, un cliente una tienda, pero una tienda tiene varios clientes. Muy bien. Bien, aquí en esta restricción simplemente os confundía un poco. Cada tienda almacena todos los productos, es decir, hago referencia al inventario, porque ya hemos dicho que aquí no hay tabla de inventario y vamos a trabajar con inventario. Así que la única manera que podemos interpretar que es que cualquier tienda puede vender cualquier producto, sin más, ¿vale? Bien, no hay que hacer nada, ¿vale? Porque no hay tabla de inventar. Ahora, siguiente, los productos son comprados por clientes. Ojo, tipo de producto puede ser comprado, es decir, un tipo de producto por varios clientes, ¿ok? Pero también nos dice, un cliente puede comprar uno o más productos. Es decir, un cliente puede comprar diferentes tipos de productos. Entonces, aquí, ¿qué cardinalidad tenemos entre clientes y productos? Muchos a muchos. Muchos a muchos. A muchos. Entonces hay que hacer una tabla pivote en la mitad. Eso es, es decir, nos hace falta una tabla intermedia que nos permita relacionar cliente y productos para que lo podamos. Exacto. Entonces, ahora, en este caso, no podemos crear ninguna tabla, pero ¿hay alguna tabla que nos pueda servir, como comentó el compañero de Puente? La del código de transacción. Muy bien, es decir, fijaros esto es la vida real, es decir en la tabla de ventas ya sea transacciones o de header un cliente puede comprar varios tipos de productos y un tipo de producto puede ser comprado por varios clientes entonces claro, normalmente la tabla de ventas de hecho en la base de datos, sobre todo la de transacciones suele ser la tabla que más registros tiene pues la que al fin y al cabo relaciona muchas otras tablas e evita en muchos a muchos. Entonces, teniendo eso en cuenta, de que cliente y productos no lo podemos relacionar directamente, vamos a relacionar a través de ventas. Entonces, ¿qué es lo que tengo que hacer? ¿Qué tengo que hacer ahora para establecer esa relación? Llevar las claves ajenas de clientes y productos a la tabla de ventas. Muy bien, efectivamente. Lo que hacemos es esto. código cliente, código producto pero en venta y ahora, para que se vea de una manera como más con datos ¿no? imaginaos, cliente 25 compra el producto 653 ¿vale? pero también el cliente 25 compra el 856 pero a la vez el 856 lo compró el cliente 46 ¿vale? ¿lo veis? es decir un mismo cliente puede comprar dos tipos de productos y dos tipos de productos o el mismo tipo de producto puede ser comprado por varios clientes y aquí es donde se establece la relación entre clientes y productos pero en la tabla de ventas ¿ok? Aitor, lo que comentaba este de aquí, ¿vale? simplemente para hacer entenderos de que cualquier tienda puede vender cualquier producto, ¿vale? un poquito para esto y que después la 3 y la 4 es la relación estará sí todo el mundo me sigue claro bien y ahora tenemos la última parte que es una tienda está asociada a un único centro de fabricación que esto ya es fácil relación entre tienda y centro de fabricación y me dice una tienda va a tener un único centro de fabricación perdón es que han preguntado hay torres y la tabla de venta el código producto debe seguir corresponde por el nombre sí sí efectivamente debería corresponder vale en mi resultado el resuelto coincide pero que el nombre de producto yo lo puse aquí también en su día para confundir vale porque como veíais el nombre de producto ya no ponía la clave de código producto. ¿Vale? Perdón, perfecto. Entonces, lo que decíamos, una tienda, un centro de fabricación. Un centro de fabricación, entonces, ¿cuántos productos, cuántas tiendas va a tener asociadas? Si una tienda tiene un único centro de fabricación, un centro de fabricación va a tener uno, una o varias tiendas. Varias. varias una no claro si la primera es una relación uno a uno lo más normal es que la segunda sea uno a n exacto entonces ahora nos queda simplemente asignar códigos de tienda enciende con fabricación o en lombra de fábrica en tienda ¿cuál de las dos es la correcta? ¿Qué número de fábrica? ¿De acuerdo? Es decir, que quedaría resuelto de esta forma. Aquí sé que si veis, esto sí lo tengo yo más hilado, y se cumple todo, y se cumple, por ejemplo, el nombre de producto que decía Héctor. Pero esto lo puse como otra trampa, estaba yo con ganas de confundir cuando creé ese ejercicio en su vida. bien dudas, preguntas como veis respecto a la primera semana pues vamos avanzando poquito a poco, ya con las claves vemos que hay muchas maneras de relacionar bien como veo que no hay dudas si vamos a hablar de la actividad uno que si tenéis que entregar y yo voy a corregir que está aquí en actividades vale, pero si, dime ¿Perdón? ¿Alguien ha dicho algo? No, vale, bien, como decía, la actividad 1 que vais a tener que entregar, que si no recuerdo mal la hacéis en grupo, es esta de aquí, ¿vale? Que es el 24, que fijaros, tenéis prácticamente 3 semanas para hacer un ejercicio similar que el que acabamos de hacer, ¿vale? Y si descargáis el Word, veréis que es este de aquí, ¿vale? Como veis la estructura es exactamente igual al ejercicio de la semana pasada y el que acabamos de hacer, ¿vale? Solo que aquí el supuesto es una empresa de distribución y venta de motocicletas, ¿vale? Hay un total de 5 tablas, servicio de venta por venta, tipo de motocicleta, esta es una única tabla, ¿vale? Tipo de motocicletas que es tipología y no inventario, empleados, mecánicos y vendedores. Pero ojo, los empleados se dividen en mecánicos y vendedores. ¿Vale? Los atributos son estos de aquí. ¿Vale? Estos son los atributos de estas tablas. Ahora bien, vosotros, como ya hemos dicho, tenéis que crear cuatro registros para cada una de estas tablas. ¿Vale? Es decir, el ejercicio se hace en Excel, igual que hemos estado haciendo esto. Abrís un Excel nuevo, ponéis las tablas y le dais cuatro valores a cada tabla. A mecánicos y vendedores le podéis dar simplemente dos registros porque al fin y al cabo se juntan en empleados. Entonces, le dais los valores, identificáis cuál creéis que es la clave primaria y después asignáis las claves ajenas en función de lo que se especifica aquí. que dice que un empleado puede ser mecánico o vendedor, nunca ambos, una factura, solo pueden contener una única moto, un modelo de moto puede estar presente en varias facturas, el mismo tipo de modelo puede ser vendido a varios clientes, no hay una tabla de clientes, pero es opcional, si queréis la podéis hacer. Aunque esto realmente es para dar un poco de contexto. Después, los diferentes modelos de motos pueden ser vendidos por diferentes vendedores Y finalmente a un mecánico se le asigna una o más motos para su revisión o mantenimiento, pero una moto puede tener asignado un único mecánico en una misma venta. vale, esta es la actividad para entregar, vale, que vais a tener que entregar, que vais a tener que hacerla en grupo, vale, y se entrega el día 24, ¿cuál es la forma de entrega? Como lo vais a hacer en Excel, yo os sugiero una de dos, o exportar el Excel a un PDF o directamente subir el Excel, vale, importante arriba vale aquí arriba tenéis que especificar el nombre de todos los integrantes de vuestro grupo vale y todos los integrantes del grupo deben subir el mismo archivo a la plataforma que quede eso claro vale hacéis el excel entre todos rellenando asignando las claves ponéis los nombres de todos los integrantes, los portáis a PDF, los compartís entre todos, cada uno tiene su archivo que tiene que ser el mismo y los subís a la plataforma. ¿De acuerdo? ¿Dudas respecto a la actividad 1? Solo por tener claro, se subiría solamente el PDF, no ya nada en el Word. No hace falta nada en el Word, aunque ponga aquí que tiene que subirlo en Word, no, subirlo en PDF si queréis o incluso el mismo Excel tal cual y perfecto ¿ok? vale, profe genial, bien, perfecto y de cada la semana que viene para que podáis seguir practicando esto, como os decía hay otro ejercicio voluntario que va a ser datos 2 ¿vale? que os voy a subir a la plataforma, que hay que hacer exactamente lo mismo, pero ojo este que es el de gran empresa de servicios es el voluntario, no el que hay que entregar. Y aquí, como veréis, como antes me he botado un copa llego, así que ya os divido transacciones y facturas. Tenemos clientes, servicios, que es tipología, categoría de servicio y técnico. Por lo tanto, la semana que viene corregiremos este ejercicio, porque eso lo podéis hacer mejor que mejor. Y adicionalmente os subiré también otro Excel con más ejercicio de claves, en este caso tres, en las que en vez de plantearos solo una restricción, os planteo un par de ellas con tres tablas, ¿vale? Y aquí tenéis que elegir qué claves se asignan y cuáles no. pero que igualmente os he comentado vale yo creo que ahora mismo no está en aquí en documentación vale pero de hecho lo voy a subir a la misma vale para que sea para que sea más fácil y así me podáis me podáis confirmar que están todos vale ¿Ok? Ejercicio crear base de datos 2 Ejercicio extra Crear base de datos, que es este ¿Vale? Y también os he subido la solución, ¿vale? Del que acabamos de hacer ahora mismo, que es este de aquí ¿Ok? Sí, profe, profe, una consulta Con respecto a la instalación del programa SQL Server Pues ahí yo vi que habían dos O sea, uno es para la versión de los que tienen Mac Y el otro es para la versión que tiene Windows Es lo que os decía Si tenéis Windows podéis optar por cualquiera de los dos Pero si tenéis Mac solo podéis instalar MySQL ¿Vale? Ok, solamente sería ese programa y ya instalarlo Exacto Pero Ana, si no os miráis nada Mira, en documentación, instalación SQL ¿Vale? Está las guías las bases de datos también están aquí ok y en la sección de foro en la de foros están los vídeos si es que yo ya lo instale pero pensé que no es uno de los dos no hace falta que no hace falta los dos si quien más está preguntando nada sin problema y usted tiene no sólo cargamos la primera ¿Te refieres a SQL Server? Sí. Esta es la importante, ¿vale? Esta la daremos al final, ¿vale? Que es el almacén de datos, pero si la queréis instalar, la podéis instalar también. ¿Vale? Ahora mismo, es verdad que después de Navidades, esta no nos va a hacer falta, ¿vale? Solo esta de aquí. Solo esa de allí. Ah, listo, profe. Sin problema. Profe, en los tutoriales universitarios hay unos códigos. Esos todavía no están cargados acá, ¿cierto? No, todavía no están vales no son las tablas pequeñitas vale porque no vamos a empezar con es decir para que hagáis una idea no vamos a empezar con esto esto es hombre germín agobiante vale entonces qué pasa yo sigue subiendo códigos aquí para crear pequeñas tablitas como estas parecidas para que vayamos aprendiendo el código vale pero con tablas pequeñas y que sean fácilmente entendibles vale pero eso ya os avisaré con tiempo una vez que la suba y demás vale porque si empezamos con adwin toolbox os vais a agobiar porque obviamente esto es una tabla una base de datos real aquí hay muchos campos muchos datos etcétera por lo tanto yo subiré scripts pequeñitos que vais a simplemente ejecutar y os van a aparecer las tablas vale y a partir de ahí iremos subiendo el nivel. ¿Ok? Listo, sí señor. Perfecto. ¿Más dudas? ¿Más preguntas? ¿No? Pues nada, perfecto, genial, pues nada, un placer, otra semana más, y nada, que tengáis una muy buena semana y nos vemos la próxima semana. Si podéis hacer los ejercicios, mejor que mejor, y si no, pues igualmente los corregimos la semana que viene. ¿Ok? Un saludo a todos, cuídense mucho, hasta luego. Gracias, hasta luego Gracias

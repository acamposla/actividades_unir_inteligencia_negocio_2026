Y comenzamos. Bien, buenas tardes a todos. Bienvenidos a la cuarta sesión de Fundamentos Tecnológicos para el Tratamiento de Datos. Y bueno, básicamente en la sesión de hoy vamos a dividir la clase en dos partes. La sesión es de una hora. En la primera parte vamos a corregir las actividades voluntarias que subí la semana pasada, que son las que están aquí en documentación. ¿vale? ejercicio voluntarios yo subí este de aquí, ejercicio extra de crear bases de datos que en esencia es asignar claves y otro ejercicio voluntario del estilo que hemos ido haciendo y que vosotros vais a tener uno similar el cual vais a tener que entregar, del cual pues obviamente volveremos también a hablar hoy ¿de acuerdo? y en la segunda parte de la clase vamos a ver el tema 2 ¿vale? pero vamos a ver las ideas claves, ¿de acuerdo? Como siempre os he dicho, yo prefiero utilizar más las clases para cosas más prácticas a que simplemente pues repetir lo que hay en las diapositivas o en el tema. Bien, antes de empezar, ¿alguien tiene alguna pregunta, alguna duda que quiera resolver? no va bien pues entonces dime alejandro no nadie vale yo pensaba que sí que alguien había visto el micro bien entonces vamos con primero con este ejercicio este pequeño bloque de ejercicios de tres en el que básicamente tenemos que seguir asignando las claves solo que en este caso en En vez de tener únicamente dos tablas, tenemos tres. Bien, en el primer supuesto vemos que tenemos tres tablas. Un servicio que se está dando, tipo de descuento y moneda. Y nos dicen que un servicio puede ser cobrado en cualquier moneda. El tipo de descuento es aplicable a todos los servicios y para cualquier moneda. Y que un servicio puede tener solo un tipo de descuento. ¿Qué ocurre? Aquí, si nos fijamos y analizamos, no estamos hablando de servicios como una tipología, sino más bien una unidad física de acuerdo entonces nos dicen que un servicio va puede estar cobrado en cualquier moneda de acuerdo pero tiene que ser una y asimismo un servicio va a tener un único tipo de descuento por lo tanto aquí servicios funciona como una tabla de servicio como físico vale decir esto es un servicio particular que puede aparecer más veces decir no es tipología como si fuese inventario y aquí cada uno de estos servicios vale puede estar relacionados con el descuento la moneda porque cada uno de ellos se le puede aplicar diferente tipo de descuento y se puede cobrar en diferente tipo de moneda en otras palabras esta tabla lo que no está haciendo es a romper el nn oa muchos a muchos entre el tipo de descuento y moneda de acuerdo sencillo bien Ejercicio 2. Tenemos persona, empleado y cliente. Aquí la casuística es que un empleado es una persona, un cliente es una persona, pero ¿qué ocurre? Una persona puede ser cliente y empleado a la vez. Esto es bastante típico, es decir, cuando nosotros trabajamos en nuestra empresa, pues nos pueden dar cierto tipo de descuento, pero a su vez nosotros nos convertiríamos en clientes. ¿De acuerdo? Aquí sabemos que una persona siempre va a ser un empleado y un empleado va a ser una persona, es decir, la relación es uno a uno. Lo mismo ocurre con el cliente, un cliente será una persona. Pero la diferencia aquí es que a su vez nos dicen que un cliente puede ser también un empleado. Entonces aquí al ser relación 1 a 1 tenemos varias opciones, podemos incluir código de empleado y código cliente aquí o podemos poner código de persona como clave ajena de empleado y clave ajena de cliente, pero para satisfacer también la parte de que un cliente puede ser también empleado, o mejor dicho un empleado puede ser también cliente, lo que tenemos que hacer es incluir el código de empleado también como clave ajena en cliente. Bien es cierto que no todos los clientes van a ser empleados, pero habrá casos que sí. Por ejemplo, aquí nosotros tenemos el cliente 100, que es la persona 32. ¿Cómo se llama? Se llama Raúl. Y nosotros con la clave ajena que tenemos aquí de código empleado, sabemos si el cliente 100 es empleado de la empresa. ¿Lo ves o no? Si tenemos aquí en cliente Que es una persona Pero a su vez sabemos que es el empleado 12 Es decir, que este cliente Es nuestro empleado Pero, por ejemplo En el caso de 101 y 102 ¿Son empleados? No Primero porque no hay ningún código aquí puesto Y lo segundo que está el valor nulo Que ya hemos introducido la semana pasada El valor nulo y lo que hace referencia no es que haya un dato, es que no existe, ¿vale? No es lo mismo que un cero o un espacio, es que directamente no existe, ¿de acuerdo? Igualmente esto es muy importante cuando estemos trabajando ya con SQL, que por cierto, os digo, empezaremos la semana que viene, es fundamental que tengamos en cuenta que nulo no es nada, es decir, no existe dato. No quiere decir que el dato sea nulo, sino que es que directamente no existe. y eso de hecho nos va a definir mucho a la hora de combinar tablas. Bien, y en el último ejercicio, en el 3, tenemos tienda, empleado y territorio de venta, que esto es un poco lo clásico que hemos ido viendo, ¿vale? Un empleado pertenece a una única tienda, es decir, está asociado a una tienda, y una tienda pertenece a un territorio. Entonces, quedando la lógica así, es decir, una tienda va a tener un territorio, pero un territorio puede absorber varias tiendas. Por ejemplo, ¿qué dos tiendas pertenecen a España? Viendo aquí los datos, al territorio de España. ¿El territorio de España cuál es? El 1, ¿no? Entonces, en este caso, ¿cuáles son? La de Sevilla y Barcelona. Ahora bien, a estas tiendas, por ejemplo, de las 7.80, perdón, de las 7.90, ¿tenemos datos de sus empleados? ¿No aparecen todos los empleados, solo aparecen cuatro? ¿Cuántos empleados que nosotros veamos que hay aquí en la tienda de Barcelona? porque lo podemos mirar eso es José Carlos y Pedro es decir, dos esto es realmente lo que suele ser la normal pero ojo, también existen estos casos bien sencillo, verdad es decir, tampoco tiene mayor dificultad es un caso específico bien, en cuanto a la segunda actividad opcional, que es la de que haga una base de datos os vuelvo a recordar que la estructura es la misma que hemos ido haciendo las últimas semanas, ¿vale? Y que a su vez, esta estructura es la que vosotros vais a encontrar, mejor dicho, en vuestra actividad que vais a entrenar, de la cual ahora también hablaremos. ¿Cuál es la finalidad de estos ejercicios? Dime, Alejandro. Sí, perdona, es por un par de... No sé si se me escucha. Sí, sí, se te escucha perfectamente. iba a preguntarte un par de preguntas sobre los ejercicios anteriores no sé si es posible antes de pasar si vuelves a poner la actividad 2 y 3 mira si pones la 3 todavía más fácil vale si pones la 3 cuando decimos un empleado pertenece a una tienda entonces una tienda también pertenece a un empleado estamos hablando de relación 1-1 no pensémoslo un poco también de la lógica. Normalmente, cuando las relaciones son bidireccionales, los 1-1 en general es muy pocas veces se suele dar. Es decir, lo más normal es que sea 1-1-1-N. Por ejemplo, en este caso, en el que tú me dices, un empleado va a tener una tienda asociada, pero ¿una tienda va a tener solo un empleado? ¿O lo más probable es que tenga varios empleados? es decir, podría darse el caso que una tienda solo tenga un empleado perfecto, pero sí, perdona, termina, disculpa puede darse el caso de que una tienda solo tenga un empleado nadie dice que no, pero como posibilidad o lo más normal es que una tienda tenga varios, es decir, muchas veces cuando hablamos cardinalidades hablamos de la posibilidad máxima, ¿vale? no de la mínima, es decir un empleado como mínimo va a estar en una tienda, asociados pero como máximo también en una, porque no puede pertenecer a varias tiendas en una tienda, como mínimo va a haber un empleado, pero como máximo va a haber N, ¿vale? entonces, con ese 1, 1 y 1, N, la cardinalidad en general es de 1 a N vale, simplemente es porque en algunos enunciados y quizás sea un problema de enunciado, en algunos enunciados son, pues, un empleado pertenece a una tienda punto y coma, una tienda puede tener varios empleados eso es por ejemplo como aquí lo explico que lo explico como en mayor detalle si, pero hay veces, lo más probable es que yo de cara a que aprendamos omita al principio esto, ¿vale? por ejemplo como en este caso, lo más normal es que yo hubiera dicho, un empleado pertenece a una tienda pero una tienda pertenece a varios empleados claro, a lo que me refiero es a que sí, o sea, lo que me refiero es que como esa segunda parte no está escrita, ahí nosotros tendremos que deducir, razonar lo más lógico porque, vale, entonces efectivamente lo más lógico es que una tienda tenga dos empleados, como dices tú podría ser, pero digamos, estaría mal podría ser que alguna tuviese uno, pero también habrá otras que tengan tres vale, es decir, esto lo hago sé que lo correcto, vale, como tú me dices entiendo, ¿vale? Sería como, por ejemplo, el que vamos a ver ahora, ¿no? Que en este ejercicio yo he dado como ambas relaciones, ¿vale? O sea, de un lado y de otro. ¿Qué ocurre? Yo al principio lo escondo bastante, pero con la finalidad, no es de confundir, pero sí de razonar, ¿vale? Y sí que es verdad que puede ser un poco confuso, pero que mi finalidad última es que lo razonemos y decir, vale, solo tengo una parte, voy a pensar desde el otro punto de vista cómo sería. Pero tienes totalmente razón, ¿no? Vale, y si vuelves al por favor, al 2, así verifico una, vale porque creo que me ha pasado lo mismo una persona puede ser cliente y empleado a la vez aquí esto es un poco más fácil porque aquí no tenemos 1 a n es decir, aquí solo tenemos 1 a 1 es decir, una persona va a ser un empleado no puede ser varios empleados a la vez va a tener un código de empleado únicamente y un empleado va a tener únicamente un código de persona. Es decir, aquí la relación sería uno a uno. Exacto. Pero entonces... Sí, sí, dime, dime. Te iba a decir que entonces en ese caso la cuestión es ¿por qué no puedo...? O sea, yo podría... Has decidido y no sé si también esto es algo a razonar. Eso es lo que te iba a decir. Eso es lo que te iba a decir. O ¿por qué no puedo coger código de persona, código de empleado? O sea, código de persona más código de cliente y ponerlo en... ponerlo aquí. Sí, por ejemplo. Por ejemplo, es decir... Daría igual. O sea, eso estaría bien razonado igualmente. Pensemos. Si tenemos uno a uno aquí siempre, hemos dicho, ¿no? Que cuando tenemos uno a uno, realmente da igual donde pongamos las claves. Es decir, yo, por ejemplo, que está muy bien razonado, he optado por esta parte. Pero imagínate que tú, en vez de hacer esto, me dices, vale, yo voy a poner código de empleado y código de cliente. Y no pongo ninguna de estas dos. Al ser uno uno porque siempre va a haber una correspondencia estaría bien también efectivamente muy bien la elección realmente de hacer uno otro en este caso totalmente aleatorio realmente podrías optar por cualquiera de las dos como se decide que te podría decir que solamente se decida no a suerte pero casi vale o incluso teniendo en cuenta lo mejor que otras relaciones puede ver con otras tablas y ver cuál es mejor no pero si lo encerramos de esta manera tan básica realmente en este caso cualquiera de las opciones serían válidas vale claro es que aquí también muchas veces el contexto del negocio te da claro con la pista sabes yo puedo tener un negocio de cafés donde cada tienda es de una persona porque es un one person claro de cafetería como los puestecitos que realmente suele haber una persona. Un kiosco, imagínate un kiosco. Exacto. Y efectivamente como tú dices, que de hecho esto está relacionado con lo que vamos a ver ahora del tema 2. Estas relaciones o estas restricciones, ¿quién las define? Se definen en el momento del diseño de la base de datos, pero tal cual haciendo las preguntas al negocio. Oye, ¿cómo funciona tu negocio? Es decir, si yo tengo puestecitos o tiendas que son siempre de una persona responsable, lo más probable es que la relación entre tiendas y personas sea uno a uno. Entonces, en ese caso, daría igual dónde colocar la clave ajena. Y sería perfectamente válido. Pero, como digo, ahora que lo vamos a ver en el tema 2, depende el diseño, en el proceso del diseño, en las primeras fases, precisamente se hace eso. Es decir, se habla con los usuarios del negocio, o sea, me refiero a con los usuarios de la empresa, que son los que se encargan de la parte operativa, y de ahí ingeniería y el tema de los técnicos, ahí es cuando se decide, esa primera instancia que después se testea si funciona ya se desarrolla bien pero obviamente todas estas restricciones varían en función de las empresas, y como te has dicho por ejemplo, en ese ejemplo en particular pues no sería como aplicable a lo mejor después a que se yo, a un Starbucks, ni mucho menos obviamente porque funcionaría de otra manera tendría otro tipo de tablas ¿Vale? ¿Te puedo hacer una consulta de este mismo ejercicio? Sí, claro ¿Cuál es la diferencia del ejercicio que habíamos hecho la vez pasada Que creo que era que un empleado podía ser también manager? ¿No te acordás que habíamos puesto, por ejemplo O sea, yo lo había pensado de esta forma Este ejercicio O sea, el código Yo había pensado código persona Y ponerlo también como Exacto, ese Yo había pensado en la tabla De persona, poner código persona Empleado y código persona cliente También Como habíamos hecho la semana anterior Vale, sería como dices tú Algo así, ¿no? Como código persona Empleado ¿No? Y otro igual que sería De persona De cliente, claro Perdón, de cliente Eso es, vale. Interesante pregunta, la verdad. Aquí, por ejemplo, imagínate como dice la compañera, ¿no? Yo lo que hago es que simplemente este código lo asigno aquí empleado y cliente. Dices tú, bueno, al principio podría tener sentido. pero qué ocurre, imagínate que tú después tienes aquí una tabla de ventas ¿vale? la que tienes de pedido ¿vale? no vaya a entrar en transacciones y aquí tendría que poner entonces que sea persona, cliente, imagínate que es la persona que compra y la que atiende o la que atiende el pedido sería persona empleada ¿no? entonces teníamos aquí la clave primaria y las claves ajenas la historia es, ¿funcionaría igual que esto? sorprendentemente sí se podría hacer que esto es algo que ya más adelante os quería ver cuando ya estemos con SQL, pero al igual que con el tema este de diseño es decir, funcionar, funcionaría se podría llegar al mismo punto por un camino diferente, y a su vez con esta clase de cosas, nosotros cuando hagamos consultas en las bases de datos también habrá diferentes maneras de llegar de un punto a un punto b vale verdad que lo quería dejar para un poco más adelante pero esto básicamente es adjunto works vale si yo quiero información de clientes y pedidos yo me voy de cliente a header que son las facturas o me voy a adit el poder como está definido pero qué ocurre cliente aquí también tiene una clave de persona que también es una persona entonces claro si yo tuviese aquí el personal y que hace referencia a la persona aquí mismo también podría conectarlo y funcionaría la cuestión es que hay que tomar una decisión y hay veces que se toman de una manera o de otra aunque el resultado después finalmente sea el mismo vale pero como tú has dicho esto sería también perfectamente válido lo único que en vez de tener código de persona y empleado en otras tablas pues tendríamos código persona empleado código persona cliente vale siempre que se relacione funcionaría también a la perfección pero muy bien razonado la verdad Muy bien. primaria y hay claves que son candidatas, pasaporte, ¿es una clave candidata? Sí, ¿vale? Pero en este caso se ha elegido esta opción ¿se podría haber elegido pasaporte? Si ingeniería lo estimula o sea, si ingeniería que es oportuno y sirve, lo haría ¿qué ocurre? Aquí entra un factor de por qué hay un código ¿vale? Esto es más de ingeniería, de verdad que yo no suelo abarcar esto, que es que normalmente las claves primarias de una tabla, ¿vale? son autoincrementales Es decir, imaginaros que se da de alta un cliente nuevo en nuestra empresa, en nuestra página web, ¿vale? Lo que automáticamente hace en el servidor es que, pum, se planta un nuevo registro, que sería en este caso el 34, con los datos del cliente, ¿vale? Y el cliente después incluye el pasaporte. o por ejemplo, imagínate que pasaría que si hasta que el cliente no proporciona su pasaporte no puede estar en la tabla de persona porque la clave primaria debe de existir pero que ocurre cuando alguien se da de alta y no quiere dar el pasaporte ¿qué hacemos ahí? es decir, normalmente siempre van a ser códigos ¿por qué? porque estos códigos se van generando automáticamente a medida que se incluye un registro nuevo y eso normalmente funciona para todas las tablas y otro punto del que por qué no se suele utilizar pasaporte DNI o el ID o similar no sé si os lo he comentado pero cuando combinamos tablas que ya veréis a nivel de SQL cuando combinamos números enteros es decir, utilizando claves que son números enteros es mucho más eficiente que hacerlo con alfanuméricos y normalmente en el pasaporte va a haber una letra o similar, ya no es número entero ¿vale? entonces siempre se suele en términos de diseño centrarse en la parte en la que tenemos únicamente en números enteros e intentar evitar combinaciones o de fechas o de o de cadenas de texto listo jorge pregunta cuando empleados por ejemplo gente del territorio empleado también os digo a todos no le deis más vueltas sobre todo aquí cuando estemos con el sql me parece bien que lo hagamos, pero tampoco le deis demasiado vueltas a esto, es decir, posibilidad A, B, C, D y demás, más que nada porque, a ver, estos son supuestos que yo simplemente planteo para que entendamos cómo funciona tampoco es que abandemos todas las posibilidades, ¿vale? cuando estemos con los datos y tengamos las tablas definidas y podamos hacerlo en SQL, ahí sí será interesante decir, vale, yo puedo llegar al punto A, al punto B, por aquí o por aquí, eso sí será útil pero ahora mismo con el tema con este tema, sobre todo, que son un poco hipotéticos sinceramente, o sea, no merece mucho la pena perder el tiempo, ¿vale? más que nada porque tampoco va a aportar nada, es algo que vais a olvidar a menos que lo practiquemos con algo práctico como tal, ¿vale? Alejandro pregunta si los técnicos de ingeniería de datos son los que tienen conocimiento del negocio fabricado en el modelo no, ellos son los que reciben la información del negocio para crear eso, pero ¿quién se encarga de por ejemplo, de reunir esos requisitos para crear la base de datos depende de la empresa, o sea, no sabría decirlo en realidad ¿Vale? Si hay tiempo para otra pregunta Sí, sí, a ver, vamos un poco más lento, pero no pasa nada, dime Alejandro, sin problema La última simplemente es, en una relación varios varios por ejemplo, varias Esta misma, imagínate Sí, cuando ocurre cosas de casas o tal, pero vale, sí, cualquiera que sea, siempre va a haber una, siempre, entonces se va a tener que hacer una tabla intermedia en ese caso. Sí. Siempre. Sí, es decir, para que funcione bien el almacenamiento, sí, es decir, la tabla intermedia debe existir. ¿Por qué? Porque si tú quieres mapear las interacciones entre las claves ajenas, tienes que tener una primaria que identifique cada registro de forma única, es decir, cada interacción entre las ajenas. por ejemplo, entre tipo de descuento y moneda, cada interacción que haya, tiene que estar a nivel de una línea. Y esa línea tiene que estar identificada de forma única. Y eso siempre debe ser así. Es decir, nosotros cuando veamos a Dogework, que es esto, aquí no hay ninguna relación NN. Pero, por ejemplo, si ahora yo te digo, tenemos Customer y tenemos Product. Obviamente, los clientes pueden comprar diferentes tipos de productos. Un tipo de producto puede ser comprado por diferentes clientes. ¿Cómo se mapea? A través de pedidos. al final cabo vale pero de hecho o sea os sugiero de cuando nosotros estemos ya con sql que por cierto lo vuelvo a decir empezamos la semana que viene todas estas cuestiones una vez que tengamos ya las tablas y demás preguntármela porque eso sí que creo que creo que es interesante de ya de ahí ver las posibilidades con un ejemplo en concreto para decir oye qué pasaría si lo vemos vale pero ¿Cuál es también la parte positiva? Que lo podemos ver y podemos practicar el código para extraer la información a la vez. Entonces es un doble, es un win-win, como suelo decir. ¿Ok? ¿Sí? Bien, vale. Seguimos. Como decía, la actividad voluntaria 2, que ahora sea 2-2 en este caso, la estructura es la misma. vale yo os doy una serie de tablas que en este caso mirad por ejemplo que la semana pasada hablamos de ventas aquí sí que ya especificó las ventas como tienen que ser es decir tenemos el header y el detail otras palabras géneres facturas o pedidos y transacciones son los detalles vale después tenemos clientes servicios categorías y técnicos de acuerdo cada uno pues tiene sus atributos y después tienen pues sus relaciones vale las relaciones que se basan en las restricciones como habéis dicho de hecho no que son efectivamente definidas porque por la empresa a la hora de crear la base de datos de acuerdo por ejemplo en este caso de estas tablas yo le he dado cuatro valores aleatorios y ahora lo primero que tenemos que hacer es asignar las claves primarias en este caso que de hecho acabamos de hablar de ello lo más probable es que sea algo de con plantas acciones será código de transacción vale después factura código de factura de clientes será el número de clientes o como decía el compañero podría ser el pasaporte si sería una clave candidata pero en términos del diseño de base datos es más cómodo que haya un id propio de cliente después tenemos servicios que ojo como ya os he dicho normalmente cuando hablamos de productos o similar siempre va ser tipología vale a excepción de que yo diga lo contrario tenemos técnicos y tenemos categoría de servicios vale la primera parte muy sencilla porque la publicidad donde está en las relaciones y en este caso he sido mucho más benévolo y os he dado las relaciones entre las tablas desde un punto de vista y del otro que creo que es lo que comentaba antes el alejandro vale es decir si nosotros empezamos por el primero nos dice un servicio forma parte de una categoría pero en una categoría puede agrupar varios servicios en este caso vale es bastante claro un servicio siempre va a tener una categoría pero una categoría puede abarcar pues varios servicios cierto sabiendo esto cuál es la clave ajena código de categoría o código de servicio con la categoría todo el mundo lo ve por ejemplo si yo sé que un mismo producto puede formar parte de una misma categoría que es lo que no está diciendo yo no puedo poner aquí el código de servicio se duplicaría tengo que incluirlo aquí y recordar lo que hemos dicho la semana pasada que siempre lo intento repetir siempre en estos casos la clave primaria del 1 en este caso servicios va como clave ajena en él bien después tenemos una transacción forma parte de una factura pero una factura puede contener varias transacciones esto es para ocurre en el 99 99 por ciento de las empresas es decir siempre que hablamos de lo que el centro de operativo de las ventas que sean servicios o productos no siempre vamos a tener la tabla de header y la tabla de edite vale que es pedidos o facturas y tell que es transacciones vale nosotros cuando pedimos en una tienda online amazon sin ir más lejos no pedimos lo que hablamos la semana pasada no vamos a cambiar un poco el ejemplo hemos pedido un auriculares y un ratón vale la factura o el pedido es uno verdad transacciones cuántas son dos porque porque son dos productos vale entonces esto sí que se suele cumplir prácticamente en el 100% de los casos porque dentro de lo que cabe la estructura de las ventas suele ser igual entonces sabiendo eso cuál es la clave ajena código de transacción o número de factura hoy la transacción código de transacción en la clave ajena seguro el número de factura porque porque realmente una factura considerado como un pedido nosotros en el mismo pedido podemos tener un producto sí pero podemos tener tres también como he dicho podemos pedir un ratón y unos auriculares y que se yo un cuaderno vale el pedido es el mismo pero hay tres transacciones que son tres productos vale entonces si yo cada transacción va a pertenecer a un pedido pero a un pedido pueden aparecer varios varias transacciones tenemos que establecer el número factura como clave ajena en transacciones de hecho para que veáis el ejemplo vale esto que os he dicho de header y detail sé que esto es un poco agobiante ahora mismo porque diréis porque qué es esto pero esto de handwindsure works vale nosotros aquí tenemos header vale como os he dicho y detail vale en header nosotros tenemos el sales order id que es como el número de pedido factura y aquí el sales order id funciona como clave ajena vale para ver todos los detalles no os preocupéis que esto obviamente una vez que estemos ya con SQL y aprendamos primero con las tablas básicas, iremos a Dunsburg. Bien, seguimos. Una transacción contiene un servicio, pero el servicio puede estar presente en varias facturas. Entonces, aquí, ¿qué estamos intentando relacionar? Es decir, nos dice que una transacción contiene siempre un servicio. ¿Cierto? Pero a la vez nos dicen que una factura puede tener varios servicios. ¿Por qué nos está mezclando aquí tres tablas? ¿Por qué creéis? Una relación de transitividad pronto entre las tres. Más fácil. Es decir, sabemos que una transacción va a tener un código de servicio. ¿Y cómo sabemos que la factura puede tener varios códigos de servicios? Por esto. Es decir, nosotros estas dos tablas las podemos combinar. ¿Os acordáis lo que vimos la semana pasada? Que estaba entre comillas un poco mal Es decir, nosotros De facturas podemos ir a servicios ¿A través de qué? De transacciones Es decir, tiene sentido Ahora bien, la relación entre Servicios Y transacciones ¿Cómo sería? Es decir, ¿qué haría yo en este caso? ¿Código de servicios sería La clavagina en transacciones O código de transacciones en servicios? Código de servicios en transacciones Bastante sencillo en este caso de verdad es decir nosotros sabemos que puede haber mil transacciones y puede haber miles de servicios las tipologías bien seguimos nos dice una factura debe pertenecer a un único cliente y un único técnico vale porque por otro lado los clientes pueden tener asignadas varias facturas, bueno, pueden tener varias facturas, ¿vale? Y un técnico también puede estar asociado con varias facturas. Fijaros, aquí, tanto cliente como técnico, en términos de la relación en la base de datos, funcionan como exactamente igual, ¿vale? Empecemos con los clientes, ¿no? Nosotros sabemos que un cliente puede tener varias facturas, pero ¿qué ocurre? una factura vale pertenece a que a un único cliente es decir cuando nosotros hacemos el pedido en amazon el pedido x 74 b es nuestro pedido ninguna otra persona va a tener pero nosotros tenemos esa factura o pedido y hace una semana hicimos otro entonces sabiendo eso que esto también es el tema clientes el 99% a la vez que también es así siempre de la misma manera ¿cuál es aquí la clave ajena? ¿número de cliente en facturas o factura en clientes? Número de cliente en facturas ¿lo veis todos? es decir lo que decíamos, ¿no? nosotros que somos FTD, ¿vale? la asignatura, nosotros a lo mejor tenemos estas dos facturas y después tenemos también esta de aquí es decir, el mismo cliente puede tener varias facturas pero una factura independientemente de qué cliente es sólo será uno único de acuerdo ahora fijaros en cuanto a los técnicos los técnicos funcionan como igual es decir una factura siempre que va a tener un técnico por un técnico va a tener asociada varias facturas entonces en este caso cuál es la clave ajena código de técnico o me llevo yo el número que te facturas aquí código de técnico como veis se comporta exactamente igual vale y con esto efectivamente tendríamos resuelto el ejercicio si esto sí es muy parecido lo que es la vida real por una decir calca muy simplificada pero pero sería así de hecho nosotros vamos a empezar con un sql ya la semana que viene yo os daré principio tablas de este tipo logía no con cuatro registros habrá más vale que yo he ido creado a lo largo de los años y os dije vale está la base de datos tiene cinco o seis tablas y ahí iremos a aprender el lenguaje pero con tablas pequeñitas y controlables vale ya adwin toolbox tiraremos más más adelante de acuerdo dudas preguntas que sería lo mínimo que uno debería saber en este cuerpo lo que os comenté no nos preocupéis por ello vamos a empezar desde cero vale vale vamos a ver todas las funciones básicas y que hemos subiendo al nivel pero tampoco creáis que nos vamos a decir no nos vamos a quedar la mitad vamos a llegar bastante lejos vale de ahí por lo que siempre os digo, siempre intento tener más para la práctica en vez de simplemente contaros la teoría, porque es una pérdida de tiempo pero que no hace falta saber nada, ¿vale? la semana que viene, lo único que tenéis que tener instalado es SQL que de hecho no lo vais a utilizar pero justo después de la clase, cuando ya hayas grabaciones y demás sí que os pediré, ¿vale? que las cláusulas y las funciones que apliquemos la semana que viene las hagáis con vuestro propio ordenador de cara a ir practicando todo esto, ¿vale? Pero no os preocupéis, la semana que viene no hace falta nada, lo único que tengáis ya si podéis, SQL instalado, ¿vale? Pero por lo demás hay que venir de cero, no pasa nada Profe, una pregunta con respecto a la presentación del taller número 1, ¿sería para usted mejor presentarlo de esta manera o de la manera del taller voluntario anterior, que es como una hoja por cada situación? No te estaba entendiendo, ¿tú te refieres de cara a la entidad la actividad 1 sí señor vale la actividad 1 que es estar aquí vale de hecho vamos como ya hemos terminado baja aprovechaba habla de ella como veis en la misma estructura entonces de carga integrar vosotros si no recuerdo mal tenéis estáis asignados en grupos no son individuales los ejercicios en grupos exacto pues imaginar pues vosotros sois tres yo lo que quiero que me traguéis es esto vale es decir creáis las tablas que os piden aquí eso sí las tablas vais a tener que crear los valores vale identificar la clave primaria por ejemplo lo ponéis en verde asignar las claves ajenas y la ponéis en otro color aquí arriba o en algún lado importante los nombres de todos los integrantes del grupo vale porque porque después cada uno de vosotros tenéis que subir el mismo excel vale por Por lo tanto, subís todos el mismo Excel y ya está. No hace falta Word, no hace falta PDF, ni nada. Con subir el Excel todos los integrantes del grupo, porque todos lo tienen que subir, es suficiente. No hace falta inscripción ni nada. Yo lo que quiero al final ver es cómo va a ir asignado a las claves ajenas. Sin más. Y en este caso, las tablas son servicio de venta por venta, tipo de motocicleta, que es tipología, empleados, mecánicos y vendedores. Cada uno, cuatro registros, a excepción de mecánicos y vendedores, que pueden ser dos y dos, ¿vale? Porque dependen de empleados. Identificáis la clave primaria, asignáis las claves ajenas en función de lo que pide aquí, ponéis vuestros nombres y subís el mismo archivo todos. ¿De acuerdo? Sencillo, ¿vale? No os compliquéis tampoco la vida. Con esto es más que suficiente. ¿Sí? Listo, sí señor. perfecto más dudas más preguntas va bien vamos al tema 2 vale en el tema 2 y que a lo básico vale porque básicamente es la parte de diseño yo ya había comentado que nosotros bueno en este caso que ya esté trabajando la función es es consumir la información. Nosotros tenemos que ser capaces de leer un diagrama, como por ejemplo este de Adwuncher Works, y para ello necesitamos entender cómo se hace, cómo se estructura esa base de datos. Por ejemplo, cuando antes habéis preguntado algunas de las casuísticas del por qué es así y no de otra manera. Entonces, claro, todo eso pasa en el proceso del diseño. ¿Y qué ocurre? El diseño se suele centrar en tres partes. ¿vale? y de hecho nosotros como usuarios no intervenimos nada, ahí va ingeniería y demás entonces se divide un poco en tres etapas que es la conceptual, lógica y física, lógica y física es la parte más informática de la propia configuración a la base de datos ¿vale? pero lo que a nosotros nos interesa porque entre comillas nos va a impactar a nosotros es el diseño conceptual, ¿por qué? porque el diseño conceptual, como antes comentábamos ¿no? ingeniería se sienta a través de project manager, etcétera, se sienta y se hace un primer boceto de cómo funciona la información dentro de la empresa, es decir, cómo fluyen los datos, ¿vale? Es decir, cuántas entidades barra tablas me hacen falta, cómo se relaciona, ¿vale? Es decir, tanto clave primaria como clave ajena, un poco lo que hemos estado haciendo hasta ahora, pero que no hagan muy básica lo que hemos hecho nosotros, ¿vale? Y básicamente, en base a las restricciones que cuentan los usuarios, diseñar esa primera versión, ¿vale? Y esa primera versión, lo más importante de ella es el modelo de entidad-relación, ¿vale? Porque es el primer boceto en el que se puede ver cómo fluye la información en sí, ¿vale? Esto es un modelo de entidad-relación, es de los antiguos, ¿vale? Ahora se hacen de una manera un poco más como con otras herramientas, pero que en esencia la funcionalidad es la misma, solo que ahora mismo, pues, un poquito más bonito. Pero como nosotros no vamos a diseñar nada, simplemente lo que vamos a entender este ejemplo nos vale cuando se diseña este modelo entidad relación se centra en cuatro puntos fundamentales vale la entidad el atributo el dominio y obviamente en la relación las entidades en un modelo entidad relación se representan por rectángulos vale por ejemplo departamentos empleados después hay atributos que son que las columnas realmente de cada entidad que tengan su clave primaria ajena etcétera después tenemos el que las relaciones vale algo que ya hemos ido hilando con las claves porque en esencia esto es una visualización gráfica de lo que hemos estado haciendo vale y obviamente lo que tenemos aquí entre paréntesis que son las cardinalidades que también ya hemos visto porque por tener un ejemplo no de empleados trabajan departamentos es decir los empleados trabajan en departamentos y por otro lado en departamentos trabajan empleados entonces aquí tenemos esas cardinalidades que ya hemos hemos ido haciendo verdad por ejemplo un empleado trabaja en como mínimo un departamento como máximo en uno porque así es como la definida la empresa vale y se establece la cardinalidad de la primera relación o sea de la misma relación desde un punto de vista y al revés en departamentos trabajan empleados en un departamento como mínimo según esta empresa que tiene que trabajar un empleado vale y como máximo cuánto en la otra relación que hay, los empleados administran departamentos. Siempre se da cardinalidad después de expresar la relación. ¿Vale? Entonces, los empleados administran como mínimo en esta empresa ¿cuántos departamentos? Un empleado administra como mínimo... ¿Qué es lo que nos pone aquí? Como mínimo, ¿cuántos? cero ¿por qué? ¿qué es para esta empresa en particular? ¿qué quiere decir esto? obviamente hay muchos empleados pero hay empleados que no son jefes simplemente son empleados no son managers entonces habrá empleados que no administren ninguno pero después habrá empleados que administren pero solo uno es decir, solo será el jefe de departamento de una y si es al revés un departamento es administrado como mínimo por un empleado y como máximo también por uno de acuerdo porque puede haber un jefe ojo como antes me decíais pero esto quién lo define esto lo define en el proceso del diseño de la base de datos sabiendo cómo funciona la empresa de acuerdo por lo tanto como decía fundamental las entidades atributos dominio relación las entidades que son básicamente las tablas pueden ser fuertes o débiles sí que verdad que el día de hoy se diseña que son todas fuertes pero puede darse caso que hay entidades cuya existencia depende de otros vale que son las débiles por ejemplo en este caso hijos de empleados es una débil una tía débil porque depende de empleados directamente vale después está en la relación algo que ya hemos practicado bastante vale ahora cuando cuenta las relaciones también se relaciona más con una acción indicativa no entiendo muy abril micro si quieres alejandro y me lo explica, porque no sé si te he explicado. Acción indicativa, me refiero a departamentos, trabaja, entonces uno a uno trabaja y luego es administra y luego es tiene, vende, compra... Exacto, es decir, es como de la manera como de lenguaje expresivo más básico, ¿vale? O sea, con verbos lo más simplemente posible. Indicativos. Indicativos, efectivamente. La verdad es que no... Nunca he dicho esa palabra. lo acabo de buscar en Google dice que es verificativo pero sí, es decir como decirlo es como si fuera para niños, al fin y al cabo es decir, de que empleados trabajan departamentos departamentos trabajan empleados, es decir, que sea lo más básico posible, con lenguaje natural también lo que se suele decir, que lo suelen hacer, pero sí, es como se suele enseñar para que sea sencillo, para no tampoco hacer relleno del propio diseño porque realmente equivocarse en algo de esto e irse después a alguna de las otras fases equivocarse y volver es costoso realmente después sobre todo en tiempo, básicamente bien, como decíamos, esta es la entidad y después la otra parte fundamental que nosotros ya estamos más que familiarizados son las relaciones y que de hecho hemos visto que puede haber relación entre dos tablas, entre tres, incluso que dos tablas se relacionen de dos maneras diferentes o que se relacione consigo misma. Que si recordáis, esto es lo que vimos la semana pasada con el ejercicio de claves. Igualmente lo vamos a ver porque lo tengo aquí también especificado. Es decir, si recordáis, la binaria, que interviene en dos tablas, teníamos libro y autor, y el de autor era la clave ajena, es decir, lo que nos permitía conectar los datos. después en la ternaria, libro, autor y editor que pasaba lo mismo, libro se le asignaba, iré de autor iré de editor, o la de 2 a 2 que básicamente era esta varianza del libro con el autor y editor siendo la misma persona que por ejemplo, creo que una compañera lo que decía que se podía aplicar en un ejercicio que hemos hecho al principio de la clase lo mismo, iré de persona a editor, iré de persona a escritor y después estaba la reflexiva que es que básicamente se relaciona consigo misma. ¿De acuerdo? Todas ellas realmente están presentes en la base de datos de una manera u otra. De hecho, lo más normal es que por lo menos haya un ejemplo, cualquier base de datos de 3 o 4 de esta tipología. A excepción de la reflexiva, que como ya os he dicho, suele ser relacionada principalmente con recursos humanos y las tablas de empleados. ¿De acuerdo? Por lo tanto, así es como básicamente se hace una primera aproximación. ¿vale? lo que decíamos ¿no? estos parámetros o relaciones las define la empresa indirectamente ¿no? porque es la que especifica cómo se trabaja, como por ejemplo antes que Alejandro decía ¿no? oye ¿qué pasa si yo mi idea de negocio es que son puestos donde hay una persona solo una persona la cual pues prepara el café ¿de acuerdo? ahí puede haber una restricción de que es que realmente un puesto solo tiene una persona, ya sea responsable o empleada, no puede haber varias, solo una ¿vale? pero Efectivamente, que esto depende de cómo se especifique a la hora de este diseño conceptual, ¿vale? Por lo tanto, en este ejemplo, por ejemplo, empleado dirige, cardinalidad, tabla 2. Empleado dirige, como mínimo, ningún departamento, porque es un empleado normal, y como máximo uno. Después, un departamento es dirigido, como mínimo, porque un empleado y como máximo por uno, ¿vale? Un empleado pertenece como mínimo a un departamento y como máximo a uno. Y después, a un departamento pertenecen, y ojo aquí por ejemplo, como mínimo cinco empleados, pero porque se ha definido para esta empresa, y como máximo N. ¿De acuerdo? Todas estas configuraciones realmente después se definen en función de lo que vea la empresa. vale, el atributo por ejemplo aquí pues dependería, vale, empleado puede ser antigüedad, obviamente y de empleado que sería clave primaria antigüedad, salario bonus, etcétera, depende también de lo que la empresa quiera almacenar de los empleados ¿de acuerdo? y dominio que es lo que iba yo ahora el dominio hace referencia a la tipología del atributo, por ejemplo normalmente nosotros nos vamos a encontrar con tres tipologías grandes que son número entero, en una base de datos me refiero, número entero, cadena de texto, ¿vale? O cadena alfanumérica y fecha, ¿vale? Esos son como los tres grupos grandes que nos podemos encontrar. Después cada uno tendrá sus variaciones, ¿vale? Porque, por ejemplo, habrá atributos que son color, que sería texto alfanumérico, después tendríamos la clave o el precio, que sería número, sea entero o decimal, Y después tendríamos, por ejemplo, fecha de pedido, que sería fecha. Eso es lo que sería el domingo. ¿Vale? Es decir, tipología del dato. Y hay veces que se representa aquí, modelo de última relación, hay veces que no. Pero normalmente se suele hacer. ¿Vale? ¿Ok? Entonces, como ya hemos visto aquí el ejemplo, ¿no? De que, en esencia, lo único que hace es darle un sentido a la vaina. de los datos dentro de la propia empresa y hay algo muy particular vale que se llama especialización o generalización vale que es lo mismo solo que depende desde qué punto lo miremos vale y de hecho esto lo tenéis en la actividad uno que vais a entregar que hace referencia precisamente que un empleado puede ser mecánico o vendedor nunca ambos no hace falta representarlo de ninguna manera en ejercicio pero sí que está directamente relacionado con ello vale porque básicamente nosotros vamos a tener vale en muchos casos entidades que hagan referencia a algo muy muy específico siendo muy presente en la empresa pero que está se puede subdividir en diferentes categorías por ejemplo vale voy a coger un excel nuevo y simplemente lo voy a poner vale de hecho vamos a utilizar un ejemplo que ya hemos hecho que es persona vale tenemos la entidad de persona vale pd es la clave primaria y hoy y tenemos 1 2 3 4 vale juan rocío carmen luis imaginar no entonces nosotros tenemos la tabla de persona que ocurre persona dentro de la base de datos puede hacer referencia a diferentes cosas personas que son clientes empleados qué sé yo proveedores pues cada una es voy a poner como cliente id y bueno voy a llamar a este id ¿vale? y aquí tenemos voy a añadir uno más ¿vale? 5 vamos a llamarlo Julio ¿vale? tenemos aquí las claves primarias es decir, subdividimos la persona en clientes, empleados y proveedores. Es decir, siempre va a haber aquí una clave ajena de persona. ¿Y qué ocurre? ¿Por qué se dividen en diferentes tablas? Porque lo normal cuando hablemos de clientes sea la cuenta del cliente, puede ser, qué sé yo, el teléfono. ¿Vale? Después en empleados, que son personas, aquí tendremos salario, antigüedad. Y en proveedores puede ser, pues, balance, ¿vale? O también el IMEI. Si os dais cuenta, todos son personas, ¿vale? Pero las dividimos en diferentes tablas. ¿Para qué? Porque si yo hago esto, imaginaos, yo me hacen falta los campos de todas las tablas y las tengo aquí. ¿Qué pasa? Uno y dos son clientes, es decir, esta información la va a tener, pero esta no, porque no son empleados ni son proveedores. Lo mismo pasaría aquí. Carmen y Luis, por ejemplo, que son empleados, pero después balance de email nada. Y con Julia, pues pasaría lo mismo. Es decir, si nosotros tenemos una tabla de personas, pero después tenemos mil atributos que hacen referencia a la vez que es lioso para clientes, empleados, proveedores, no está aquello muy limpio. Entonces, ¿qué se hace? Se especializa o generaliza. Es decir, si vamos desde arriba hacia abajo, es especialización y si vamos de aquí para arriba es generalización. pero la cuestión es tenemos una fuente de los datos y después de cara a optimizar el almacenamiento y las conexiones los segmentamos es decir, vamos a tener un supertipo y tendremos subtipos en este caso por ejemplo está el libro y habrá el libro de economía de derecho así se representa la especialización ¿y por qué? porque economía de derecho tendrán diferentes atributos y lo mismo ocurre aquí ¿Vale? Ahora bien, aparte de que se pueden especializar, hay dos factores a tener en cuenta en esas especializaciones, que es si es total o parcial y si tiene o no solapamiento. ¿Vale? ¿Qué hace referencia que es total? Que son estos dos ejemplos. Total quiere decir que el empleado, en este caso, se divide en docente o no docente Es decir, no hay ninguna otra posibilidad O que la persona se divide en empleado o estudiante Es decir, no hay ningún otro subtipo que se pueda crear Bajo la lógica de la empresa Y el hecho de que sea parcial La totalidad se representa con un círculo justo después del subtipo El supertipo la parcialidad hace referencia a que esa segmentación no está definida, que hay opciones de que se pueda crear un subtipo nuevo, por ejemplo, documento, puede ser libro, artículo, o imaginaros que el día de mañana se crea uno nuevo que es de, qué sé yo, revistas, ¿vale? O es parcial en este caso porque el empleado es docente e investigador, pero también se puede crear, un día de mañana se crea, empleados de mantenimiento o empleados de administración. Es decir, total quiere decir que se puede dividir en X subtipos, pero que están cerrados, es decir, no hay opciones. Por ejemplo, aquí, una cosa u otra. En Parcilla es que hay muchas posibilidades abiertas. Ahora, totalidad, perdón, solapamiento, que un poco lo dice la propia palabra. es decir, aquí no hay solapamiento es decir, un empleado que es o docente o no docente no puede ser ambos un documento o es un libro o es un artículo, no puede ser ambos a la vez pero si hay solapamiento como por ejemplo en estos dos casos de abajo es que una persona es empleado o es estudiante o ambos a la vez o que un empleado sea docente o investigador o ambos a la vez. La mejor manera de ver esto son datos. Por ejemplo, total sin solapamiento. ¿Por qué es total? Porque el empleado se vive de docente o no docente. No hay ninguna posibilidad de que haya ningún otro tipo, subtipo que se pueda crear. ¿Por qué no hay solapamiento? Porque es o uno u otro. Por ejemplo, 3 y 2, Rocío Jesús, son docentes. Juan y María son no docentes. ¿Vale? Parcial sin solapamiento. Documento, me han dicho. Libro, artículo, pero se podría crear otro, como revista. ¿Vale? total consolapamiento persona que es empleado y estudiante ¿por qué es total? porque o se divide un empleado y estudiante, no hay otra categoría, pero porque hay solapamiento, por ejemplo mirando los datos, ¿qué persona es empleado y es estudiante? ¿qué persona es empleado y estudiante? mirando los datos Claudia Claudia es la empleada número 11 y la estudiante número 12. ¿Vale? Y finalmente, parcial con solapamiento, el mismo empleado, investigador, pero que se puede dividir en otro subtipo y porque hay solapamiento. Porque aquí, por ejemplo, la docente, 111, y el investigador, 111, que son la misma persona, que es Lara. ¿De acuerdo? Para practicar de una manera muy rápida, supongamos que tenemos estas tablas. Vehículos que se dividen en coches y motos. Y nos dicen que solo hay estas dos posibilidades, o coches o motos. Entonces, ¿qué estamos hablando? ¿De totalidad o parcialidad? Totalidad. Eso es, es decir, coches o motos, no hay otra posibilidad. Y aquí, mirando los datos, ¿hay solapamiento o no? En este caso en particular. No. No, es decir, o es coche o es moto. Pero, ¿qué ocurre? A lo mejor en otra empresa las tablas son las mismas y dicen, No, pero es que es tan, da la posibilidad de que tengamos también quads. Entonces vamos a tener otra tabla de quads. ¿Esto hace referencia a qué? ¿A parcialidad o totalidad? Parcialidad. ¿Por qué? Porque se podría dividir en otro subtipo nuevo que todavía no existe, que es el de quads. ¿Y por qué hay solapamiento aquí? Porque, por ejemplo, BBV, están tanto en coches como pueden estar en motos. ¿Vale? En esencia, esto del tema del modelo de unidad y relación, en su día teníamos los ejercicios, pero hemos dejado de hacerlo porque realmente ya con las claves es suficiente. ¿Vale? Pero entenderlo es fundamental. ¿Por qué? Para que después esto nos sea mucho más fácil de entender también y de relacionar. ¿de acuerdo? y nada por mi parte ya hemos terminado esta parte más teórica que hemos estado haciendo y ya la próxima semana como decía ya vamos a empezar con el SQL ¿hace falta saber el SQL? no, pero sí que por favor os pido, si no lo habéis instalado ya, que en la medida lo posible lo tengáis instalado la semana que viene no importa que sea después de las clases ¿vale? pero sí que ya la semana que viene os mandaré ejercicios de carga a practicar, un poco por vuestra cuenta, ¿vale? No solo vamos a practicar con SQL en la clase yo compartiendo pantalla y viendo el código, sino que también os mandaré algún que otro ejercicio ¿de acuerdo? Así que nada, pues por mi parte poco más, no sé si tenéis alguna duda, alguna pregunta ¿no? Todo muy claro. Perfecto pues nada, pues os deseo entonces a todos una muy buena semana ¿De acuerdo? Y nada, nos vemos la semana que viene ¿De acuerdo? Cuidado con mucho calor Un saludo Hasta luego
